
<!doctype html>
<html lang="en" class="no-js">
  <head>
    
  
      <meta charset="utf-8">
      <meta name="viewport" content="width=device-width,initial-scale=1">
      
        <meta name="description" content="Learn how to create cross-chain contracts using Wormhole's Solidity SDK. Deploy contracts on Avalanche and Celo TestNets and send messages across chains.">
      
      
      
        <link rel="canonical" href="https://docs.wormhole.com/tutorials/messaging/cross-chain-contracts/">
      
      
        <link rel="prev" href="../">
      
      
        <link rel="next" href="../cross-chain-token-contracts/">
      
      
      <link rel="icon" href="../../../assets/images/favicon.webp">
      <meta name="generator" content="mkdocs-1.6.0, mkdocs-material-9.5.24">
    
  

    <title>Create Cross-Chain Contracts | Wormhole Docs</title>
    
	
      <link rel="stylesheet" href="../../../assets/stylesheets/main.6543a935.min.css">
      
      
  
  
    
    
  
    
    
  
  
  <style>:root{--md-admonition-icon--note:url('data:image/svg+xml;charset=utf-8,<svg xmlns="http://www.w3.org/2000/svg" viewBox="0 0 16 16"><path d="M11.013 1.427a1.75 1.75 0 0 1 2.474 0l1.086 1.086a1.75 1.75 0 0 1 0 2.474l-8.61 8.61c-.21.21-.47.364-.756.445l-3.251.93a.75.75 0 0 1-.927-.928l.929-3.25c.081-.286.235-.547.445-.758l8.61-8.61Zm.176 4.823L9.75 4.81l-6.286 6.287a.253.253 0 0 0-.064.108l-.558 1.953 1.953-.558a.253.253 0 0 0 .108-.064Zm1.238-3.763a.25.25 0 0 0-.354 0L10.811 3.75l1.439 1.44 1.263-1.263a.25.25 0 0 0 0-.354Z"/></svg>');--md-admonition-icon--warning:url('data:image/svg+xml;charset=utf-8,<svg xmlns="http://www.w3.org/2000/svg" viewBox="0 0 16 16"><path d="M6.457 1.047c.659-1.234 2.427-1.234 3.086 0l6.082 11.378A1.75 1.75 0 0 1 14.082 15H1.918a1.75 1.75 0 0 1-1.543-2.575Zm1.763.707a.25.25 0 0 0-.44 0L1.698 13.132a.25.25 0 0 0 .22.368h12.164a.25.25 0 0 0 .22-.368Zm.53 3.996v2.5a.75.75 0 0 1-1.5 0v-2.5a.75.75 0 0 1 1.5 0ZM9 11a1 1 0 1 1-2 0 1 1 0 0 1 2 0Z"/></svg>');}</style>



    
  <link rel="stylesheet" href="../../../assets/stylesheets/wormhole.css">

    
  
      
    
  <link rel="preconnect" href="https://widget.kapa.ai/">
  <style data-emotion="mantine" data-s=""></style>
  <script defer
    src="https://widget.kapa.ai/kapa-widget.bundle.js"
    data-website-id="a5f481b8-5f4f-43fc-b6bd-11169bac7271"
    data-project-name="Wormhole"
    data-project-color="rgb(75, 75, 75)"
    data-button-box-shadow="0 0 10px rgba(255, 255, 255, 0.2)"
    data-project-logo="../../../assets/images/logo-for-kapa.webp"
    data-font-family="Roboto"
    data-footer-tos-privacy-links='[{"title": "terms of service", "url": "https://wormhole.com/pages/terms-of-use"}, {"title": "privacy policy", "url": "https://wormhole.com/pages/data-protection-and-privacy-policy"}]'
  ></script>

    
      
        
        
        <link rel="preconnect" href="https://fonts.gstatic.com" crossorigin>
        <link rel="stylesheet" href="https://fonts.googleapis.com/css?family=Roboto:300,300i,400,400i,700,700i%7CRoboto+Mono:400,400i,700,700i&display=fallback">
        <style>:root{--md-text-font:"Roboto";--md-code-font:"Roboto Mono"}</style>
      
    
  <link rel="preconnect" href="https://fonts.googleapis.com">
  <link rel="preconnect" href="https://fonts.gstatic.com" crossorigin>
  <link href="https://fonts.googleapis.com/css2?family=Roboto+Mono:ital,wght@0,100..700;1,100..700&family=Roboto:ital,wght@0,100;0,300;0,400;0,500;0,700;0,900;1,100;1,300;1,400;1,500;1,700;1,900&display=swap" rel="stylesheet">

    
      <link rel="stylesheet" href="../../../assets/stylesheets/extra.css">
    
      <link rel="stylesheet" href="../../../assets/stylesheets/terminal.css">
    
    <script>__md_scope=new URL("../../..",location),__md_hash=e=>[...e].reduce((e,_)=>(e<<5)-e+_.charCodeAt(0),0),__md_get=(e,_=localStorage,t=__md_scope)=>JSON.parse(_.getItem(t.pathname+"."+e)),__md_set=(e,_,t=localStorage,a=__md_scope)=>{try{t.setItem(a.pathname+"."+e,JSON.stringify(_))}catch(e){}}</script>
    
      
  


  
  

<script id="__analytics">function __md_analytics(){function n(){dataLayer.push(arguments)}window.dataLayer=window.dataLayer||[],n("js",new Date),n("config","G-SGJJFZS9BB"),document.addEventListener("DOMContentLoaded",function(){document.forms.search&&document.forms.search.query.addEventListener("blur",function(){this.value&&n("event","search",{search_term:this.value})}),document$.subscribe(function(){var a=document.forms.feedback;if(void 0!==a)for(var e of a.querySelectorAll("[type=submit]"))e.addEventListener("click",function(e){e.preventDefault();var t=document.location.pathname,e=this.getAttribute("data-md-value");n("event","feedback",{page:t,data:e}),a.firstElementChild.disabled=!0;e=a.querySelector(".md-feedback__note [data-md-value='"+e+"']");e&&(e.hidden=!1)}),a.hidden=!1}),location$.subscribe(function(e){n("config","G-SGJJFZS9BB",{page_path:e.pathname})})});var e=document.createElement("script");e.async=!0,e.src="https://www.googletagmanager.com/gtag/js?id=G-SGJJFZS9BB",document.getElementById("__analytics").insertAdjacentElement("afterEnd",e)}</script>
  
    <script>var consent;"undefined"==typeof __md_analytics||(consent=__md_get("__consent"))&&consent.analytics&&__md_analytics()</script>
  

    
    
    
   <link href="../../../assets/stylesheets/glightbox.min.css" rel="stylesheet"/><style>
    html.glightbox-open { overflow: initial; height: 100%; }
    .gslide-title { margin-top: 0px; user-select: text; }
    .gslide-desc { color: #666; user-select: text; }
    .gslide-image img { background: white; }
    .gscrollbar-fixer { padding-right: 15px; }
    .gdesc-inner { font-size: 0.75rem; }
    body[data-md-color-scheme="slate"] .gdesc-inner { background: var(--md-default-bg-color);}
    body[data-md-color-scheme="slate"] .gslide-title { color: var(--md-default-fg-color);}
    body[data-md-color-scheme="slate"] .gslide-desc { color: var(--md-default-fg-color);}</style> <script src="../../../assets/javascripts/glightbox.min.js"></script></head>
  
  
    <body dir="ltr">
  
    
    <input class="md-toggle" data-md-toggle="drawer" type="checkbox" id="__drawer" autocomplete="off">
    <input class="md-toggle" data-md-toggle="search" type="checkbox" id="__search" autocomplete="off">
    <label class="md-overlay" for="__drawer"></label>
    <div data-md-component="skip">
      
        
        <a href="#create-cross-chain-contracts" class="md-skip">
          Skip to content
        </a>
      
    </div>
    <div data-md-component="announce">
      
    </div>
    
    
      
  
    
  
  <header class="md-header md-header--shadow md-header--lifted" data-md-component="header">
    <nav class="md-header__inner md-grid" aria-label="Header">
      <label class="md-header__button md-icon" for="__drawer">
        
        <svg xmlns="http://www.w3.org/2000/svg" viewBox="0 0 24 24"><path d="M3 6h18v2H3V6m0 5h18v2H3v-2m0 5h18v2H3v-2Z"/></svg>
      </label>
      <div class="md-header__title" data-md-component="header-title">
        <div class="md-header__ellipsis">
          <a href="../../.." title="Wormhole Docs" class="md-header__button md-logo" aria-label="Wormhole Docs" data-md-component="logo">
            
  <img src="../../../assets/images/wormhole.webp" alt="logo">

          </a>
        </div>
      </div>
      <div class="md-header__buttons">
        
          
            <nav class="md-tabs" aria-label="Tabs" data-md-component="tabs">
    <div class="md-grid">
      <ul class="md-tabs__list">
        
          
        
          
            <li class="md-tabs__item--custom" tabindex="0">    
              <span class="md-tabs__link">Build <svg xmlns="http://www.w3.org/2000/svg" viewBox="0 0 24 24"><path d="M7.41 8.58 12 13.17l4.59-4.59L18 10l-6 6-6-6 1.41-1.42Z"/></svg></span>
              <ul class="md-tab__list">
                
                  
                
                  
                    <li class="md-tab__item">
                      <a href="../../../build/start-building/">
                        <div class="icon-col">
                          
                          <img class="dropdown-icon" src="/assets/images/dropdown-icons/start-building.svg" alt="Start Building" loading="lazy">
                        </div>
                        <div class="text-col">
                          <span class="dropdown-title">Start Building</span>
                        </div>
                      </a>
                    </li>
                  
                
                  
                    <li class="md-tab__item">
                      <a href="../../../build/applications/">
                        <div class="icon-col">
                          
                          <img class="dropdown-icon" src="/assets/images/dropdown-icons/applications.svg" alt="Build Frontend Applications" loading="lazy">
                        </div>
                        <div class="text-col">
                          <span class="dropdown-title">Build Frontend Applications</span>
                        </div>
                      </a>
                    </li>
                  
                
                  
                    <li class="md-tab__item">
                      <a href="../../../build/contract-integrations/">
                        <div class="icon-col">
                          
                          <img class="dropdown-icon" src="/assets/images/dropdown-icons/contract-integrations.svg" alt="Build Contract Integrations" loading="lazy">
                        </div>
                        <div class="text-col">
                          <span class="dropdown-title">Build Contract Integrations</span>
                        </div>
                      </a>
                    </li>
                  
                
                  
                    <li class="md-tab__item">
                      <a href="../../../build/toolkit/">
                        <div class="icon-col">
                          
                          <img class="dropdown-icon" src="/assets/images/dropdown-icons/toolkit.svg" alt="Toolkit" loading="lazy">
                        </div>
                        <div class="text-col">
                          <span class="dropdown-title">Toolkit</span>
                        </div>
                      </a>
                    </li>
                  
                
                  
                    <li class="md-tab__item">
                      <a href="../../../build/reference/">
                        <div class="icon-col">
                          
                          <img class="dropdown-icon" src="/assets/images/dropdown-icons/reference.svg" alt="Reference" loading="lazy">
                        </div>
                        <div class="text-col">
                          <span class="dropdown-title">Reference</span>
                        </div>
                      </a>
                    </li>
                  
                
              </ul>
            </li>
          
        
          
            <li class="md-tabs__item--custom" tabindex="0">    
              <span class="md-tabs__link">Infrastructure <svg xmlns="http://www.w3.org/2000/svg" viewBox="0 0 24 24"><path d="M7.41 8.58 12 13.17l4.59-4.59L18 10l-6 6-6-6 1.41-1.42Z"/></svg></span>
              <ul class="md-tab__list">
                
                  
                
                  
                    <li class="md-tab__item">
                      <a href="../../../infrastructure/relayers/">
                        <div class="icon-col">
                          
                          <img class="dropdown-icon" src="/assets/images/dropdown-icons/relayers.svg" alt="Relayers" loading="lazy">
                        </div>
                        <div class="text-col">
                          <span class="dropdown-title">Relayers</span>
                        </div>
                      </a>
                    </li>
                  
                
                  
                    <li class="md-tab__item">
                      <a href="../../../infrastructure/spy/">
                        <div class="icon-col">
                          
                          <img class="dropdown-icon" src="/assets/images/dropdown-icons/spy.svg" alt="Spy" loading="lazy">
                        </div>
                        <div class="text-col">
                          <span class="dropdown-title">Spy</span>
                        </div>
                      </a>
                    </li>
                  
                
              </ul>
            </li>
          
        
          
            <li class="md-tabs__item--custom" tabindex="0">    
              <span class="md-tabs__link">Tutorials <svg xmlns="http://www.w3.org/2000/svg" viewBox="0 0 24 24"><path d="M7.41 8.58 12 13.17l4.59-4.59L18 10l-6 6-6-6 1.41-1.42Z"/></svg></span>
              <ul class="md-tab__list">
                
                  
                
                  
                    <li class="md-tab__item">
                      <a href="../">
                        <div class="icon-col">
                          
                          <img class="dropdown-icon" src="/assets/images/dropdown-icons/messaging.svg" alt="Messaging" loading="lazy">
                        </div>
                        <div class="text-col">
                          <span class="dropdown-title">Messaging</span>
                        </div>
                      </a>
                    </li>
                  
                
              </ul>
            </li>
          
        
          
            <li class="md-tabs__item--custom" tabindex="0">    
              <span class="md-tabs__link">Learn <svg xmlns="http://www.w3.org/2000/svg" viewBox="0 0 24 24"><path d="M7.41 8.58 12 13.17l4.59-4.59L18 10l-6 6-6-6 1.41-1.42Z"/></svg></span>
              <ul class="md-tab__list">
                
                  
                
                  
                    <li class="md-tab__item">
                      <a href="../../../learn/fundamentals/">
                        <div class="icon-col">
                          
                          <img class="dropdown-icon" src="/assets/images/dropdown-icons/fundamentals.svg" alt="Fundamentals" loading="lazy">
                        </div>
                        <div class="text-col">
                          <span class="dropdown-title">Fundamentals</span>
                        </div>
                      </a>
                    </li>
                  
                
                  
                    <li class="md-tab__item">
                      <a href="../../../learn/infrastructure/">
                        <div class="icon-col">
                          
                          <img class="dropdown-icon" src="/assets/images/dropdown-icons/infrastructure.svg" alt="Infrastructure Components" loading="lazy">
                        </div>
                        <div class="text-col">
                          <span class="dropdown-title">Infrastructure Components</span>
                        </div>
                      </a>
                    </li>
                  
                
                  
                    <li class="md-tab__item">
                      <a href="../../../learn/messaging/">
                        <div class="icon-col">
                          
                          <img class="dropdown-icon" src="/assets/images/dropdown-icons/messaging.svg" alt="Messaging" loading="lazy">
                        </div>
                        <div class="text-col">
                          <span class="dropdown-title">Messaging</span>
                        </div>
                      </a>
                    </li>
                  
                
              </ul>
            </li>
          
        
      </ul>
    </div>
  </nav>
            
              <label class="search" for="__search">
                <span>
                  
                  <svg xmlns="http://www.w3.org/2000/svg" viewBox="0 0 24 24"><path d="M9.5 3A6.5 6.5 0 0 1 16 9.5c0 1.61-.59 3.09-1.56 4.23l.27.27h.79l5 5-1.5 1.5-5-5v-.79l-.27-.27A6.516 6.516 0 0 1 9.5 16 6.5 6.5 0 0 1 3 9.5 6.5 6.5 0 0 1 9.5 3m0 2C7 5 5 7 5 9.5S7 14 9.5 14 14 12 14 9.5 12 5 9.5 5Z"/></svg>
                  Search
                </span>
              </label>
              <div class="md-search" data-md-component="search" role="dialog">
  <label class="md-search__overlay" for="__search"></label>
  <div class="md-search__inner" role="search">
    <form class="md-search__form" name="search">
      <input
        type="text"
        class="md-search__input"
        name="query"
        aria-label="Search"
        autocapitalize="off"
        autocorrect="off"
        autocomplete="off"
        spellcheck="false"
        data-md-component="search-query"
        required
      />
      <label class="md-search__icon md-icon" for="__search">
        <svg xmlns="http://www.w3.org/2000/svg" viewBox="0 0 24 24"><path d="M9.5 3A6.5 6.5 0 0 1 16 9.5c0 1.61-.59 3.09-1.56 4.23l.27.27h.79l5 5-1.5 1.5-5-5v-.79l-.27-.27A6.516 6.516 0 0 1 9.5 16 6.5 6.5 0 0 1 3 9.5 6.5 6.5 0 0 1 9.5 3m0 2C7 5 5 7 5 9.5S7 14 9.5 14 14 12 14 9.5 12 5 9.5 5Z"/></svg> <svg xmlns="http://www.w3.org/2000/svg" viewBox="0 0 24 24"><path d="M20 11v2H8l5.5 5.5-1.42 1.42L4.16 12l7.92-7.92L13.5 5.5 8 11h12Z"/></svg>
      </label>
      <nav class="md-search__options" aria-label="Search">
        
        <button
          type="reset"
          class="md-search__icon md-icon"
          title="Clear"
          aria-label="Clear"
          tabindex="-1"
        >
          <svg xmlns="http://www.w3.org/2000/svg" viewBox="0 0 24 24"><path d="M19 6.41 17.59 5 12 10.59 6.41 5 5 6.41 10.59 12 5 17.59 6.41 19 12 13.41 17.59 19 19 17.59 13.41 12 19 6.41Z"/></svg>
        </button>
      </nav>
      
    </form>
    <div class="md-search__output">
      <div class="md-search__scrollwrap" data-md-scrollfix>
        <div class="md-search-result" data-md-component="search-result">
          <div class="md-search-result__meta">
            Initializing search
          </div>
          <ol class="md-search-result__list" role="presentation"></ol>
        </div>
      </div>
    </div>
  </div>
</div>
            
          
        
        
        

        
      </div>
    </nav>
  </header>
    
    <div class="md-container" data-md-component="container">
      
      
        
      
      <main class="md-main" data-md-component="main">
        <div class="md-main__inner md-grid">
          
            
              
              <div class="md-sidebar md-sidebar--primary" data-md-component="sidebar" data-md-type="navigation" >
                <div class="md-sidebar__scrollwrap">
                  <div class="md-sidebar__inner">
                    

  


<nav class="md-nav md-nav--primary md-nav--lifted" aria-label="Navigation" data-md-level="0">
  <label class="md-nav__title" for="__drawer">
    <a href="../../.." title="Wormhole Docs" class="md-nav__button md-logo" aria-label="Wormhole Docs" data-md-component="logo">
      
  <img src="../../../assets/images/wormhole.webp" alt="logo">

    </a>
  </label>
  
  <ul class="md-nav__list" data-md-scrollfix>
    
      
      
      
  
    
    
    
      <li class="md-nav__item">
        <a href="../../.." class="md-nav__link">
          Home
        </a>
      </li>
    
  
    
      
      
      
  
    
    
    
      
      <li class="md-nav__item md-nav__item--nested">
        
        
        
        
        <input class="md-nav__toggle md-toggle " type="checkbox" id="__nav_2" >
        
        
          
            
            
              
            
          
            
            
          
            
            
          
            
            
          
            
            
          
            
            
          
        
        
          
          
          <div class="md-nav__link md-nav__link--index ">
            <a href="../../../build/">Build</a>
            
              <label for="__nav_2">
                <span class="md-nav__icon md-icon"></span>
              </label>
            
          </div>
        
        <nav class="md-nav" data-md-level="1" aria-labelledby="__nav_2_label" aria-expanded="false">
          <label class="md-nav__title" for="__nav_2">
            <span class="md-nav__icon md-icon"></span>
            Build
          </label>
          <div class="nav-wrapper">
            
              
                <ul class="md-nav__list build-" data-md-scrollfix>
              
            
            
              
            
              
                
    
    
    
      
        
      
      <li class="md-nav__item md-nav__item--section md-nav__item--nested">
        
        
        
        
        <input class="md-nav__toggle md-toggle " type="checkbox" id="__nav_2_2" >
        
        
          
            
            
              
            
          
            
            
          
            
            
          
            
            
          
        
        
          
          
          <div class="md-nav__link md-nav__link--index ">
            <a href="../../../build/start-building/">Start Building</a>
            
              <label for="__nav_2_2">
                <span class="md-nav__icon md-icon"></span>
              </label>
            
          </div>
        
        <nav class="md-nav" data-md-level="2" aria-labelledby="__nav_2_2_label" aria-expanded="false">
          <label class="md-nav__title" for="__nav_2_2">
            <span class="md-nav__icon md-icon"></span>
            Start Building
          </label>
          <div class="nav-wrapper">
            
              
                <ul class="md-nav__list build-start-building-" data-md-scrollfix>
              
            
            
              
            
              
                
    
    
    
      
      <li class="md-nav__item md-nav__item--nested">
        
        
        
        
        <input class="md-nav__toggle md-toggle " type="checkbox" id="__nav_2_2_2" >
        
        
          
            
            
              
            
          
            
            
          
            
            
          
            
            
          
            
            
          
            
            
          
            
            
          
            
            
          
        
        
          
          
          <div class="md-nav__link md-nav__link--index ">
            <a href="../../../build/start-building/supported-networks/">Supported Networks</a>
            
              <label for="__nav_2_2_2">
                <span class="md-nav__icon md-icon"></span>
              </label>
            
          </div>
        
        <nav class="md-nav" data-md-level="3" aria-labelledby="__nav_2_2_2_label" aria-expanded="false">
          <label class="md-nav__title" for="__nav_2_2_2">
            <span class="md-nav__icon md-icon"></span>
            Supported Networks
          </label>
          <div class="nav-wrapper">
            
              
                <ul class="md-nav__list build-start-building-supported-networks-" data-md-scrollfix>
              
            
            
              
            
              
                
    
    
    
      <li class="md-nav__item">
        <a href="../../../build/start-building/supported-networks/evm/" class="md-nav__link">
          EVM
        </a>
      </li>
    
  
              
            
              
                
    
    
    
      <li class="md-nav__item">
        <a href="../../../build/start-building/supported-networks/algorand/" class="md-nav__link">
          Algorand
        </a>
      </li>
    
  
              
            
              
                
    
    
    
      <li class="md-nav__item">
        <a href="../../../build/start-building/supported-networks/aptos/" class="md-nav__link">
          Aptos
        </a>
      </li>
    
  
              
            
              
                
    
    
    
      
      <li class="md-nav__item md-nav__item--nested">
        
        
        
        
        <input class="md-nav__toggle md-toggle " type="checkbox" id="__nav_2_2_2_5" >
        
        
          
            
            
              
            
          
            
            
          
            
            
          
        
        
          
          
          <div class="md-nav__link md-nav__link--index ">
            <a href="../../../build/start-building/supported-networks/cosmos/">Cosmos</a>
            
              <label for="__nav_2_2_2_5">
                <span class="md-nav__icon md-icon"></span>
              </label>
            
          </div>
        
        <nav class="md-nav" data-md-level="4" aria-labelledby="__nav_2_2_2_5_label" aria-expanded="false">
          <label class="md-nav__title" for="__nav_2_2_2_5">
            <span class="md-nav__icon md-icon"></span>
            Cosmos
          </label>
          <div class="nav-wrapper">
            
              
                <ul class="md-nav__list build-start-building-supported-networks-cosmos-" data-md-scrollfix>
              
            
            
              
            
              
                
    
    
    
      <li class="md-nav__item">
        <a href="../../../build/start-building/supported-networks/cosmos/cosmos/" class="md-nav__link">
          Cosmos
        </a>
      </li>
    
  
              
            
              
                
    
    
    
      <li class="md-nav__item">
        <a href="../../../build/start-building/supported-networks/cosmos/gateway/" class="md-nav__link">
          Onboard to Cosmos Gateway
        </a>
      </li>
    
  
              
            
            </ul>
          </div>
        </nav>
      </li>
    
  
              
            
              
                
    
    
    
      <li class="md-nav__item">
        <a href="../../../build/start-building/supported-networks/near/" class="md-nav__link">
          NEAR
        </a>
      </li>
    
  
              
            
              
                
    
    
    
      <li class="md-nav__item">
        <a href="../../../build/start-building/supported-networks/solana/" class="md-nav__link">
          Solana
        </a>
      </li>
    
  
              
            
              
                
    
    
    
      <li class="md-nav__item">
        <a href="../../../build/start-building/supported-networks/sui/" class="md-nav__link">
          Sui
        </a>
      </li>
    
  
              
            
            </ul>
          </div>
        </nav>
      </li>
    
  
              
            
              
                
    
    
    
      <li class="md-nav__item">
        <a href="../../../build/start-building/testnet-faucets/" class="md-nav__link">
          TestNet Faucets
        </a>
      </li>
    
  
              
            
              
                
    
    
    
      <li class="md-nav__item">
        <a href="../../../build/start-building/demos/" class="md-nav__link">
          Demos
        </a>
      </li>
    
  
              
            
            </ul>
          </div>
        </nav>
      </li>
    
  
              
            
              
                
    
    
    
      
        
      
      <li class="md-nav__item md-nav__item--section md-nav__item--nested">
        
        
        
        
        <input class="md-nav__toggle md-toggle " type="checkbox" id="__nav_2_3" >
        
        
          
            
            
              
            
          
            
            
          
            
            
          
            
            
          
        
        
          
          
          <div class="md-nav__link md-nav__link--index ">
            <a href="../../../build/applications/">Build Frontend Applications</a>
            
              <label for="__nav_2_3">
                <span class="md-nav__icon md-icon"></span>
              </label>
            
          </div>
        
        <nav class="md-nav" data-md-level="2" aria-labelledby="__nav_2_3_label" aria-expanded="false">
          <label class="md-nav__title" for="__nav_2_3">
            <span class="md-nav__icon md-icon"></span>
            Build Frontend Applications
          </label>
          <div class="nav-wrapper">
            
              
                <ul class="md-nav__list build-applications-" data-md-scrollfix>
              
            
            
              
            
              
                
    
    
    
      <li class="md-nav__item">
        <a href="../../../build/applications/wormhole-sdk/" class="md-nav__link">
          Wormhole SDK
        </a>
      </li>
    
  
              
            
              
                
    
    
    
      
      <li class="md-nav__item md-nav__item--nested">
        
        
        
        
        <input class="md-nav__toggle md-toggle " type="checkbox" id="__nav_2_3_3" >
        
        
          
            
            
              
            
          
            
            
          
            
            
          
            
            
          
        
        
          
          
          <div class="md-nav__link md-nav__link--index ">
            <a href="../../../build/applications/queries/">Queries</a>
            
              <label for="__nav_2_3_3">
                <span class="md-nav__icon md-icon"></span>
              </label>
            
          </div>
        
        <nav class="md-nav" data-md-level="3" aria-labelledby="__nav_2_3_3_label" aria-expanded="false">
          <label class="md-nav__title" for="__nav_2_3_3">
            <span class="md-nav__icon md-icon"></span>
            Queries
          </label>
          <div class="nav-wrapper">
            
              
                <ul class="md-nav__list build-applications-queries-" data-md-scrollfix>
              
            
            
              
            
              
                
    
    
    
      <li class="md-nav__item">
        <a href="../../../build/applications/queries/overview/" class="md-nav__link">
          Overview
        </a>
      </li>
    
  
              
            
              
                
    
    
    
      <li class="md-nav__item">
        <a href="../../../build/applications/queries/use-queries/" class="md-nav__link">
          Use Queries
        </a>
      </li>
    
  
              
            
              
                
    
    
    
      <li class="md-nav__item">
        <a href="../../../build/applications/queries/faqs/" class="md-nav__link">
          FAQs
        </a>
      </li>
    
  
              
            
            </ul>
          </div>
        </nav>
      </li>
    
  
              
            
              
                
    
    
    
      
      <li class="md-nav__item md-nav__item--nested">
        
        
        
        
        <input class="md-nav__toggle md-toggle " type="checkbox" id="__nav_2_3_4" >
        
        
          
            
            
              
            
          
            
            
          
            
            
          
            
            
          
            
            
          
        
        
          
          
          <div class="md-nav__link md-nav__link--index ">
            <a href="../../../build/applications/connect/">Connect</a>
            
              <label for="__nav_2_3_4">
                <span class="md-nav__icon md-icon"></span>
              </label>
            
          </div>
        
        <nav class="md-nav" data-md-level="3" aria-labelledby="__nav_2_3_4_label" aria-expanded="false">
          <label class="md-nav__title" for="__nav_2_3_4">
            <span class="md-nav__icon md-icon"></span>
            Connect
          </label>
          <div class="nav-wrapper">
            
              
                <ul class="md-nav__list build-applications-connect-" data-md-scrollfix>
              
            
            
              
            
              
                
    
    
    
      <li class="md-nav__item">
        <a href="../../../build/applications/connect/overview/" class="md-nav__link">
          Overview
        </a>
      </li>
    
  
              
            
              
                
    
    
    
      <li class="md-nav__item">
        <a href="../../../build/applications/connect/routes/" class="md-nav__link">
          Routes
        </a>
      </li>
    
  
              
            
              
                
    
    
    
      <li class="md-nav__item">
        <a href="../../../build/applications/connect/features/" class="md-nav__link">
          Features
        </a>
      </li>
    
  
              
            
              
                
    
    
    
      <li class="md-nav__item">
        <a href="../../../build/applications/connect/configuration/" class="md-nav__link">
          Configuration
        </a>
      </li>
    
  
              
            
            </ul>
          </div>
        </nav>
      </li>
    
  
              
            
            </ul>
          </div>
        </nav>
      </li>
    
  
              
            
              
                
    
    
    
      
        
      
      <li class="md-nav__item md-nav__item--section md-nav__item--nested">
        
        
        
        
        <input class="md-nav__toggle md-toggle " type="checkbox" id="__nav_2_4" >
        
        
          
            
            
              
            
          
            
            
          
            
            
          
            
            
          
            
            
          
            
            
          
            
            
          
            
            
          
        
        
          
          
          <div class="md-nav__link md-nav__link--index ">
            <a href="../../../build/contract-integrations/">Build Contract Integrations</a>
            
              <label for="__nav_2_4">
                <span class="md-nav__icon md-icon"></span>
              </label>
            
          </div>
        
        <nav class="md-nav" data-md-level="2" aria-labelledby="__nav_2_4_label" aria-expanded="false">
          <label class="md-nav__title" for="__nav_2_4">
            <span class="md-nav__icon md-icon"></span>
            Build Contract Integrations
          </label>
          <div class="nav-wrapper">
            
              
                <ul class="md-nav__list build-contract-integrations-" data-md-scrollfix>
              
            
            
              
            
              
                
    
    
    
      <li class="md-nav__item">
        <a href="../../../build/contract-integrations/wormhole-relayers/" class="md-nav__link">
          Wormhole Relayer
        </a>
      </li>
    
  
              
            
              
                
    
    
    
      <li class="md-nav__item">
        <a href="../../../build/contract-integrations/core-contracts/" class="md-nav__link">
          Core Contracts
        </a>
      </li>
    
  
              
            
              
                
    
    
    
      <li class="md-nav__item">
        <a href="../../../build/contract-integrations/cctp/" class="md-nav__link">
          CCTP
        </a>
      </li>
    
  
              
            
              
                
    
    
    
      <li class="md-nav__item">
        <a href="../../../build/contract-integrations/gateway/" class="md-nav__link">
          Cosmos Gateway
        </a>
      </li>
    
  
              
            
              
                
    
    
    
      
      <li class="md-nav__item md-nav__item--nested">
        
        
        
        
        <input class="md-nav__toggle md-toggle " type="checkbox" id="__nav_2_4_6" >
        
        
          
            
            
              
            
          
            
            
          
            
            
          
        
        
          
          
          <div class="md-nav__link md-nav__link--index ">
            <a href="../../../build/contract-integrations/native-token-transfers/">Native Token Transfers</a>
            
              <label for="__nav_2_4_6">
                <span class="md-nav__icon md-icon"></span>
              </label>
            
          </div>
        
        <nav class="md-nav" data-md-level="3" aria-labelledby="__nav_2_4_6_label" aria-expanded="false">
          <label class="md-nav__title" for="__nav_2_4_6">
            <span class="md-nav__icon md-icon"></span>
            Native Token Transfers
          </label>
          <div class="nav-wrapper">
            
              
                <ul class="md-nav__list build-contract-integrations-native-token-transfers-" data-md-scrollfix>
              
            
            
              
            
              
                
    
    
    
      
      <li class="md-nav__item md-nav__item--nested">
        
        
        
        
        <input class="md-nav__toggle md-toggle " type="checkbox" id="__nav_2_4_6_2" >
        
        
          
            
            
              
            
          
            
            
          
            
            
          
            
            
          
            
            
          
        
        
          
          
          <div class="md-nav__link md-nav__link--index ">
            <a href="../../../build/contract-integrations/native-token-transfers/deployment-process/">Deployment Process</a>
            
              <label for="__nav_2_4_6_2">
                <span class="md-nav__icon md-icon"></span>
              </label>
            
          </div>
        
        <nav class="md-nav" data-md-level="4" aria-labelledby="__nav_2_4_6_2_label" aria-expanded="false">
          <label class="md-nav__title" for="__nav_2_4_6_2">
            <span class="md-nav__icon md-icon"></span>
            Deployment Process
          </label>
          <div class="nav-wrapper">
            
              
                <ul class="md-nav__list build-contract-integrations-native-token-transfers-deployment-process-" data-md-scrollfix>
              
            
            
              
            
              
                
    
    
    
      <li class="md-nav__item">
        <a href="../../../build/contract-integrations/native-token-transfers/deployment-process/installation/" class="md-nav__link">
          Installation
        </a>
      </li>
    
  
              
            
              
                
    
    
    
      <li class="md-nav__item">
        <a href="../../../build/contract-integrations/native-token-transfers/deployment-process/deploy-to-evm/" class="md-nav__link">
          Deploy to EVM
        </a>
      </li>
    
  
              
            
              
                
    
    
    
      <li class="md-nav__item">
        <a href="../../../build/contract-integrations/native-token-transfers/deployment-process/deploy-to-solana/" class="md-nav__link">
          Deploy to Solana
        </a>
      </li>
    
  
              
            
              
                
    
    
    
      <li class="md-nav__item">
        <a href="../../../build/contract-integrations/native-token-transfers/deployment-process/post-deployment/" class="md-nav__link">
          Post Deployment
        </a>
      </li>
    
  
              
            
            </ul>
          </div>
        </nav>
      </li>
    
  
              
            
              
                
    
    
    
      
      <li class="md-nav__item md-nav__item--nested">
        
        
        
        
        <input class="md-nav__toggle md-toggle " type="checkbox" id="__nav_2_4_6_3" >
        
        
          
            
            
              
            
          
            
            
          
            
            
          
        
        
          
          
          <div class="md-nav__link md-nav__link--index ">
            <a href="../../../build/contract-integrations/native-token-transfers/configuration/">NTT Configuration</a>
            
              <label for="__nav_2_4_6_3">
                <span class="md-nav__icon md-icon"></span>
              </label>
            
          </div>
        
        <nav class="md-nav" data-md-level="4" aria-labelledby="__nav_2_4_6_3_label" aria-expanded="false">
          <label class="md-nav__title" for="__nav_2_4_6_3">
            <span class="md-nav__icon md-icon"></span>
            NTT Configuration
          </label>
          <div class="nav-wrapper">
            
              
                <ul class="md-nav__list build-contract-integrations-native-token-transfers-configuration-" data-md-scrollfix>
              
            
            
              
            
              
                
    
    
    
      <li class="md-nav__item">
        <a href="../../../build/contract-integrations/native-token-transfers/configuration/rate-limiting/" class="md-nav__link">
          Rate Limiting
        </a>
      </li>
    
  
              
            
              
                
    
    
    
      <li class="md-nav__item">
        <a href="../../../build/contract-integrations/native-token-transfers/configuration/access-control/" class="md-nav__link">
          Access Control
        </a>
      </li>
    
  
              
            
            </ul>
          </div>
        </nav>
      </li>
    
  
              
            
            </ul>
          </div>
        </nav>
      </li>
    
  
              
            
              
                
    
    
    
      
      <li class="md-nav__item md-nav__item--nested">
        
        
        
        
        <input class="md-nav__toggle md-toggle " type="checkbox" id="__nav_2_4_7" >
        
        
          
            
            
              
            
          
            
            
          
            
            
          
        
        
          
          
          <div class="md-nav__link md-nav__link--index ">
            <a href="../../../build/contract-integrations/fast-transfers/">Fast Transfers</a>
            
              <label for="__nav_2_4_7">
                <span class="md-nav__icon md-icon"></span>
              </label>
            
          </div>
        
        <nav class="md-nav" data-md-level="3" aria-labelledby="__nav_2_4_7_label" aria-expanded="false">
          <label class="md-nav__title" for="__nav_2_4_7">
            <span class="md-nav__icon md-icon"></span>
            Fast Transfers
          </label>
          <div class="nav-wrapper">
            
              
                <ul class="md-nav__list build-contract-integrations-fast-transfers-" data-md-scrollfix>
              
            
            
              
            
              
                
    
    
    
      <li class="md-nav__item">
        <a href="../../../build/contract-integrations/fast-transfers/how-to-solver/" class="md-nav__link">
          How to Be a Solver
        </a>
      </li>
    
  
              
            
              
                
    
    
    
      <li class="md-nav__item">
        <a href="../../../build/contract-integrations/fast-transfers/smart-components/" class="md-nav__link">
          Smart Contract Components
        </a>
      </li>
    
  
              
            
            </ul>
          </div>
        </nav>
      </li>
    
  
              
            
              
                
    
    
    
      <li class="md-nav__item">
        <a href="../../../build/contract-integrations/dev-env/" class="md-nav__link">
          Development Environment
        </a>
      </li>
    
  
              
            
            </ul>
          </div>
        </nav>
      </li>
    
  
              
            
              
                
    
    
    
      
        
      
      <li class="md-nav__item md-nav__item--section md-nav__item--nested">
        
        
        
        
        <input class="md-nav__toggle md-toggle " type="checkbox" id="__nav_2_5" >
        
        
          
            
            
              
            
          
            
            
          
            
            
          
            
            
          
            
            
          
        
        
          
          
          <div class="md-nav__link md-nav__link--index ">
            <a href="../../../build/toolkit/">Toolkit</a>
            
              <label for="__nav_2_5">
                <span class="md-nav__icon md-icon"></span>
              </label>
            
          </div>
        
        <nav class="md-nav" data-md-level="2" aria-labelledby="__nav_2_5_label" aria-expanded="false">
          <label class="md-nav__title" for="__nav_2_5">
            <span class="md-nav__icon md-icon"></span>
            Toolkit
          </label>
          <div class="nav-wrapper">
            
              
                <ul class="md-nav__list build-toolkit-" data-md-scrollfix>
              
            
            
              
            
              
                
    
    
    
      <li class="md-nav__item">
        <a href="https://wormholescan.io/" class="md-nav__link">
          Wormholescan
        </a>
      </li>
    
  
              
            
              
                
    
    
    
      <li class="md-nav__item">
        <a href="../../../build/toolkit/cli/" class="md-nav__link">
          Wormhole CLI
        </a>
      </li>
    
  
              
            
              
                
    
    
    
      <li class="md-nav__item">
        <a href="/build/applications/wormhole-sdk/" class="md-nav__link">
          Wormhole SDK
        </a>
      </li>
    
  
              
            
              
                
    
    
    
      <li class="md-nav__item">
        <a href="../../../build/toolkit/tilt/" class="md-nav__link">
          Tilt
        </a>
      </li>
    
  
              
            
            </ul>
          </div>
        </nav>
      </li>
    
  
              
            
              
                
    
    
    
      
        
      
      <li class="md-nav__item md-nav__item--section md-nav__item--nested">
        
        
        
        
        <input class="md-nav__toggle md-toggle " type="checkbox" id="__nav_2_6" >
        
        
          
            
            
              
            
          
            
            
          
            
            
          
            
            
          
        
        
          
          
          <div class="md-nav__link md-nav__link--index ">
            <a href="../../../build/reference/">Reference</a>
            
              <label for="__nav_2_6">
                <span class="md-nav__icon md-icon"></span>
              </label>
            
          </div>
        
        <nav class="md-nav" data-md-level="2" aria-labelledby="__nav_2_6_label" aria-expanded="false">
          <label class="md-nav__title" for="__nav_2_6">
            <span class="md-nav__icon md-icon"></span>
            Reference
          </label>
          <div class="nav-wrapper">
            
              
                <ul class="md-nav__list build-reference-" data-md-scrollfix>
              
            
            
              
            
              
                
    
    
    
      <li class="md-nav__item">
        <a href="../../../build/reference/chain-ids/" class="md-nav__link">
          Chain IDs
        </a>
      </li>
    
  
              
            
              
                
    
    
    
      <li class="md-nav__item">
        <a href="../../../build/reference/contract-addresses/" class="md-nav__link">
          Contract Addresses
        </a>
      </li>
    
  
              
            
              
                
    
    
    
      <li class="md-nav__item">
        <a href="../../../build/reference/consistency-levels/" class="md-nav__link">
          Consistency Levels
        </a>
      </li>
    
  
              
            
            </ul>
          </div>
        </nav>
      </li>
    
  
              
            
            </ul>
          </div>
        </nav>
      </li>
    
  
    
      
      
      
  
    
    
    
      
      <li class="md-nav__item md-nav__item--nested">
        
        
        
        
        <input class="md-nav__toggle md-toggle " type="checkbox" id="__nav_3" >
        
        
          
            
            
              
            
          
            
            
          
            
            
          
        
        
          
          
          <div class="md-nav__link md-nav__link--index ">
            <a href="../../../infrastructure/">Infrastructure</a>
            
              <label for="__nav_3">
                <span class="md-nav__icon md-icon"></span>
              </label>
            
          </div>
        
        <nav class="md-nav" data-md-level="1" aria-labelledby="__nav_3_label" aria-expanded="false">
          <label class="md-nav__title" for="__nav_3">
            <span class="md-nav__icon md-icon"></span>
            Infrastructure
          </label>
          <div class="nav-wrapper">
            
              
                <ul class="md-nav__list infrastructure-" data-md-scrollfix>
              
            
            
              
            
              
                
    
    
    
      
        
      
      <li class="md-nav__item md-nav__item--section md-nav__item--nested">
        
        
        
        
        <input class="md-nav__toggle md-toggle " type="checkbox" id="__nav_3_2" >
        
        
          
            
            
              
            
          
            
            
          
        
        
          
          
          <div class="md-nav__link md-nav__link--index ">
            <a href="../../../infrastructure/relayers/">Relayers</a>
            
              <label for="__nav_3_2">
                <span class="md-nav__icon md-icon"></span>
              </label>
            
          </div>
        
        <nav class="md-nav" data-md-level="2" aria-labelledby="__nav_3_2_label" aria-expanded="false">
          <label class="md-nav__title" for="__nav_3_2">
            <span class="md-nav__icon md-icon"></span>
            Relayers
          </label>
          <div class="nav-wrapper">
            
              
                <ul class="md-nav__list infrastructure-relayers-" data-md-scrollfix>
              
            
            
              
            
              
                
    
    
    
      <li class="md-nav__item">
        <a href="../../../infrastructure/relayers/run-relayer/" class="md-nav__link">
          Run a Custom Relayer
        </a>
      </li>
    
  
              
            
            </ul>
          </div>
        </nav>
      </li>
    
  
              
            
              
                
    
    
    
      
        
      
      <li class="md-nav__item md-nav__item--section md-nav__item--nested">
        
        
        
        
        <input class="md-nav__toggle md-toggle " type="checkbox" id="__nav_3_3" >
        
        
          
            
            
              
            
          
            
            
          
        
        
          
          
          <div class="md-nav__link md-nav__link--index ">
            <a href="../../../infrastructure/spy/">Spy</a>
            
              <label for="__nav_3_3">
                <span class="md-nav__icon md-icon"></span>
              </label>
            
          </div>
        
        <nav class="md-nav" data-md-level="2" aria-labelledby="__nav_3_3_label" aria-expanded="false">
          <label class="md-nav__title" for="__nav_3_3">
            <span class="md-nav__icon md-icon"></span>
            Spy
          </label>
          <div class="nav-wrapper">
            
              
                <ul class="md-nav__list infrastructure-spy-" data-md-scrollfix>
              
            
            
              
            
              
                
    
    
    
      <li class="md-nav__item">
        <a href="../../../infrastructure/spy/run-spy/" class="md-nav__link">
          Run a Spy
        </a>
      </li>
    
  
              
            
            </ul>
          </div>
        </nav>
      </li>
    
  
              
            
            </ul>
          </div>
        </nav>
      </li>
    
  
    
      
      
      
  
    
    
      
    
    
      
      <li class="md-nav__item md-nav__item--active md-nav__item--nested">
        
        
        
        
        <input class="md-nav__toggle md-toggle " type="checkbox" id="__nav_4" checked>
        
        
          
            
            
              
            
          
            
            
          
        
        
          
          
          <div class="md-nav__link md-nav__link--index ">
            <a href="../../">Tutorials</a>
            
              <label for="__nav_4">
                <span class="md-nav__icon md-icon"></span>
              </label>
            
          </div>
        
        <nav class="md-nav" data-md-level="1" aria-labelledby="__nav_4_label" aria-expanded="true">
          <label class="md-nav__title" for="__nav_4">
            <span class="md-nav__icon md-icon"></span>
            Tutorials
          </label>
          <div class="nav-wrapper">
            
              
                <ul class="md-nav__list tutorials-" data-md-scrollfix>
              
            
            
              
            
              
                
    
    
      
    
    
      
        
      
      <li class="md-nav__item md-nav__item--active md-nav__item--section md-nav__item--nested">
        
        
        
        
        <input class="md-nav__toggle md-toggle " type="checkbox" id="__nav_4_2" checked>
        
        
          
            
            
              
            
          
            
            
          
            
            
          
        
        
          
          
          <div class="md-nav__link md-nav__link--index ">
            <a href="../">Messaging</a>
            
              <label for="__nav_4_2">
                <span class="md-nav__icon md-icon"></span>
              </label>
            
          </div>
        
        <nav class="md-nav" data-md-level="2" aria-labelledby="__nav_4_2_label" aria-expanded="true">
          <label class="md-nav__title" for="__nav_4_2">
            <span class="md-nav__icon md-icon"></span>
            Messaging
          </label>
          <div class="nav-wrapper">
            
              
                <ul class="md-nav__list tutorials-messaging-" data-md-scrollfix>
              
            
            
              
            
              
                
    
    
      
    
    
      <li class="md-nav__item md-nav__item--active">
        
        <input class="md-nav__toggle md-toggle" type="checkbox" id="__toc">
        
        
          
        
        
          <label class="md-nav__link md-nav__link--active" for="__toc">
            Create Cross-Chain Contracts
            <span class="md-nav__icon md-icon"></span>
          </label>
        
        <div class="md-nav__link-wrapper md-nav__item md-nav__item--active">
          <a href="./" class="md-nav__link md-nav__link--active">
            Create Cross-Chain Contracts
          </a>
        </div>
        
          

  

<nav class="md-nav md-nav--secondary" aria-label="Sections">
  
  
  
    
  
  
    <label class="md-nav__title" for="__toc">
      <span class="md-nav__icon md-icon"></span>
      Sections
    </label>
    <ul class="md-nav__list" data-md-component="toc" data-md-scrollfix>
      
        <li class="md-nav__item">
  <a href="#introduction" class="md-nav__link">
    <span class="md-ellipsis">
      Introduction
    </span>
  </a>
  
</li>
      
        <li class="md-nav__item">
  <a href="#wormhole-overview" class="md-nav__link">
    <span class="md-ellipsis">
      Wormhole Overview
    </span>
  </a>
  
</li>
      
        <li class="md-nav__item">
  <a href="#prerequisites" class="md-nav__link">
    <span class="md-ellipsis">
      Prerequisites
    </span>
  </a>
  
</li>
      
        <li class="md-nav__item">
  <a href="#build-cross-chain-messaging-contracts" class="md-nav__link">
    <span class="md-ellipsis">
      Build Cross-Chain Messaging Contracts
    </span>
  </a>
  
    <nav class="md-nav" aria-label="Build Cross-Chain Messaging Contracts">
      <ul class="md-nav__list">
        
          <li class="md-nav__item">
  <a href="#sender-contract-messagesender" class="md-nav__link">
    <span class="md-ellipsis">
      Sender Contract: MessageSender
    </span>
  </a>
  
</li>
        
          <li class="md-nav__item">
  <a href="#receiver-contract-messagereceiver" class="md-nav__link">
    <span class="md-ellipsis">
      Receiver Contract: MessageReceiver
    </span>
  </a>
  
    <nav class="md-nav" aria-label="Receiver Contract: MessageReceiver">
      <ul class="md-nav__list">
        
          <li class="md-nav__item">
  <a href="#emitter-validation-and-registration" class="md-nav__link">
    <span class="md-ellipsis">
      Emitter Validation and Registration
    </span>
  </a>
  
</li>
        
          <li class="md-nav__item">
  <a href="#message-processing" class="md-nav__link">
    <span class="md-ellipsis">
      Message Processing
    </span>
  </a>
  
</li>
        
      </ul>
    </nav>
  
</li>
        
      </ul>
    </nav>
  
</li>
      
        <li class="md-nav__item">
  <a href="#deploy-contracts" class="md-nav__link">
    <span class="md-ellipsis">
      Deploy Contracts
    </span>
  </a>
  
    <nav class="md-nav" aria-label="Deploy Contracts">
      <ul class="md-nav__list">
        
          <li class="md-nav__item">
  <a href="#deployment-tools" class="md-nav__link">
    <span class="md-ellipsis">
      Deployment Tools
    </span>
  </a>
  
</li>
        
          <li class="md-nav__item">
  <a href="#repository-setup" class="md-nav__link">
    <span class="md-ellipsis">
      Repository Setup
    </span>
  </a>
  
</li>
        
          <li class="md-nav__item">
  <a href="#important-setup-steps" class="md-nav__link">
    <span class="md-ellipsis">
      Important Setup Steps
    </span>
  </a>
  
</li>
        
          <li class="md-nav__item">
  <a href="#deployment-process" class="md-nav__link">
    <span class="md-ellipsis">
      Deployment Process
    </span>
  </a>
  
</li>
        
          <li class="md-nav__item">
  <a href="#deploy-the-sender-contract" class="md-nav__link">
    <span class="md-ellipsis">
      Deploy the Sender Contract
    </span>
  </a>
  
</li>
        
          <li class="md-nav__item">
  <a href="#deploy-the-receiver-contract" class="md-nav__link">
    <span class="md-ellipsis">
      Deploy the Receiver Contract
    </span>
  </a>
  
</li>
        
      </ul>
    </nav>
  
</li>
      
        <li class="md-nav__item">
  <a href="#send-a-cross-chain-message" class="md-nav__link">
    <span class="md-ellipsis">
      Send a Cross-Chain Message
    </span>
  </a>
  
</li>
      
        <li class="md-nav__item">
  <a href="#conclusion" class="md-nav__link">
    <span class="md-ellipsis">
      Conclusion
    </span>
  </a>
  
</li>
      
    </ul>
  
</nav>
        
      </li>
    
  
              
            
              
                
    
    
    
      <li class="md-nav__item">
        <a href="../cross-chain-token-contracts/" class="md-nav__link">
          Create Cross-Chain Token Transfers
        </a>
      </li>
    
  
              
            
            </ul>
          </div>
        </nav>
      </li>
    
  
              
            
            </ul>
          </div>
        </nav>
      </li>
    
  
    
      
      
      
  
    
    
    
      
      <li class="md-nav__item md-nav__item--nested">
        
        
        
        
        <input class="md-nav__toggle md-toggle " type="checkbox" id="__nav_5" >
        
        
          
            
            
              
            
          
            
            
          
            
            
          
            
            
          
        
        
          
          
          <div class="md-nav__link md-nav__link--index ">
            <a href="../../../learn/">Learn</a>
            
              <label for="__nav_5">
                <span class="md-nav__icon md-icon"></span>
              </label>
            
          </div>
        
        <nav class="md-nav" data-md-level="1" aria-labelledby="__nav_5_label" aria-expanded="false">
          <label class="md-nav__title" for="__nav_5">
            <span class="md-nav__icon md-icon"></span>
            Learn
          </label>
          <div class="nav-wrapper">
            
              
                <ul class="md-nav__list learn-" data-md-scrollfix>
              
            
            
              
            
              
                
    
    
    
      
        
      
      <li class="md-nav__item md-nav__item--section md-nav__item--nested">
        
        
        
        
        <input class="md-nav__toggle md-toggle " type="checkbox" id="__nav_5_2" >
        
        
          
            
            
              
            
          
            
            
          
            
            
          
            
            
          
            
            
          
        
        
          
          
          <div class="md-nav__link md-nav__link--index ">
            <a href="../../../learn/fundamentals/">Fundamentals</a>
            
              <label for="__nav_5_2">
                <span class="md-nav__icon md-icon"></span>
              </label>
            
          </div>
        
        <nav class="md-nav" data-md-level="2" aria-labelledby="__nav_5_2_label" aria-expanded="false">
          <label class="md-nav__title" for="__nav_5_2">
            <span class="md-nav__icon md-icon"></span>
            Fundamentals
          </label>
          <div class="nav-wrapper">
            
              
                <ul class="md-nav__list learn-fundamentals-" data-md-scrollfix>
              
            
            
              
            
              
                
    
    
    
      <li class="md-nav__item">
        <a href="../../../learn/fundamentals/introduction/" class="md-nav__link">
          Introduction to Wormhole
        </a>
      </li>
    
  
              
            
              
                
    
    
    
      <li class="md-nav__item">
        <a href="../../../learn/fundamentals/security/" class="md-nav__link">
          Security
        </a>
      </li>
    
  
              
            
              
                
    
    
    
      <li class="md-nav__item">
        <a href="../../../learn/fundamentals/architecture/" class="md-nav__link">
          Architecture Overview
        </a>
      </li>
    
  
              
            
              
                
    
    
    
      <li class="md-nav__item">
        <a href="../../../learn/fundamentals/glossary/" class="md-nav__link">
          Glossary
        </a>
      </li>
    
  
              
            
            </ul>
          </div>
        </nav>
      </li>
    
  
              
            
              
                
    
    
    
      
        
      
      <li class="md-nav__item md-nav__item--section md-nav__item--nested">
        
        
        
        
        <input class="md-nav__toggle md-toggle " type="checkbox" id="__nav_5_3" >
        
        
          
            
            
              
            
          
            
            
          
            
            
          
            
            
          
            
            
          
            
            
          
        
        
          
          
          <div class="md-nav__link md-nav__link--index ">
            <a href="../../../learn/infrastructure/">Infrastructure Components</a>
            
              <label for="__nav_5_3">
                <span class="md-nav__icon md-icon"></span>
              </label>
            
          </div>
        
        <nav class="md-nav" data-md-level="2" aria-labelledby="__nav_5_3_label" aria-expanded="false">
          <label class="md-nav__title" for="__nav_5_3">
            <span class="md-nav__icon md-icon"></span>
            Infrastructure Components
          </label>
          <div class="nav-wrapper">
            
              
                <ul class="md-nav__list learn-infrastructure-" data-md-scrollfix>
              
            
            
              
            
              
                
    
    
    
      <li class="md-nav__item">
        <a href="../../../learn/infrastructure/core-contracts/" class="md-nav__link">
          Core Contracts
        </a>
      </li>
    
  
              
            
              
                
    
    
    
      <li class="md-nav__item">
        <a href="../../../learn/infrastructure/vaas/" class="md-nav__link">
          VAAs
        </a>
      </li>
    
  
              
            
              
                
    
    
    
      <li class="md-nav__item">
        <a href="../../../learn/infrastructure/guardians/" class="md-nav__link">
          Guardians
        </a>
      </li>
    
  
              
            
              
                
    
    
    
      <li class="md-nav__item">
        <a href="../../../learn/infrastructure/spy/" class="md-nav__link">
          Spy
        </a>
      </li>
    
  
              
            
              
                
    
    
    
      <li class="md-nav__item">
        <a href="../../../learn/infrastructure/relayer/" class="md-nav__link">
          Relayers
        </a>
      </li>
    
  
              
            
            </ul>
          </div>
        </nav>
      </li>
    
  
              
            
              
                
    
    
    
      
        
      
      <li class="md-nav__item md-nav__item--section md-nav__item--nested">
        
        
        
        
        <input class="md-nav__toggle md-toggle " type="checkbox" id="__nav_5_4" >
        
        
          
            
            
              
            
          
            
            
          
            
            
          
            
            
          
            
            
          
            
            
          
        
        
          
          
          <div class="md-nav__link md-nav__link--index ">
            <a href="../../../learn/messaging/">Messaging</a>
            
              <label for="__nav_5_4">
                <span class="md-nav__icon md-icon"></span>
              </label>
            
          </div>
        
        <nav class="md-nav" data-md-level="2" aria-labelledby="__nav_5_4_label" aria-expanded="false">
          <label class="md-nav__title" for="__nav_5_4">
            <span class="md-nav__icon md-icon"></span>
            Messaging
          </label>
          <div class="nav-wrapper">
            
              
                <ul class="md-nav__list learn-messaging-" data-md-scrollfix>
              
            
            
              
            
              
                
    
    
    
      <li class="md-nav__item">
        <a href="../../../learn/messaging/token-nft-bridge/" class="md-nav__link">
          Token Bridge
        </a>
      </li>
    
  
              
            
              
                
    
    
    
      <li class="md-nav__item">
        <a href="../../../learn/messaging/gateway/" class="md-nav__link">
          Cosmos Gateway
        </a>
      </li>
    
  
              
            
              
                
    
    
    
      <li class="md-nav__item">
        <a href="../../../learn/messaging/cctp/" class="md-nav__link">
          CCTP Bridge
        </a>
      </li>
    
  
              
            
              
                
    
    
    
      
      <li class="md-nav__item md-nav__item--nested">
        
        
        
        
        <input class="md-nav__toggle md-toggle " type="checkbox" id="__nav_5_4_5" >
        
        
          
            
            
              
            
          
            
            
          
            
            
          
            
            
          
            
            
          
        
        
          
          
          <div class="md-nav__link md-nav__link--index ">
            <a href="../../../learn/messaging/native-token-transfers/">Native Token Transfers</a>
            
              <label for="__nav_5_4_5">
                <span class="md-nav__icon md-icon"></span>
              </label>
            
          </div>
        
        <nav class="md-nav" data-md-level="3" aria-labelledby="__nav_5_4_5_label" aria-expanded="false">
          <label class="md-nav__title" for="__nav_5_4_5">
            <span class="md-nav__icon md-icon"></span>
            Native Token Transfers
          </label>
          <div class="nav-wrapper">
            
              
                <ul class="md-nav__list learn-messaging-native-token-transfers-" data-md-scrollfix>
              
            
            
              
            
              
                
    
    
    
      <li class="md-nav__item">
        <a href="../../../learn/messaging/native-token-transfers/overview/" class="md-nav__link">
          Overview
        </a>
      </li>
    
  
              
            
              
                
    
    
    
      <li class="md-nav__item">
        <a href="../../../learn/messaging/native-token-transfers/architecture/" class="md-nav__link">
          Architecture
        </a>
      </li>
    
  
              
            
              
                
    
    
    
      <li class="md-nav__item">
        <a href="../../../learn/messaging/native-token-transfers/deployment/" class="md-nav__link">
          Deployment Models
        </a>
      </li>
    
  
              
            
              
                
    
    
    
      <li class="md-nav__item">
        <a href="../../../learn/messaging/native-token-transfers/security/" class="md-nav__link">
          Security
        </a>
      </li>
    
  
              
            
            </ul>
          </div>
        </nav>
      </li>
    
  
              
            
              
                
    
    
    
      <li class="md-nav__item">
        <a href="../../../learn/messaging/fast-transfers/" class="md-nav__link">
          Fast Transfers
        </a>
      </li>
    
  
              
            
            </ul>
          </div>
        </nav>
      </li>
    
  
              
            
            </ul>
          </div>
        </nav>
      </li>
    
  
    
  </ul>
</nav>
                  </div>
                </div>
              </div>
            
            
              
              <div class="md-sidebar md-sidebar--secondary" data-md-component="sidebar" data-md-type="toc" >
                <div class="md-sidebar__scrollwrap">
                  <div class="md-sidebar__inner">
                    

  

<nav class="md-nav md-nav--secondary" aria-label="Sections">
  
  
  
    
  
  
    <label class="md-nav__title" for="__toc">
      <span class="md-nav__icon md-icon"></span>
      Sections
    </label>
    <ul class="md-nav__list" data-md-component="toc" data-md-scrollfix>
      
        <li class="md-nav__item">
  <a href="#introduction" class="md-nav__link">
    <span class="md-ellipsis">
      Introduction
    </span>
  </a>
  
</li>
      
        <li class="md-nav__item">
  <a href="#wormhole-overview" class="md-nav__link">
    <span class="md-ellipsis">
      Wormhole Overview
    </span>
  </a>
  
</li>
      
        <li class="md-nav__item">
  <a href="#prerequisites" class="md-nav__link">
    <span class="md-ellipsis">
      Prerequisites
    </span>
  </a>
  
</li>
      
        <li class="md-nav__item">
  <a href="#build-cross-chain-messaging-contracts" class="md-nav__link">
    <span class="md-ellipsis">
      Build Cross-Chain Messaging Contracts
    </span>
  </a>
  
    <nav class="md-nav" aria-label="Build Cross-Chain Messaging Contracts">
      <ul class="md-nav__list">
        
          <li class="md-nav__item">
  <a href="#sender-contract-messagesender" class="md-nav__link">
    <span class="md-ellipsis">
      Sender Contract: MessageSender
    </span>
  </a>
  
</li>
        
          <li class="md-nav__item">
  <a href="#receiver-contract-messagereceiver" class="md-nav__link">
    <span class="md-ellipsis">
      Receiver Contract: MessageReceiver
    </span>
  </a>
  
    <nav class="md-nav" aria-label="Receiver Contract: MessageReceiver">
      <ul class="md-nav__list">
        
          <li class="md-nav__item">
  <a href="#emitter-validation-and-registration" class="md-nav__link">
    <span class="md-ellipsis">
      Emitter Validation and Registration
    </span>
  </a>
  
</li>
        
          <li class="md-nav__item">
  <a href="#message-processing" class="md-nav__link">
    <span class="md-ellipsis">
      Message Processing
    </span>
  </a>
  
</li>
        
      </ul>
    </nav>
  
</li>
        
      </ul>
    </nav>
  
</li>
      
        <li class="md-nav__item">
  <a href="#deploy-contracts" class="md-nav__link">
    <span class="md-ellipsis">
      Deploy Contracts
    </span>
  </a>
  
    <nav class="md-nav" aria-label="Deploy Contracts">
      <ul class="md-nav__list">
        
          <li class="md-nav__item">
  <a href="#deployment-tools" class="md-nav__link">
    <span class="md-ellipsis">
      Deployment Tools
    </span>
  </a>
  
</li>
        
          <li class="md-nav__item">
  <a href="#repository-setup" class="md-nav__link">
    <span class="md-ellipsis">
      Repository Setup
    </span>
  </a>
  
</li>
        
          <li class="md-nav__item">
  <a href="#important-setup-steps" class="md-nav__link">
    <span class="md-ellipsis">
      Important Setup Steps
    </span>
  </a>
  
</li>
        
          <li class="md-nav__item">
  <a href="#deployment-process" class="md-nav__link">
    <span class="md-ellipsis">
      Deployment Process
    </span>
  </a>
  
</li>
        
          <li class="md-nav__item">
  <a href="#deploy-the-sender-contract" class="md-nav__link">
    <span class="md-ellipsis">
      Deploy the Sender Contract
    </span>
  </a>
  
</li>
        
          <li class="md-nav__item">
  <a href="#deploy-the-receiver-contract" class="md-nav__link">
    <span class="md-ellipsis">
      Deploy the Receiver Contract
    </span>
  </a>
  
</li>
        
      </ul>
    </nav>
  
</li>
      
        <li class="md-nav__item">
  <a href="#send-a-cross-chain-message" class="md-nav__link">
    <span class="md-ellipsis">
      Send a Cross-Chain Message
    </span>
  </a>
  
</li>
      
        <li class="md-nav__item">
  <a href="#conclusion" class="md-nav__link">
    <span class="md-ellipsis">
      Conclusion
    </span>
  </a>
  
</li>
      
    </ul>
  
</nav>
                  </div>
                </div>
              </div>
            
          
          <div class="md-content" data-md-component="content">
    
    <article class="md-content__inner md-typeset ">
      
        


<h1 id="create-cross-chain-contracts">Create Cross-Chain Contracts</h1>
<h2 id="introduction">Introduction</h2>
<p>Wormhole's cross-chain messaging allows smart contracts to interact seamlessly across multiple blockchains. This enables developers to build decentralized applications that leverage the strengths of different networks, whether it's Avalanche, Celo, Ethereum, or beyond. In this tutorial, we'll explore using <a href="https://github.com/wormhole-foundation/wormhole-solidity-sdk" target="_blank">Wormhole's Solidity SDK</a> to create cross-chain contracts to send and receive messages across chains.</p>
<p>Wormhole's messaging infrastructure simplifies data transmission, event triggering, and transaction initiation across blockchains. In this tutorial, we'll guide you through a simple yet powerful hands-on demonstration that showcases this practical capability. We'll deploy contracts on two TestNets—Avalanche Fuji and Celo Alfajores—and send messages from one chain to another. This tutorial is perfect for those new to cross-chain development and seeking hands-on experience with Wormhole's powerful toolkit.</p>
<p>By the end of this tutorial, you will have not only built a fully functioning cross-chain message sender and receiver using Solidity but also developed a comprehensive understanding of how to interact with the Wormhole relayer, manage cross-chain costs, and ensure your smart contracts are configured correctly on both source and target chains.</p>
<p>This tutorial assumes a basic understanding of Solidity and smart contract development. Before diving in, it may be helpful to review <a href="/learn/" target="_blank">the basics of Wormhole</a> to familiarize yourself with the protocol.</p>
<h2 id="wormhole-overview">Wormhole Overview</h2>
<p>We'll interact with two key Wormhole components: the <a href="/learn/infrastructure/relayer/" target="_blank">Wormhole relayer</a> and the <a href="/learn/infrastructure/core-contracts/" target="_blank">Wormhole Core Contracts</a>. The relayer handles cross-chain message delivery and ensures the message is accurately received on the target chain. This allows smart contracts to communicate across blockchains without developers worrying about the underlying complexity.</p>
<p>Additionally, we'll rely on the Wormhole relayer to automatically determine cross-chain transaction costs and facilitate payments. This feature simplifies cross-chain development by allowing you to specify only the target chain and the message. The relayer handles the rest, ensuring that the message is transmitted with the appropriate fee.</p>
<p><a class="glightbox" href="/images/learn/fundamentals/architecture/architecture-1.webp" data-type="image" data-width="auto" data-height="auto" data-desc-position="bottom"><img alt="Wormhole architecture detailed diagram: source to target chain communication." src="/images/learn/fundamentals/architecture/architecture-1.webp" /></a></p>
<h2 id="prerequisites">Prerequisites</h2>
<p>Before starting this tutorial, ensure you have the following:</p>
<ul>
<li><a href="https://docs.npmjs.com/downloading-and-installing-node-js-and-npm" target="_blank">Node.js and npm</a> installed on your machine</li>
<li><a href="https://book.getfoundry.sh/getting-started/installation" target="_blank">Foundry</a> for deploying contracts</li>
<li>TestNet tokens for <a href="https://core.app/tools/testnet-faucet/?token=C" target="_blank">Avalanche-Fuji</a> and <a href="https://faucet.celo.org/alfajores" target="_blank">Celo-Alfajores</a> to cover gas fees</li>
<li>Wallet private key</li>
</ul>
<h2 id="build-cross-chain-messaging-contracts">Build Cross-Chain Messaging Contracts</h2>
<p>In this section, we'll deploy two smart contracts: one to send a message from Avalanche Fuji and another to receive it on Celo Alfajores. The contracts interact with the Wormhole relayer to transmit messages across chains.</p>
<p>At a high level, our contracts will:</p>
<ol>
<li>Send a message from Avalanche to Celo using the Wormhole relayer</li>
<li>Receive and process the message on Celo, logging the content of the message</li>
</ol>
<p>Before diving into the deployment steps, let's first break down key parts of the contracts.</p>
<h3 id="sender-contract-messagesender">Sender Contract: MessageSender</h3>
<p>The <code>MessageSender</code> contract is responsible for quoting the cost of sending a message cross-chain and then sending that message. </p>
<p>Key functions include:</p>
<ul>
<li><strong><code>quoteCrossChainCost</code></strong> - calculates the cost of delivering a message to the target chain using the Wormhole relayer</li>
<li><strong><code>sendMessage</code></strong> - encodes the message and sends it to the target chain and contract address using the Wormhole relayer</li>
</ul>
<p>Here's the core of the contract:</p>
<div class="language-solidity highlight"><pre><span></span><code><span id="__span-0-1"><a id="__codelineno-0-1" name="__codelineno-0-1" href="#__codelineno-0-1"></a><span class="w">    </span><span class="kt">function</span><span class="w"> </span><span class="nv">sendMessage</span><span class="p">(</span>
</span><span id="__span-0-2"><a id="__codelineno-0-2" name="__codelineno-0-2" href="#__codelineno-0-2"></a><span class="w">        </span><span class="kt">uint16</span><span class="w"> </span><span class="nv">targetChain</span><span class="p">,</span>
</span><span id="__span-0-3"><a id="__codelineno-0-3" name="__codelineno-0-3" href="#__codelineno-0-3"></a><span class="w">        </span><span class="kt">address</span><span class="w"> </span><span class="nv">targetAddress</span><span class="p">,</span>
</span><span id="__span-0-4"><a id="__codelineno-0-4" name="__codelineno-0-4" href="#__codelineno-0-4"></a><span class="w">        </span><span class="kt">string</span><span class="w"> </span><span class="nv">memory</span><span class="w"> </span>message
</span><span id="__span-0-5"><a id="__codelineno-0-5" name="__codelineno-0-5" href="#__codelineno-0-5"></a><span class="w">    </span><span class="p">)</span><span class="w"> </span><span class="kt">external</span><span class="w"> </span><span class="kt">payable</span><span class="w"> </span><span class="p">{</span>
</span><span id="__span-0-6"><a id="__codelineno-0-6" name="__codelineno-0-6" href="#__codelineno-0-6"></a><span class="w">        </span><span class="kt">uint256</span><span class="w"> </span><span class="nv">cost</span><span class="w"> </span><span class="o">=</span><span class="w"> </span>quoteCrossChainCost<span class="p">(</span>targetChain<span class="p">);</span>
</span><span id="__span-0-7"><a id="__codelineno-0-7" name="__codelineno-0-7" href="#__codelineno-0-7"></a>
</span><span id="__span-0-8"><a id="__codelineno-0-8" name="__codelineno-0-8" href="#__codelineno-0-8"></a><span class="w">        </span><span class="kt">require</span><span class="p">(</span>
</span><span id="__span-0-9"><a id="__codelineno-0-9" name="__codelineno-0-9" href="#__codelineno-0-9"></a><span class="w">            </span><span class="k">msg.value</span><span class="w"> </span><span class="o">&gt;=</span><span class="w"> </span>cost<span class="p">,</span>
</span><span id="__span-0-10"><a id="__codelineno-0-10" name="__codelineno-0-10" href="#__codelineno-0-10"></a><span class="w">            </span><span class="s2">&quot;Insufficient funds for cross-chain delivery&quot;</span>
</span><span id="__span-0-11"><a id="__codelineno-0-11" name="__codelineno-0-11" href="#__codelineno-0-11"></a><span class="w">        </span><span class="p">);</span>
</span><span id="__span-0-12"><a id="__codelineno-0-12" name="__codelineno-0-12" href="#__codelineno-0-12"></a>
</span><span id="__span-0-13"><a id="__codelineno-0-13" name="__codelineno-0-13" href="#__codelineno-0-13"></a><span class="w">        </span>wormholeRelayer<span class="p">.</span>sendPayloadToEvm<span class="p">{</span>value<span class="o">:</span><span class="w"> </span>cost<span class="p">}(</span>
</span><span id="__span-0-14"><a id="__codelineno-0-14" name="__codelineno-0-14" href="#__codelineno-0-14"></a><span class="w">            </span>targetChain<span class="p">,</span>
</span><span id="__span-0-15"><a id="__codelineno-0-15" name="__codelineno-0-15" href="#__codelineno-0-15"></a><span class="w">            </span>targetAddress<span class="p">,</span>
</span><span id="__span-0-16"><a id="__codelineno-0-16" name="__codelineno-0-16" href="#__codelineno-0-16"></a><span class="w">            </span>abi<span class="p">.</span>encode<span class="p">(</span>message<span class="p">,</span><span class="w"> </span><span class="k">msg.sender</span><span class="p">),</span>
</span><span id="__span-0-17"><a id="__codelineno-0-17" name="__codelineno-0-17" href="#__codelineno-0-17"></a><span class="w">            </span><span class="m m-Decimal">0</span><span class="p">,</span>
</span><span id="__span-0-18"><a id="__codelineno-0-18" name="__codelineno-0-18" href="#__codelineno-0-18"></a><span class="w">            </span>GAS_LIMIT
</span><span id="__span-0-19"><a id="__codelineno-0-19" name="__codelineno-0-19" href="#__codelineno-0-19"></a><span class="w">        </span><span class="p">);</span>
</span><span id="__span-0-20"><a id="__codelineno-0-20" name="__codelineno-0-20" href="#__codelineno-0-20"></a><span class="w">    </span><span class="p">}</span>
</span></code></pre></div>
<p>You can find the full code for the <code>MessageSender.sol</code> below.</p>
<details class="code">
<summary>MessageSender.sol</summary>
<div class="language-solidity highlight"><pre><span></span><code><span id="__span-1-1"><a id="__codelineno-1-1" name="__codelineno-1-1" href="#__codelineno-1-1"></a><span class="c1">// SPDX-License-Identifier: MIT</span>
</span><span id="__span-1-2"><a id="__codelineno-1-2" name="__codelineno-1-2" href="#__codelineno-1-2"></a><span class="k">pragma solidity</span><span class="w"> </span><span class="o">^</span><span class="k">0.8.18</span><span class="p">;</span>
</span><span id="__span-1-3"><a id="__codelineno-1-3" name="__codelineno-1-3" href="#__codelineno-1-3"></a>
</span><span id="__span-1-4"><a id="__codelineno-1-4" name="__codelineno-1-4" href="#__codelineno-1-4"></a><span class="kt">import</span><span class="w"> </span><span class="s2">&quot;lib/wormhole-solidity-sdk/src/interfaces/IWormholeRelayer.sol&quot;</span><span class="p">;</span>
</span><span id="__span-1-5"><a id="__codelineno-1-5" name="__codelineno-1-5" href="#__codelineno-1-5"></a>
</span><span id="__span-1-6"><a id="__codelineno-1-6" name="__codelineno-1-6" href="#__codelineno-1-6"></a><span class="k">contract</span><span class="w"> </span><span class="ni">MessageSender</span><span class="w"> </span><span class="p">{</span>
</span><span id="__span-1-7"><a id="__codelineno-1-7" name="__codelineno-1-7" href="#__codelineno-1-7"></a><span class="w">    </span>IWormholeRelayer<span class="w"> </span><span class="kt">public</span><span class="w"> </span>wormholeRelayer<span class="p">;</span>
</span><span id="__span-1-8"><a id="__codelineno-1-8" name="__codelineno-1-8" href="#__codelineno-1-8"></a><span class="w">    </span><span class="kt">uint256</span><span class="w"> </span><span class="nv">constant</span><span class="w"> </span>GAS_LIMIT<span class="w"> </span><span class="o">=</span><span class="w"> </span><span class="m m-Decimal">50000</span><span class="p">;</span>
</span><span id="__span-1-9"><a id="__codelineno-1-9" name="__codelineno-1-9" href="#__codelineno-1-9"></a>
</span><span id="__span-1-10"><a id="__codelineno-1-10" name="__codelineno-1-10" href="#__codelineno-1-10"></a><span class="w">    </span><span class="kt">constructor</span><span class="p">(</span><span class="kt">address</span><span class="w"> </span><span class="nv">_wormholeRelayer</span><span class="p">)</span><span class="w"> </span><span class="p">{</span>
</span><span id="__span-1-11"><a id="__codelineno-1-11" name="__codelineno-1-11" href="#__codelineno-1-11"></a><span class="w">        </span>wormholeRelayer<span class="w"> </span><span class="o">=</span><span class="w"> </span>IWormholeRelayer<span class="p">(</span>_wormholeRelayer<span class="p">);</span>
</span><span id="__span-1-12"><a id="__codelineno-1-12" name="__codelineno-1-12" href="#__codelineno-1-12"></a><span class="w">    </span><span class="p">}</span>
</span><span id="__span-1-13"><a id="__codelineno-1-13" name="__codelineno-1-13" href="#__codelineno-1-13"></a>
</span><span id="__span-1-14"><a id="__codelineno-1-14" name="__codelineno-1-14" href="#__codelineno-1-14"></a><span class="w">    </span><span class="kt">function</span><span class="w"> </span><span class="nv">quoteCrossChainCost</span><span class="p">(</span>
</span><span id="__span-1-15"><a id="__codelineno-1-15" name="__codelineno-1-15" href="#__codelineno-1-15"></a><span class="w">        </span><span class="kt">uint16</span><span class="w"> </span><span class="nv">targetChain</span>
</span><span id="__span-1-16"><a id="__codelineno-1-16" name="__codelineno-1-16" href="#__codelineno-1-16"></a><span class="w">    </span><span class="p">)</span><span class="w"> </span><span class="kt">public</span><span class="w"> </span>view<span class="w"> </span><span class="kt">returns</span><span class="w"> </span><span class="p">(</span><span class="kt">uint256</span><span class="w"> </span><span class="nv">cost</span><span class="p">)</span><span class="w"> </span><span class="p">{</span>
</span><span id="__span-1-17"><a id="__codelineno-1-17" name="__codelineno-1-17" href="#__codelineno-1-17"></a><span class="w">        </span><span class="p">(</span>cost<span class="p">,</span><span class="w"> </span><span class="p">)</span><span class="w"> </span><span class="o">=</span><span class="w"> </span>wormholeRelayer<span class="p">.</span>quoteEVMDeliveryPrice<span class="p">(</span>
</span><span id="__span-1-18"><a id="__codelineno-1-18" name="__codelineno-1-18" href="#__codelineno-1-18"></a><span class="w">            </span>targetChain<span class="p">,</span>
</span><span id="__span-1-19"><a id="__codelineno-1-19" name="__codelineno-1-19" href="#__codelineno-1-19"></a><span class="w">            </span><span class="m m-Decimal">0</span><span class="p">,</span>
</span><span id="__span-1-20"><a id="__codelineno-1-20" name="__codelineno-1-20" href="#__codelineno-1-20"></a><span class="w">            </span>GAS_LIMIT
</span><span id="__span-1-21"><a id="__codelineno-1-21" name="__codelineno-1-21" href="#__codelineno-1-21"></a><span class="w">        </span><span class="p">);</span>
</span><span id="__span-1-22"><a id="__codelineno-1-22" name="__codelineno-1-22" href="#__codelineno-1-22"></a><span class="w">    </span><span class="p">}</span>
</span><span id="__span-1-23"><a id="__codelineno-1-23" name="__codelineno-1-23" href="#__codelineno-1-23"></a>
</span><span id="__span-1-24"><a id="__codelineno-1-24" name="__codelineno-1-24" href="#__codelineno-1-24"></a><span class="w">    </span><span class="kt">function</span><span class="w"> </span><span class="nv">sendMessage</span><span class="p">(</span>
</span><span id="__span-1-25"><a id="__codelineno-1-25" name="__codelineno-1-25" href="#__codelineno-1-25"></a><span class="w">        </span><span class="kt">uint16</span><span class="w"> </span><span class="nv">targetChain</span><span class="p">,</span>
</span><span id="__span-1-26"><a id="__codelineno-1-26" name="__codelineno-1-26" href="#__codelineno-1-26"></a><span class="w">        </span><span class="kt">address</span><span class="w"> </span><span class="nv">targetAddress</span><span class="p">,</span>
</span><span id="__span-1-27"><a id="__codelineno-1-27" name="__codelineno-1-27" href="#__codelineno-1-27"></a><span class="w">        </span><span class="kt">string</span><span class="w"> </span><span class="nv">memory</span><span class="w"> </span>message
</span><span id="__span-1-28"><a id="__codelineno-1-28" name="__codelineno-1-28" href="#__codelineno-1-28"></a><span class="w">    </span><span class="p">)</span><span class="w"> </span><span class="kt">external</span><span class="w"> </span><span class="kt">payable</span><span class="w"> </span><span class="p">{</span>
</span><span id="__span-1-29"><a id="__codelineno-1-29" name="__codelineno-1-29" href="#__codelineno-1-29"></a><span class="w">        </span><span class="kt">uint256</span><span class="w"> </span><span class="nv">cost</span><span class="w"> </span><span class="o">=</span><span class="w"> </span>quoteCrossChainCost<span class="p">(</span>targetChain<span class="p">);</span>
</span><span id="__span-1-30"><a id="__codelineno-1-30" name="__codelineno-1-30" href="#__codelineno-1-30"></a>
</span><span id="__span-1-31"><a id="__codelineno-1-31" name="__codelineno-1-31" href="#__codelineno-1-31"></a><span class="w">        </span><span class="kt">require</span><span class="p">(</span>
</span><span id="__span-1-32"><a id="__codelineno-1-32" name="__codelineno-1-32" href="#__codelineno-1-32"></a><span class="w">            </span><span class="k">msg.value</span><span class="w"> </span><span class="o">&gt;=</span><span class="w"> </span>cost<span class="p">,</span>
</span><span id="__span-1-33"><a id="__codelineno-1-33" name="__codelineno-1-33" href="#__codelineno-1-33"></a><span class="w">            </span><span class="s2">&quot;Insufficient funds for cross-chain delivery&quot;</span>
</span><span id="__span-1-34"><a id="__codelineno-1-34" name="__codelineno-1-34" href="#__codelineno-1-34"></a><span class="w">        </span><span class="p">);</span>
</span><span id="__span-1-35"><a id="__codelineno-1-35" name="__codelineno-1-35" href="#__codelineno-1-35"></a>
</span><span id="__span-1-36"><a id="__codelineno-1-36" name="__codelineno-1-36" href="#__codelineno-1-36"></a><span class="w">        </span>wormholeRelayer<span class="p">.</span>sendPayloadToEvm<span class="p">{</span>value<span class="o">:</span><span class="w"> </span>cost<span class="p">}(</span>
</span><span id="__span-1-37"><a id="__codelineno-1-37" name="__codelineno-1-37" href="#__codelineno-1-37"></a><span class="w">            </span>targetChain<span class="p">,</span>
</span><span id="__span-1-38"><a id="__codelineno-1-38" name="__codelineno-1-38" href="#__codelineno-1-38"></a><span class="w">            </span>targetAddress<span class="p">,</span>
</span><span id="__span-1-39"><a id="__codelineno-1-39" name="__codelineno-1-39" href="#__codelineno-1-39"></a><span class="w">            </span>abi<span class="p">.</span>encode<span class="p">(</span>message<span class="p">,</span><span class="w"> </span><span class="k">msg.sender</span><span class="p">),</span>
</span><span id="__span-1-40"><a id="__codelineno-1-40" name="__codelineno-1-40" href="#__codelineno-1-40"></a><span class="w">            </span><span class="m m-Decimal">0</span><span class="p">,</span>
</span><span id="__span-1-41"><a id="__codelineno-1-41" name="__codelineno-1-41" href="#__codelineno-1-41"></a><span class="w">            </span>GAS_LIMIT
</span><span id="__span-1-42"><a id="__codelineno-1-42" name="__codelineno-1-42" href="#__codelineno-1-42"></a><span class="w">        </span><span class="p">);</span>
</span><span id="__span-1-43"><a id="__codelineno-1-43" name="__codelineno-1-43" href="#__codelineno-1-43"></a><span class="w">    </span><span class="p">}</span>
</span><span id="__span-1-44"><a id="__codelineno-1-44" name="__codelineno-1-44" href="#__codelineno-1-44"></a><span class="p">}</span>
</span></code></pre></div>
</details>
<h3 id="receiver-contract-messagereceiver">Receiver Contract: MessageReceiver</h3>
<p>The <code>MessageReceiver</code> contract handles incoming cross-chain messages. When a message arrives, it decodes the payload and logs the message content. It ensures that only authorized contracts can send and process messages, adding an extra layer of security in cross-chain communication.</p>
<h4 id="emitter-validation-and-registration">Emitter Validation and Registration</h4>
<p>In cross-chain messaging, validating the sender is essential to prevent unauthorized contracts from sending messages. The <code>isRegisteredSender</code> modifier ensures that messages can only be processed if they come from the registered contract on the source chain. This guards against malicious messages and enhances security.</p>
<p>Key implementation details include:</p>
<ul>
<li><strong><code>registeredSender</code></strong> - stores the address of the registered sender contract</li>
<li><strong><code>setRegisteredSender</code></strong> - registers the sender's contract address on the source chain. It ensures that only registered contracts can send messages, preventing unauthorized senders</li>
<li><strong><code>isRegisteredSender</code></strong> - restricts the processing of messages to only those from registered senders, preventing unauthorized cross-chain communication</li>
</ul>
<div class="language-solidity highlight"><pre><span></span><code><span id="__span-2-1"><a id="__codelineno-2-1" name="__codelineno-2-1" href="#__codelineno-2-1"></a><span class="w">    </span><span class="kt">mapping</span><span class="p">(</span><span class="kt">uint16</span><span class="w"> </span><span class="o">=&gt;</span><span class="w"> </span><span class="kt">bytes32</span><span class="p">)</span><span class="w"> </span><span class="kt">public</span><span class="w"> </span>registeredSenders<span class="p">;</span>
</span><span id="__span-2-2"><a id="__codelineno-2-2" name="__codelineno-2-2" href="#__codelineno-2-2"></a>
</span><span id="__span-2-3"><a id="__codelineno-2-3" name="__codelineno-2-3" href="#__codelineno-2-3"></a><span class="w">    </span><span class="kt">modifier</span><span class="w"> </span>isRegisteredSender<span class="p">(</span><span class="kt">uint16</span><span class="w"> </span><span class="nv">sourceChain</span><span class="p">,</span><span class="w"> </span><span class="kt">bytes32</span><span class="w"> </span><span class="nv">sourceAddress</span><span class="p">)</span><span class="w"> </span><span class="p">{</span>
</span><span id="__span-2-4"><a id="__codelineno-2-4" name="__codelineno-2-4" href="#__codelineno-2-4"></a><span class="w">        </span><span class="kt">require</span><span class="p">(</span>
</span><span id="__span-2-5"><a id="__codelineno-2-5" name="__codelineno-2-5" href="#__codelineno-2-5"></a><span class="w">            </span>registeredSenders<span class="p">[</span>sourceChain<span class="p">]</span><span class="w"> </span><span class="o">==</span><span class="w"> </span>sourceAddress<span class="p">,</span>
</span><span id="__span-2-6"><a id="__codelineno-2-6" name="__codelineno-2-6" href="#__codelineno-2-6"></a><span class="w">            </span><span class="s2">&quot;Not registered sender&quot;</span>
</span><span id="__span-2-7"><a id="__codelineno-2-7" name="__codelineno-2-7" href="#__codelineno-2-7"></a><span class="w">        </span><span class="p">);</span>
</span><span id="__span-2-8"><a id="__codelineno-2-8" name="__codelineno-2-8" href="#__codelineno-2-8"></a><span class="w">        </span>_<span class="p">;</span>
</span><span id="__span-2-9"><a id="__codelineno-2-9" name="__codelineno-2-9" href="#__codelineno-2-9"></a><span class="w">    </span><span class="p">}</span>
</span><span id="__span-2-10"><a id="__codelineno-2-10" name="__codelineno-2-10" href="#__codelineno-2-10"></a>
</span><span id="__span-2-11"><a id="__codelineno-2-11" name="__codelineno-2-11" href="#__codelineno-2-11"></a><span class="w">    </span><span class="kt">function</span><span class="w"> </span><span class="nv">setRegisteredSender</span><span class="p">(</span>
</span><span id="__span-2-12"><a id="__codelineno-2-12" name="__codelineno-2-12" href="#__codelineno-2-12"></a><span class="w">        </span><span class="kt">uint16</span><span class="w"> </span><span class="nv">sourceChain</span><span class="p">,</span>
</span><span id="__span-2-13"><a id="__codelineno-2-13" name="__codelineno-2-13" href="#__codelineno-2-13"></a><span class="w">        </span><span class="kt">bytes32</span><span class="w"> </span><span class="nv">sourceAddress</span>
</span><span id="__span-2-14"><a id="__codelineno-2-14" name="__codelineno-2-14" href="#__codelineno-2-14"></a><span class="w">    </span><span class="p">)</span><span class="w"> </span><span class="kt">public</span><span class="w"> </span><span class="p">{</span>
</span><span id="__span-2-15"><a id="__codelineno-2-15" name="__codelineno-2-15" href="#__codelineno-2-15"></a><span class="w">        </span><span class="kt">require</span><span class="p">(</span>
</span><span id="__span-2-16"><a id="__codelineno-2-16" name="__codelineno-2-16" href="#__codelineno-2-16"></a><span class="w">            </span><span class="k">msg.sender</span><span class="w"> </span><span class="o">==</span><span class="w"> </span>registrationOwner<span class="p">,</span>
</span><span id="__span-2-17"><a id="__codelineno-2-17" name="__codelineno-2-17" href="#__codelineno-2-17"></a><span class="w">            </span><span class="s2">&quot;Not allowed to set registered sender&quot;</span>
</span><span id="__span-2-18"><a id="__codelineno-2-18" name="__codelineno-2-18" href="#__codelineno-2-18"></a><span class="w">        </span><span class="p">);</span>
</span><span id="__span-2-19"><a id="__codelineno-2-19" name="__codelineno-2-19" href="#__codelineno-2-19"></a><span class="w">        </span>registeredSenders<span class="p">[</span>sourceChain<span class="p">]</span><span class="w"> </span><span class="o">=</span><span class="w"> </span>sourceAddress<span class="p">;</span>
</span><span id="__span-2-20"><a id="__codelineno-2-20" name="__codelineno-2-20" href="#__codelineno-2-20"></a><span class="w">    </span><span class="p">}</span>
</span></code></pre></div>
<h4 id="message-processing">Message Processing</h4>
<p>The <code>receiveWormholeMessages</code> is the core function that processes the received message. It checks that the Wormhole relayer sent the message, decodes the payload, and emits an event with the message content. It is essential to verify the message sender to prevent unauthorized messages.</p>
<div class="language-solidity highlight"><pre><span></span><code><span id="__span-3-1"><a id="__codelineno-3-1" name="__codelineno-3-1" href="#__codelineno-3-1"></a><span class="w">    </span><span class="kt">function</span><span class="w"> </span><span class="nv">receiveWormholeMessages</span><span class="p">(</span>
</span><span id="__span-3-2"><a id="__codelineno-3-2" name="__codelineno-3-2" href="#__codelineno-3-2"></a><span class="w">        </span><span class="kt">bytes</span><span class="w"> </span><span class="nv">memory</span><span class="w"> </span>payload<span class="p">,</span>
</span><span id="__span-3-3"><a id="__codelineno-3-3" name="__codelineno-3-3" href="#__codelineno-3-3"></a><span class="w">        </span><span class="kt">bytes</span><span class="p">[]</span><span class="w"> </span><span class="kt">memory</span><span class="p">,</span>
</span><span id="__span-3-4"><a id="__codelineno-3-4" name="__codelineno-3-4" href="#__codelineno-3-4"></a><span class="w">        </span><span class="kt">bytes32</span><span class="w"> </span><span class="nv">sourceAddress</span><span class="p">,</span>
</span><span id="__span-3-5"><a id="__codelineno-3-5" name="__codelineno-3-5" href="#__codelineno-3-5"></a><span class="w">        </span><span class="kt">uint16</span><span class="w"> </span><span class="nv">sourceChain</span><span class="p">,</span>
</span><span id="__span-3-6"><a id="__codelineno-3-6" name="__codelineno-3-6" href="#__codelineno-3-6"></a><span class="w">        </span><span class="kt">bytes32</span>
</span><span id="__span-3-7"><a id="__codelineno-3-7" name="__codelineno-3-7" href="#__codelineno-3-7"></a><span class="w">    </span><span class="p">)</span><span class="w"> </span><span class="kt">public</span><span class="w"> </span><span class="kt">payable</span><span class="w"> </span>override<span class="w"> </span>isRegisteredSender<span class="p">(</span>sourceChain<span class="p">,</span><span class="w"> </span>sourceAddress<span class="p">)</span><span class="w"> </span><span class="p">{</span>
</span><span id="__span-3-8"><a id="__codelineno-3-8" name="__codelineno-3-8" href="#__codelineno-3-8"></a><span class="w">        </span><span class="kt">require</span><span class="p">(</span>
</span><span id="__span-3-9"><a id="__codelineno-3-9" name="__codelineno-3-9" href="#__codelineno-3-9"></a><span class="w">            </span><span class="k">msg.sender</span><span class="w"> </span><span class="o">==</span><span class="w"> </span><span class="kt">address</span><span class="p">(</span>wormholeRelayer<span class="p">),</span>
</span><span id="__span-3-10"><a id="__codelineno-3-10" name="__codelineno-3-10" href="#__codelineno-3-10"></a><span class="w">            </span><span class="s2">&quot;Only the Wormhole relayer can call this function&quot;</span>
</span><span id="__span-3-11"><a id="__codelineno-3-11" name="__codelineno-3-11" href="#__codelineno-3-11"></a><span class="w">        </span><span class="p">);</span>
</span><span id="__span-3-12"><a id="__codelineno-3-12" name="__codelineno-3-12" href="#__codelineno-3-12"></a>
</span><span id="__span-3-13"><a id="__codelineno-3-13" name="__codelineno-3-13" href="#__codelineno-3-13"></a><span class="w">        </span><span class="c1">// Decode the payload to extract the message</span>
</span><span id="__span-3-14"><a id="__codelineno-3-14" name="__codelineno-3-14" href="#__codelineno-3-14"></a><span class="w">        </span><span class="kt">string</span><span class="w"> </span><span class="nv">memory</span><span class="w"> </span>message<span class="w"> </span><span class="o">=</span><span class="w"> </span>abi<span class="p">.</span>decode<span class="p">(</span>payload<span class="p">,</span><span class="w"> </span><span class="p">(</span><span class="kt">string</span><span class="p">));</span>
</span><span id="__span-3-15"><a id="__codelineno-3-15" name="__codelineno-3-15" href="#__codelineno-3-15"></a>
</span><span id="__span-3-16"><a id="__codelineno-3-16" name="__codelineno-3-16" href="#__codelineno-3-16"></a><span class="w">        </span><span class="c1">// Example use of sourceChain for logging</span>
</span><span id="__span-3-17"><a id="__codelineno-3-17" name="__codelineno-3-17" href="#__codelineno-3-17"></a><span class="w">        </span><span class="kt">if</span><span class="w"> </span><span class="p">(</span>sourceChain<span class="w"> </span><span class="o">!=</span><span class="w"> </span><span class="m m-Decimal">0</span><span class="p">)</span><span class="w"> </span><span class="p">{</span>
</span><span id="__span-3-18"><a id="__codelineno-3-18" name="__codelineno-3-18" href="#__codelineno-3-18"></a><span class="w">            </span>emit<span class="w"> </span>SourceChainLogged<span class="p">(</span>sourceChain<span class="p">);</span>
</span><span id="__span-3-19"><a id="__codelineno-3-19" name="__codelineno-3-19" href="#__codelineno-3-19"></a><span class="w">        </span><span class="p">}</span>
</span><span id="__span-3-20"><a id="__codelineno-3-20" name="__codelineno-3-20" href="#__codelineno-3-20"></a>
</span><span id="__span-3-21"><a id="__codelineno-3-21" name="__codelineno-3-21" href="#__codelineno-3-21"></a><span class="w">        </span><span class="c1">// Emit an event with the received message</span>
</span><span id="__span-3-22"><a id="__codelineno-3-22" name="__codelineno-3-22" href="#__codelineno-3-22"></a><span class="w">        </span>emit<span class="w"> </span>MessageReceived<span class="p">(</span>message<span class="p">);</span>
</span><span id="__span-3-23"><a id="__codelineno-3-23" name="__codelineno-3-23" href="#__codelineno-3-23"></a><span class="w">    </span><span class="p">}</span>
</span></code></pre></div>
<p>You can find the full code for the <code>MessageReceiver.sol</code> below.</p>
<details class="code">
<summary>MessageReceiver.sol</summary>
<div class="language-solidity highlight"><pre><span></span><code><span id="__span-4-1"><a id="__codelineno-4-1" name="__codelineno-4-1" href="#__codelineno-4-1"></a><span class="c1">// SPDX-License-Identifier: MIT</span>
</span><span id="__span-4-2"><a id="__codelineno-4-2" name="__codelineno-4-2" href="#__codelineno-4-2"></a><span class="k">pragma solidity</span><span class="w"> </span><span class="o">^</span><span class="k">0.8.18</span><span class="p">;</span>
</span><span id="__span-4-3"><a id="__codelineno-4-3" name="__codelineno-4-3" href="#__codelineno-4-3"></a>
</span><span id="__span-4-4"><a id="__codelineno-4-4" name="__codelineno-4-4" href="#__codelineno-4-4"></a><span class="kt">import</span><span class="w"> </span><span class="s2">&quot;lib/wormhole-solidity-sdk/src/interfaces/IWormholeRelayer.sol&quot;</span><span class="p">;</span>
</span><span id="__span-4-5"><a id="__codelineno-4-5" name="__codelineno-4-5" href="#__codelineno-4-5"></a><span class="kt">import</span><span class="w"> </span><span class="s2">&quot;lib/wormhole-solidity-sdk/src/interfaces/IWormholeReceiver.sol&quot;</span><span class="p">;</span>
</span><span id="__span-4-6"><a id="__codelineno-4-6" name="__codelineno-4-6" href="#__codelineno-4-6"></a>
</span><span id="__span-4-7"><a id="__codelineno-4-7" name="__codelineno-4-7" href="#__codelineno-4-7"></a><span class="k">contract</span><span class="w"> </span><span class="ni">MessageReceiver</span><span class="w"> </span><span class="kt">is</span><span class="w"> </span>IWormholeReceiver<span class="w"> </span><span class="p">{</span>
</span><span id="__span-4-8"><a id="__codelineno-4-8" name="__codelineno-4-8" href="#__codelineno-4-8"></a><span class="w">    </span>IWormholeRelayer<span class="w"> </span><span class="kt">public</span><span class="w"> </span>wormholeRelayer<span class="p">;</span>
</span><span id="__span-4-9"><a id="__codelineno-4-9" name="__codelineno-4-9" href="#__codelineno-4-9"></a><span class="w">    </span><span class="kt">address</span><span class="w"> </span><span class="k">public </span><span class="nv">registrationOwner</span><span class="p">;</span>
</span><span id="__span-4-10"><a id="__codelineno-4-10" name="__codelineno-4-10" href="#__codelineno-4-10"></a>
</span><span id="__span-4-11"><a id="__codelineno-4-11" name="__codelineno-4-11" href="#__codelineno-4-11"></a><span class="w">    </span><span class="c1">// Mapping to store registered senders for each chain</span>
</span><span id="__span-4-12"><a id="__codelineno-4-12" name="__codelineno-4-12" href="#__codelineno-4-12"></a><span class="w">    </span><span class="kt">mapping</span><span class="p">(</span><span class="kt">uint16</span><span class="w"> </span><span class="o">=&gt;</span><span class="w"> </span><span class="kt">bytes32</span><span class="p">)</span><span class="w"> </span><span class="kt">public</span><span class="w"> </span>registeredSenders<span class="p">;</span>
</span><span id="__span-4-13"><a id="__codelineno-4-13" name="__codelineno-4-13" href="#__codelineno-4-13"></a>
</span><span id="__span-4-14"><a id="__codelineno-4-14" name="__codelineno-4-14" href="#__codelineno-4-14"></a><span class="w">    </span><span class="kt">event</span><span class="w"> </span><span class="nv">MessageReceived</span><span class="p">(</span><span class="kt">string</span><span class="w"> </span><span class="nv">message</span><span class="p">);</span>
</span><span id="__span-4-15"><a id="__codelineno-4-15" name="__codelineno-4-15" href="#__codelineno-4-15"></a><span class="w">    </span><span class="kt">event</span><span class="w"> </span><span class="nv">SourceChainLogged</span><span class="p">(</span><span class="kt">uint16</span><span class="w"> </span><span class="nv">sourceChain</span><span class="p">);</span>
</span><span id="__span-4-16"><a id="__codelineno-4-16" name="__codelineno-4-16" href="#__codelineno-4-16"></a>
</span><span id="__span-4-17"><a id="__codelineno-4-17" name="__codelineno-4-17" href="#__codelineno-4-17"></a><span class="w">    </span><span class="kt">constructor</span><span class="p">(</span><span class="kt">address</span><span class="w"> </span><span class="nv">_wormholeRelayer</span><span class="p">)</span><span class="w"> </span><span class="p">{</span>
</span><span id="__span-4-18"><a id="__codelineno-4-18" name="__codelineno-4-18" href="#__codelineno-4-18"></a><span class="w">        </span>wormholeRelayer<span class="w"> </span><span class="o">=</span><span class="w"> </span>IWormholeRelayer<span class="p">(</span>_wormholeRelayer<span class="p">);</span>
</span><span id="__span-4-19"><a id="__codelineno-4-19" name="__codelineno-4-19" href="#__codelineno-4-19"></a><span class="w">        </span>registrationOwner<span class="w"> </span><span class="o">=</span><span class="w"> </span><span class="k">msg.sender</span><span class="p">;</span><span class="w"> </span><span class="c1">// Set contract deployer as the owner</span>
</span><span id="__span-4-20"><a id="__codelineno-4-20" name="__codelineno-4-20" href="#__codelineno-4-20"></a><span class="w">    </span><span class="p">}</span>
</span><span id="__span-4-21"><a id="__codelineno-4-21" name="__codelineno-4-21" href="#__codelineno-4-21"></a>
</span><span id="__span-4-22"><a id="__codelineno-4-22" name="__codelineno-4-22" href="#__codelineno-4-22"></a><span class="w">    </span><span class="kt">modifier</span><span class="w"> </span>isRegisteredSender<span class="p">(</span><span class="kt">uint16</span><span class="w"> </span><span class="nv">sourceChain</span><span class="p">,</span><span class="w"> </span><span class="kt">bytes32</span><span class="w"> </span><span class="nv">sourceAddress</span><span class="p">)</span><span class="w"> </span><span class="p">{</span>
</span><span id="__span-4-23"><a id="__codelineno-4-23" name="__codelineno-4-23" href="#__codelineno-4-23"></a><span class="w">        </span><span class="kt">require</span><span class="p">(</span>
</span><span id="__span-4-24"><a id="__codelineno-4-24" name="__codelineno-4-24" href="#__codelineno-4-24"></a><span class="w">            </span>registeredSenders<span class="p">[</span>sourceChain<span class="p">]</span><span class="w"> </span><span class="o">==</span><span class="w"> </span>sourceAddress<span class="p">,</span>
</span><span id="__span-4-25"><a id="__codelineno-4-25" name="__codelineno-4-25" href="#__codelineno-4-25"></a><span class="w">            </span><span class="s2">&quot;Not registered sender&quot;</span>
</span><span id="__span-4-26"><a id="__codelineno-4-26" name="__codelineno-4-26" href="#__codelineno-4-26"></a><span class="w">        </span><span class="p">);</span>
</span><span id="__span-4-27"><a id="__codelineno-4-27" name="__codelineno-4-27" href="#__codelineno-4-27"></a><span class="w">        </span>_<span class="p">;</span>
</span><span id="__span-4-28"><a id="__codelineno-4-28" name="__codelineno-4-28" href="#__codelineno-4-28"></a><span class="w">    </span><span class="p">}</span>
</span><span id="__span-4-29"><a id="__codelineno-4-29" name="__codelineno-4-29" href="#__codelineno-4-29"></a>
</span><span id="__span-4-30"><a id="__codelineno-4-30" name="__codelineno-4-30" href="#__codelineno-4-30"></a><span class="w">    </span><span class="kt">function</span><span class="w"> </span><span class="nv">setRegisteredSender</span><span class="p">(</span>
</span><span id="__span-4-31"><a id="__codelineno-4-31" name="__codelineno-4-31" href="#__codelineno-4-31"></a><span class="w">        </span><span class="kt">uint16</span><span class="w"> </span><span class="nv">sourceChain</span><span class="p">,</span>
</span><span id="__span-4-32"><a id="__codelineno-4-32" name="__codelineno-4-32" href="#__codelineno-4-32"></a><span class="w">        </span><span class="kt">bytes32</span><span class="w"> </span><span class="nv">sourceAddress</span>
</span><span id="__span-4-33"><a id="__codelineno-4-33" name="__codelineno-4-33" href="#__codelineno-4-33"></a><span class="w">    </span><span class="p">)</span><span class="w"> </span><span class="kt">public</span><span class="w"> </span><span class="p">{</span>
</span><span id="__span-4-34"><a id="__codelineno-4-34" name="__codelineno-4-34" href="#__codelineno-4-34"></a><span class="w">        </span><span class="kt">require</span><span class="p">(</span>
</span><span id="__span-4-35"><a id="__codelineno-4-35" name="__codelineno-4-35" href="#__codelineno-4-35"></a><span class="w">            </span><span class="k">msg.sender</span><span class="w"> </span><span class="o">==</span><span class="w"> </span>registrationOwner<span class="p">,</span>
</span><span id="__span-4-36"><a id="__codelineno-4-36" name="__codelineno-4-36" href="#__codelineno-4-36"></a><span class="w">            </span><span class="s2">&quot;Not allowed to set registered sender&quot;</span>
</span><span id="__span-4-37"><a id="__codelineno-4-37" name="__codelineno-4-37" href="#__codelineno-4-37"></a><span class="w">        </span><span class="p">);</span>
</span><span id="__span-4-38"><a id="__codelineno-4-38" name="__codelineno-4-38" href="#__codelineno-4-38"></a><span class="w">        </span>registeredSenders<span class="p">[</span>sourceChain<span class="p">]</span><span class="w"> </span><span class="o">=</span><span class="w"> </span>sourceAddress<span class="p">;</span>
</span><span id="__span-4-39"><a id="__codelineno-4-39" name="__codelineno-4-39" href="#__codelineno-4-39"></a><span class="w">    </span><span class="p">}</span>
</span><span id="__span-4-40"><a id="__codelineno-4-40" name="__codelineno-4-40" href="#__codelineno-4-40"></a>
</span><span id="__span-4-41"><a id="__codelineno-4-41" name="__codelineno-4-41" href="#__codelineno-4-41"></a><span class="w">    </span><span class="c1">// Update receiveWormholeMessages to include the source address check</span>
</span><span id="__span-4-42"><a id="__codelineno-4-42" name="__codelineno-4-42" href="#__codelineno-4-42"></a><span class="w">    </span><span class="kt">function</span><span class="w"> </span><span class="nv">receiveWormholeMessages</span><span class="p">(</span>
</span><span id="__span-4-43"><a id="__codelineno-4-43" name="__codelineno-4-43" href="#__codelineno-4-43"></a><span class="w">        </span><span class="kt">bytes</span><span class="w"> </span><span class="nv">memory</span><span class="w"> </span>payload<span class="p">,</span>
</span><span id="__span-4-44"><a id="__codelineno-4-44" name="__codelineno-4-44" href="#__codelineno-4-44"></a><span class="w">        </span><span class="kt">bytes</span><span class="p">[]</span><span class="w"> </span><span class="kt">memory</span><span class="p">,</span>
</span><span id="__span-4-45"><a id="__codelineno-4-45" name="__codelineno-4-45" href="#__codelineno-4-45"></a><span class="w">        </span><span class="kt">bytes32</span><span class="w"> </span><span class="nv">sourceAddress</span><span class="p">,</span>
</span><span id="__span-4-46"><a id="__codelineno-4-46" name="__codelineno-4-46" href="#__codelineno-4-46"></a><span class="w">        </span><span class="kt">uint16</span><span class="w"> </span><span class="nv">sourceChain</span><span class="p">,</span>
</span><span id="__span-4-47"><a id="__codelineno-4-47" name="__codelineno-4-47" href="#__codelineno-4-47"></a><span class="w">        </span><span class="kt">bytes32</span>
</span><span id="__span-4-48"><a id="__codelineno-4-48" name="__codelineno-4-48" href="#__codelineno-4-48"></a><span class="w">    </span><span class="p">)</span><span class="w"> </span><span class="kt">public</span><span class="w"> </span><span class="kt">payable</span><span class="w"> </span>override<span class="w"> </span>isRegisteredSender<span class="p">(</span>sourceChain<span class="p">,</span><span class="w"> </span>sourceAddress<span class="p">)</span><span class="w"> </span><span class="p">{</span>
</span><span id="__span-4-49"><a id="__codelineno-4-49" name="__codelineno-4-49" href="#__codelineno-4-49"></a><span class="w">        </span><span class="kt">require</span><span class="p">(</span>
</span><span id="__span-4-50"><a id="__codelineno-4-50" name="__codelineno-4-50" href="#__codelineno-4-50"></a><span class="w">            </span><span class="k">msg.sender</span><span class="w"> </span><span class="o">==</span><span class="w"> </span><span class="kt">address</span><span class="p">(</span>wormholeRelayer<span class="p">),</span>
</span><span id="__span-4-51"><a id="__codelineno-4-51" name="__codelineno-4-51" href="#__codelineno-4-51"></a><span class="w">            </span><span class="s2">&quot;Only the Wormhole relayer can call this function&quot;</span>
</span><span id="__span-4-52"><a id="__codelineno-4-52" name="__codelineno-4-52" href="#__codelineno-4-52"></a><span class="w">        </span><span class="p">);</span>
</span><span id="__span-4-53"><a id="__codelineno-4-53" name="__codelineno-4-53" href="#__codelineno-4-53"></a>
</span><span id="__span-4-54"><a id="__codelineno-4-54" name="__codelineno-4-54" href="#__codelineno-4-54"></a><span class="w">        </span><span class="c1">// Decode the payload to extract the message</span>
</span><span id="__span-4-55"><a id="__codelineno-4-55" name="__codelineno-4-55" href="#__codelineno-4-55"></a><span class="w">        </span><span class="kt">string</span><span class="w"> </span><span class="nv">memory</span><span class="w"> </span>message<span class="w"> </span><span class="o">=</span><span class="w"> </span>abi<span class="p">.</span>decode<span class="p">(</span>payload<span class="p">,</span><span class="w"> </span><span class="p">(</span><span class="kt">string</span><span class="p">));</span>
</span><span id="__span-4-56"><a id="__codelineno-4-56" name="__codelineno-4-56" href="#__codelineno-4-56"></a>
</span><span id="__span-4-57"><a id="__codelineno-4-57" name="__codelineno-4-57" href="#__codelineno-4-57"></a><span class="w">        </span><span class="c1">// Example use of sourceChain for logging</span>
</span><span id="__span-4-58"><a id="__codelineno-4-58" name="__codelineno-4-58" href="#__codelineno-4-58"></a><span class="w">        </span><span class="kt">if</span><span class="w"> </span><span class="p">(</span>sourceChain<span class="w"> </span><span class="o">!=</span><span class="w"> </span><span class="m m-Decimal">0</span><span class="p">)</span><span class="w"> </span><span class="p">{</span>
</span><span id="__span-4-59"><a id="__codelineno-4-59" name="__codelineno-4-59" href="#__codelineno-4-59"></a><span class="w">            </span>emit<span class="w"> </span>SourceChainLogged<span class="p">(</span>sourceChain<span class="p">);</span>
</span><span id="__span-4-60"><a id="__codelineno-4-60" name="__codelineno-4-60" href="#__codelineno-4-60"></a><span class="w">        </span><span class="p">}</span>
</span><span id="__span-4-61"><a id="__codelineno-4-61" name="__codelineno-4-61" href="#__codelineno-4-61"></a>
</span><span id="__span-4-62"><a id="__codelineno-4-62" name="__codelineno-4-62" href="#__codelineno-4-62"></a><span class="w">        </span><span class="c1">// Emit an event with the received message</span>
</span><span id="__span-4-63"><a id="__codelineno-4-63" name="__codelineno-4-63" href="#__codelineno-4-63"></a><span class="w">        </span>emit<span class="w"> </span>MessageReceived<span class="p">(</span>message<span class="p">);</span>
</span><span id="__span-4-64"><a id="__codelineno-4-64" name="__codelineno-4-64" href="#__codelineno-4-64"></a><span class="w">    </span><span class="p">}</span>
</span><span id="__span-4-65"><a id="__codelineno-4-65" name="__codelineno-4-65" href="#__codelineno-4-65"></a><span class="p">}</span>
</span></code></pre></div>
</details>
<h2 id="deploy-contracts">Deploy Contracts</h2>
<p>This section will guide you through deploying the cross-chain messaging contracts on the Avalanche Fuji and Celo Alfajores TestNets. Follow these steps to get your contracts up and running.</p>
<h3 id="deployment-tools">Deployment Tools</h3>
<p>We use <em>Foundry</em> to deploy our smart contracts. However, you can use any tool you're comfortable with, such as:</p>
<ul>
<li><a href="https://remix.ethereum.org/" target="_blank">Remix</a> for a browser-based IDE</li>
<li><a href="https://hardhat.org/hardhat-runner/docs/getting-started#installation" target="_blank">Hardhat</a> for a more extensive JavaScript/TypeScript workflow</li>
<li><a href="https://book.getfoundry.sh/getting-started/installation" target="_blank">Foundry</a> for a CLI-focused experience with built-in scripting and testing features</li>
</ul>
<p>The contracts and deployment steps remain the same regardless of your preferred tool. The key is to ensure you have the necessary TestNet funds and are deploying to the right networks.</p>
<h3 id="repository-setup">Repository Setup</h3>
<p>To get started with cross-chain messaging using Wormhole, first clone the <a href="https://github.com/martin0995/cross-chain-messaging" target="_blank">GitHub repository</a>. This repository includes everything you need to deploy, interact, and test the message flow between chains.</p>
<p>This demo focuses on using the scripts, so it's best to take a look at them, starting with <code>deploySender.js</code>, <code>deployReceiver.js</code>, and <code>sendMessage.js</code>.</p>
<p>To configure the dependencies properly, run the following command:</p>
<div class="language-bash highlight"><pre><span></span><code><span id="__span-5-1"><a id="__codelineno-5-1" name="__codelineno-5-1" href="#__codelineno-5-1"></a>npm<span class="w"> </span>install
</span></code></pre></div>
<p>The repository includes:</p>
<ul>
<li>
<p>Two Solidity contracts:</p>
<ul>
<li><strong><code>MessageSender.sol</code></strong> - contract that sends the cross-chain message from Avalanche</li>
<li><strong><code>MessageReceiver.sol</code></strong> - contract that receives the cross-chain message on Celo</li>
</ul>
</li>
<li>
<p>Deployment scripts located in the <code>script</code> directory:</p>
<ul>
<li><strong><code>deploySender.js</code></strong> - deploys the MessageSender contract to Avalanche</li>
<li><strong><code>deployReceiver.js</code></strong> - deploys the MessageReceiver contract to Celo</li>
<li><strong><code>sendMessage.js</code></strong> - sends a message from Avalanche to Celo</li>
</ul>
</li>
<li>
<p>Configuration files and ABI JSON files for easy deployment and interaction:</p>
<ul>
<li><strong><code>chains.json</code></strong> - configuration file that stores key information for the supported TestNets, including the Wormhole relayer addresses, RPC URLs, and chain IDs. You likely won't need to modify this file unless you're working with different networks</li>
</ul>
</li>
</ul>
<h3 id="important-setup-steps">Important Setup Steps</h3>
<ol>
<li>
<p><strong>Add your private key</strong> - create a <code>.env</code> file in the root of the project and add your private key:</p>
<div class="language-text highlight"><pre><span></span><code><span id="__span-6-1"><a id="__codelineno-6-1" name="__codelineno-6-1" href="#__codelineno-6-1"></a>touch .env
</span></code></pre></div>
<p>Inside <code>.env</code>, add your private key in the following format:</p>
<div class="language-text highlight"><pre><span></span><code><span id="__span-7-1"><a id="__codelineno-7-1" name="__codelineno-7-1" href="#__codelineno-7-1"></a>PRIVATE_KEY=INSERT_PRIVATE_KEY
</span></code></pre></div>
</li>
<li>
<p><strong>Compile the contracts</strong> - ensure everything is set up correctly by compiling the contracts:</p>
<div class="language-bash highlight"><pre><span></span><code><span id="__span-8-1"><a id="__codelineno-8-1" name="__codelineno-8-1" href="#__codelineno-8-1"></a>forge<span class="w"> </span>build
</span></code></pre></div>
</li>
</ol>
<p>The expected output should be similar to this:</p>
<div id="termynal" data-termynal>
    <span data-ty="input"><span class="file-path"></span>forge build</span>
    <span data-ty> > [⠒] Compiling...</span>
    <span data-ty> > [⠰] Compiling 30 files with 0.8.23</span>
    <span data-ty> [⠔] Solc 0.8.23 finished in 2.29s</span>
    <span data-ty>Compiler run successful!</span>
    <span data-ty="input"><span class="file-path"></span></span>
</div>

<h3 id="deployment-process">Deployment Process</h3>
<p>Both deployment scripts, <code>deploySender.js</code> and <code>deployReceiver.js</code>, perform the following key tasks:</p>
<ol>
<li>
<p><strong>Load configuration and contract details</strong> - each script begins by loading the necessary configuration details, such as the network's RPC URL and the contract's ABI and bytecode. This information is essential for deploying the contract to the correct blockchain network</p>
<div class="tabbed-set tabbed-alternate" data-tabs="1:3"><input checked="checked" id="__tabbed_1_1" name="__tabbed_1" type="radio" /><input id="__tabbed_1_2" name="__tabbed_1" type="radio" /><input id="__tabbed_1_3" name="__tabbed_1" type="radio" /><div class="tabbed-labels"><label for="__tabbed_1_1"><code>chains.json</code></label><label for="__tabbed_1_2"><code>deploySender.js</code></label><label for="__tabbed_1_3"><code>deployReceiver.js</code></label></div>
<div class="tabbed-content">
<div class="tabbed-block">
<div class="language-json highlight"><pre><span></span><code><span id="__span-9-1"><a id="__codelineno-9-1" name="__codelineno-9-1" href="#__codelineno-9-1"></a><span class="p">{</span>
</span><span id="__span-9-2"><a id="__codelineno-9-2" name="__codelineno-9-2" href="#__codelineno-9-2"></a><span class="w">    </span><span class="nt">&quot;chains&quot;</span><span class="p">:</span><span class="w"> </span><span class="p">[</span>
</span><span id="__span-9-3"><a id="__codelineno-9-3" name="__codelineno-9-3" href="#__codelineno-9-3"></a><span class="w">        </span><span class="p">{</span>
</span><span id="__span-9-4"><a id="__codelineno-9-4" name="__codelineno-9-4" href="#__codelineno-9-4"></a><span class="w">            </span><span class="nt">&quot;description&quot;</span><span class="p">:</span><span class="w"> </span><span class="s2">&quot;Avalanche testnet fuji&quot;</span><span class="p">,</span>
</span><span id="__span-9-5"><a id="__codelineno-9-5" name="__codelineno-9-5" href="#__codelineno-9-5"></a><span class="w">            </span><span class="nt">&quot;chainId&quot;</span><span class="p">:</span><span class="w"> </span><span class="mi">6</span><span class="p">,</span>
</span><span id="__span-9-6"><a id="__codelineno-9-6" name="__codelineno-9-6" href="#__codelineno-9-6"></a><span class="w">            </span><span class="nt">&quot;rpc&quot;</span><span class="p">:</span><span class="w"> </span><span class="s2">&quot;https://api.avax-test.network/ext/bc/C/rpc&quot;</span><span class="p">,</span>
</span><span id="__span-9-7"><a id="__codelineno-9-7" name="__codelineno-9-7" href="#__codelineno-9-7"></a><span class="w">            </span><span class="nt">&quot;tokenBridge&quot;</span><span class="p">:</span><span class="w"> </span><span class="s2">&quot;0x61E44E506Ca5659E6c0bba9b678586fA2d729756&quot;</span><span class="p">,</span>
</span><span id="__span-9-8"><a id="__codelineno-9-8" name="__codelineno-9-8" href="#__codelineno-9-8"></a><span class="w">            </span><span class="nt">&quot;wormholeRelayer&quot;</span><span class="p">:</span><span class="w"> </span><span class="s2">&quot;0xA3cF45939bD6260bcFe3D66bc73d60f19e49a8BB&quot;</span><span class="p">,</span>
</span><span id="__span-9-9"><a id="__codelineno-9-9" name="__codelineno-9-9" href="#__codelineno-9-9"></a><span class="w">            </span><span class="nt">&quot;wormhole&quot;</span><span class="p">:</span><span class="w"> </span><span class="s2">&quot;0x7bbcE28e64B3F8b84d876Ab298393c38ad7aac4C&quot;</span>
</span><span id="__span-9-10"><a id="__codelineno-9-10" name="__codelineno-9-10" href="#__codelineno-9-10"></a><span class="w">        </span><span class="p">},</span>
</span><span id="__span-9-11"><a id="__codelineno-9-11" name="__codelineno-9-11" href="#__codelineno-9-11"></a><span class="w">        </span><span class="p">{</span>
</span><span id="__span-9-12"><a id="__codelineno-9-12" name="__codelineno-9-12" href="#__codelineno-9-12"></a><span class="w">            </span><span class="nt">&quot;description&quot;</span><span class="p">:</span><span class="w"> </span><span class="s2">&quot;Celo Testnet&quot;</span><span class="p">,</span>
</span><span id="__span-9-13"><a id="__codelineno-9-13" name="__codelineno-9-13" href="#__codelineno-9-13"></a><span class="w">            </span><span class="nt">&quot;chainId&quot;</span><span class="p">:</span><span class="w"> </span><span class="mi">14</span><span class="p">,</span>
</span><span id="__span-9-14"><a id="__codelineno-9-14" name="__codelineno-9-14" href="#__codelineno-9-14"></a><span class="w">            </span><span class="nt">&quot;rpc&quot;</span><span class="p">:</span><span class="w"> </span><span class="s2">&quot;https://alfajores-forno.celo-testnet.org&quot;</span><span class="p">,</span>
</span><span id="__span-9-15"><a id="__codelineno-9-15" name="__codelineno-9-15" href="#__codelineno-9-15"></a><span class="w">            </span><span class="nt">&quot;tokenBridge&quot;</span><span class="p">:</span><span class="w"> </span><span class="s2">&quot;0x05ca6037eC51F8b712eD2E6Fa72219FEaE74E153&quot;</span><span class="p">,</span>
</span><span id="__span-9-16"><a id="__codelineno-9-16" name="__codelineno-9-16" href="#__codelineno-9-16"></a><span class="w">            </span><span class="nt">&quot;wormholeRelayer&quot;</span><span class="p">:</span><span class="w"> </span><span class="s2">&quot;0x306B68267Deb7c5DfCDa3619E22E9Ca39C374f84&quot;</span><span class="p">,</span>
</span><span id="__span-9-17"><a id="__codelineno-9-17" name="__codelineno-9-17" href="#__codelineno-9-17"></a><span class="w">            </span><span class="nt">&quot;wormhole&quot;</span><span class="p">:</span><span class="w"> </span><span class="s2">&quot;0x88505117CA88e7dd2eC6EA1E13f0948db2D50D56&quot;</span>
</span><span id="__span-9-18"><a id="__codelineno-9-18" name="__codelineno-9-18" href="#__codelineno-9-18"></a><span class="w">        </span><span class="p">}</span>
</span><span id="__span-9-19"><a id="__codelineno-9-19" name="__codelineno-9-19" href="#__codelineno-9-19"></a><span class="w">    </span><span class="p">]</span>
</span><span id="__span-9-20"><a id="__codelineno-9-20" name="__codelineno-9-20" href="#__codelineno-9-20"></a><span class="p">}</span>
</span></code></pre></div>
</div>
<div class="tabbed-block">
<div class="language-javascript highlight"><pre><span></span><code><span id="__span-10-1"><a id="__codelineno-10-1" name="__codelineno-10-1" href="#__codelineno-10-1"></a><span class="w">  </span><span class="c1">// Load the chain configuration from JSON</span>
</span><span id="__span-10-2"><a id="__codelineno-10-2" name="__codelineno-10-2" href="#__codelineno-10-2"></a><span class="w">  </span><span class="kd">const</span><span class="w"> </span><span class="nx">chains</span><span class="w"> </span><span class="o">=</span><span class="w"> </span><span class="nb">JSON</span><span class="p">.</span><span class="nx">parse</span><span class="p">(</span>
</span><span id="__span-10-3"><a id="__codelineno-10-3" name="__codelineno-10-3" href="#__codelineno-10-3"></a><span class="w">    </span><span class="nx">fs</span><span class="p">.</span><span class="nx">readFileSync</span><span class="p">(</span><span class="nx">path</span><span class="p">.</span><span class="nx">resolve</span><span class="p">(</span><span class="nx">__dirname</span><span class="p">,</span><span class="w"> </span><span class="s1">&#39;../deploy-config/chains.json&#39;</span><span class="p">))</span>
</span><span id="__span-10-4"><a id="__codelineno-10-4" name="__codelineno-10-4" href="#__codelineno-10-4"></a><span class="w">  </span><span class="p">);</span>
</span><span id="__span-10-5"><a id="__codelineno-10-5" name="__codelineno-10-5" href="#__codelineno-10-5"></a>
</span><span id="__span-10-6"><a id="__codelineno-10-6" name="__codelineno-10-6" href="#__codelineno-10-6"></a><span class="w">  </span><span class="c1">// Get the Avalanche Fuji configuration</span>
</span><span id="__span-10-7"><a id="__codelineno-10-7" name="__codelineno-10-7" href="#__codelineno-10-7"></a><span class="w">  </span><span class="kd">const</span><span class="w"> </span><span class="nx">avalancheChain</span><span class="w"> </span><span class="o">=</span><span class="w"> </span><span class="nx">chains</span><span class="p">.</span><span class="nx">chains</span><span class="p">.</span><span class="nx">find</span><span class="p">((</span><span class="nx">chain</span><span class="p">)</span><span class="w"> </span><span class="p">=&gt;</span>
</span><span id="__span-10-8"><a id="__codelineno-10-8" name="__codelineno-10-8" href="#__codelineno-10-8"></a><span class="w">    </span><span class="nx">chain</span><span class="p">.</span><span class="nx">description</span><span class="p">.</span><span class="nx">includes</span><span class="p">(</span><span class="s1">&#39;Avalanche testnet&#39;</span><span class="p">)</span>
</span><span id="__span-10-9"><a id="__codelineno-10-9" name="__codelineno-10-9" href="#__codelineno-10-9"></a><span class="w">  </span><span class="p">);</span>
</span></code></pre></div>
</div>
<div class="tabbed-block">
<div class="language-javascript highlight"><pre><span></span><code><span id="__span-11-1"><a id="__codelineno-11-1" name="__codelineno-11-1" href="#__codelineno-11-1"></a><span class="w">  </span><span class="c1">// Load the chain configuration from the JSON file</span>
</span><span id="__span-11-2"><a id="__codelineno-11-2" name="__codelineno-11-2" href="#__codelineno-11-2"></a><span class="w">  </span><span class="kd">const</span><span class="w"> </span><span class="nx">chains</span><span class="w"> </span><span class="o">=</span><span class="w"> </span><span class="nb">JSON</span><span class="p">.</span><span class="nx">parse</span><span class="p">(</span>
</span><span id="__span-11-3"><a id="__codelineno-11-3" name="__codelineno-11-3" href="#__codelineno-11-3"></a><span class="w">    </span><span class="nx">fs</span><span class="p">.</span><span class="nx">readFileSync</span><span class="p">(</span><span class="nx">path</span><span class="p">.</span><span class="nx">resolve</span><span class="p">(</span><span class="nx">__dirname</span><span class="p">,</span><span class="w"> </span><span class="s1">&#39;../deploy-config/chains.json&#39;</span><span class="p">))</span>
</span><span id="__span-11-4"><a id="__codelineno-11-4" name="__codelineno-11-4" href="#__codelineno-11-4"></a><span class="w">  </span><span class="p">);</span>
</span><span id="__span-11-5"><a id="__codelineno-11-5" name="__codelineno-11-5" href="#__codelineno-11-5"></a>
</span><span id="__span-11-6"><a id="__codelineno-11-6" name="__codelineno-11-6" href="#__codelineno-11-6"></a><span class="w">  </span><span class="c1">// Get the Celo Testnet configuration</span>
</span><span id="__span-11-7"><a id="__codelineno-11-7" name="__codelineno-11-7" href="#__codelineno-11-7"></a><span class="w">  </span><span class="kd">const</span><span class="w"> </span><span class="nx">celoChain</span><span class="w"> </span><span class="o">=</span><span class="w"> </span><span class="nx">chains</span><span class="p">.</span><span class="nx">chains</span><span class="p">.</span><span class="nx">find</span><span class="p">((</span><span class="nx">chain</span><span class="p">)</span><span class="w"> </span><span class="p">=&gt;</span>
</span><span id="__span-11-8"><a id="__codelineno-11-8" name="__codelineno-11-8" href="#__codelineno-11-8"></a><span class="w">    </span><span class="nx">chain</span><span class="p">.</span><span class="nx">description</span><span class="p">.</span><span class="nx">includes</span><span class="p">(</span><span class="s1">&#39;Celo Testnet&#39;</span><span class="p">)</span>
</span><span id="__span-11-9"><a id="__codelineno-11-9" name="__codelineno-11-9" href="#__codelineno-11-9"></a><span class="w">  </span><span class="p">);</span>
</span></code></pre></div>
</div>
</div>
</div>
<div class="admonition note">
<p class="admonition-title">Note</p>
<p>The <code>chains.json</code> file contains the configuration details for the Avalanche Fuji and Celo Alfajores TestNets. You can modify this file to add more networks if needed.</p>
</div>
</li>
<li>
<p><strong>Set up provider and wallet</strong> - the scripts establish a connection to the blockchain using a provider and create a wallet instance using a private key. This wallet is responsible for signing the deployment transaction</p>
<div class="tabbed-set tabbed-alternate" data-tabs="2:2"><input checked="checked" id="__tabbed_2_1" name="__tabbed_2" type="radio" /><input id="__tabbed_2_2" name="__tabbed_2" type="radio" /><div class="tabbed-labels"><label for="__tabbed_2_1"><code>deploySender.js</code></label><label for="__tabbed_2_2"><code>deployReceiver.js</code></label></div>
<div class="tabbed-content">
<div class="tabbed-block">
<div class="language-javascript highlight"><pre><span></span><code><span id="__span-12-1"><a id="__codelineno-12-1" name="__codelineno-12-1" href="#__codelineno-12-1"></a><span class="w">  </span><span class="kd">const</span><span class="w"> </span><span class="nx">provider</span><span class="w"> </span><span class="o">=</span><span class="w"> </span><span class="ow">new</span><span class="w"> </span><span class="nx">ethers</span><span class="p">.</span><span class="nx">JsonRpcProvider</span><span class="p">(</span><span class="nx">avalancheChain</span><span class="p">.</span><span class="nx">rpc</span><span class="p">);</span>
</span><span id="__span-12-2"><a id="__codelineno-12-2" name="__codelineno-12-2" href="#__codelineno-12-2"></a><span class="w">  </span><span class="kd">const</span><span class="w"> </span><span class="nx">wallet</span><span class="w"> </span><span class="o">=</span><span class="w"> </span><span class="ow">new</span><span class="w"> </span><span class="nx">ethers</span><span class="p">.</span><span class="nx">Wallet</span><span class="p">(</span><span class="nx">process</span><span class="p">.</span><span class="nx">env</span><span class="p">.</span><span class="nx">PRIVATE_KEY</span><span class="p">,</span><span class="w"> </span><span class="nx">provider</span><span class="p">);</span>
</span></code></pre></div>
</div>
<div class="tabbed-block">
<div class="language-javascript highlight"><pre><span></span><code><span id="__span-13-1"><a id="__codelineno-13-1" name="__codelineno-13-1" href="#__codelineno-13-1"></a><span class="w">  </span><span class="kd">const</span><span class="w"> </span><span class="nx">provider</span><span class="w"> </span><span class="o">=</span><span class="w"> </span><span class="ow">new</span><span class="w"> </span><span class="nx">ethers</span><span class="p">.</span><span class="nx">JsonRpcProvider</span><span class="p">(</span><span class="nx">celoChain</span><span class="p">.</span><span class="nx">rpc</span><span class="p">);</span>
</span><span id="__span-13-2"><a id="__codelineno-13-2" name="__codelineno-13-2" href="#__codelineno-13-2"></a><span class="w">  </span><span class="kd">const</span><span class="w"> </span><span class="nx">wallet</span><span class="w"> </span><span class="o">=</span><span class="w"> </span><span class="ow">new</span><span class="w"> </span><span class="nx">ethers</span><span class="p">.</span><span class="nx">Wallet</span><span class="p">(</span><span class="nx">process</span><span class="p">.</span><span class="nx">env</span><span class="p">.</span><span class="nx">PRIVATE_KEY</span><span class="p">,</span><span class="w"> </span><span class="nx">provider</span><span class="p">);</span>
</span></code></pre></div>
</div>
</div>
</div>
</li>
<li>
<p><strong>Deploy the contract</strong> - the contract is deployed to the network specified in the configuration. Upon successful deployment, the contract address is returned, which is crucial for interacting with the contract later on</p>
<div class="tabbed-set tabbed-alternate" data-tabs="3:2"><input checked="checked" id="__tabbed_3_1" name="__tabbed_3" type="radio" /><input id="__tabbed_3_2" name="__tabbed_3" type="radio" /><div class="tabbed-labels"><label for="__tabbed_3_1"><code>deploySender.js</code></label><label for="__tabbed_3_2"><code>deployReceiver.js</code></label></div>
<div class="tabbed-content">
<div class="tabbed-block">
<div class="language-javascript highlight"><pre><span></span><code><span id="__span-14-1"><a id="__codelineno-14-1" name="__codelineno-14-1" href="#__codelineno-14-1"></a><span class="w">  </span><span class="kd">const</span><span class="w"> </span><span class="nx">senderContract</span><span class="w"> </span><span class="o">=</span><span class="w"> </span><span class="k">await</span><span class="w"> </span><span class="nx">MessageSender</span><span class="p">.</span><span class="nx">deploy</span><span class="p">(</span>
</span><span id="__span-14-2"><a id="__codelineno-14-2" name="__codelineno-14-2" href="#__codelineno-14-2"></a><span class="w">    </span><span class="nx">avalancheChain</span><span class="p">.</span><span class="nx">wormholeRelayer</span>
</span><span id="__span-14-3"><a id="__codelineno-14-3" name="__codelineno-14-3" href="#__codelineno-14-3"></a><span class="w">  </span><span class="p">);</span>
</span><span id="__span-14-4"><a id="__codelineno-14-4" name="__codelineno-14-4" href="#__codelineno-14-4"></a><span class="w">  </span><span class="k">await</span><span class="w"> </span><span class="nx">senderContract</span><span class="p">.</span><span class="nx">waitForDeployment</span><span class="p">();</span>
</span></code></pre></div>
</div>
<div class="tabbed-block">
<div class="language-javascript highlight"><pre><span></span><code><span id="__span-15-1"><a id="__codelineno-15-1" name="__codelineno-15-1" href="#__codelineno-15-1"></a><span class="w">  </span><span class="kd">const</span><span class="w"> </span><span class="nx">receiverContract</span><span class="w"> </span><span class="o">=</span><span class="w"> </span><span class="k">await</span><span class="w"> </span><span class="nx">MessageReceiver</span><span class="p">.</span><span class="nx">deploy</span><span class="p">(</span>
</span><span id="__span-15-2"><a id="__codelineno-15-2" name="__codelineno-15-2" href="#__codelineno-15-2"></a><span class="w">    </span><span class="nx">celoChain</span><span class="p">.</span><span class="nx">wormholeRelayer</span>
</span><span id="__span-15-3"><a id="__codelineno-15-3" name="__codelineno-15-3" href="#__codelineno-15-3"></a><span class="w">  </span><span class="p">);</span>
</span><span id="__span-15-4"><a id="__codelineno-15-4" name="__codelineno-15-4" href="#__codelineno-15-4"></a><span class="w">  </span><span class="k">await</span><span class="w"> </span><span class="nx">receiverContract</span><span class="p">.</span><span class="nx">waitForDeployment</span><span class="p">();</span>
</span></code></pre></div>
</div>
</div>
</div>
</li>
<li>
<p><strong>Register the <code>MessageSender</code> on the target chain</strong> - after you deploy the <code>MessageReceiver</code> contract on the Celo Alfajores network, the sender contract address from Avalanche Fuji needs to be registered. This ensures that only messages from the registered <code>MessageSender</code> contract are processed</p>
<p>This additional step is essential to enforce emitter validation, preventing unauthorized senders from delivering messages to the <code>MessageReceiver</code> contract</p>
<div class="language-javascript highlight"><pre><span></span><code><span id="__span-16-1"><a id="__codelineno-16-1" name="__codelineno-16-1" href="#__codelineno-16-1"></a><span class="w">  </span><span class="c1">// Retrieve the address of the MessageSender from the deployedContracts.json file</span>
</span><span id="__span-16-2"><a id="__codelineno-16-2" name="__codelineno-16-2" href="#__codelineno-16-2"></a><span class="w">  </span><span class="kd">const</span><span class="w"> </span><span class="nx">avalancheSenderAddress</span><span class="w"> </span><span class="o">=</span><span class="w"> </span><span class="nx">deployedContracts</span><span class="p">.</span><span class="nx">avalanche</span><span class="p">.</span><span class="nx">MessageSender</span><span class="p">;</span>
</span><span id="__span-16-3"><a id="__codelineno-16-3" name="__codelineno-16-3" href="#__codelineno-16-3"></a>
</span><span id="__span-16-4"><a id="__codelineno-16-4" name="__codelineno-16-4" href="#__codelineno-16-4"></a><span class="w">  </span><span class="c1">// Define the source chain ID for Avalanche Fuji</span>
</span><span id="__span-16-5"><a id="__codelineno-16-5" name="__codelineno-16-5" href="#__codelineno-16-5"></a><span class="w">  </span><span class="kd">const</span><span class="w"> </span><span class="nx">sourceChainId</span><span class="w"> </span><span class="o">=</span><span class="w"> </span><span class="mf">6</span><span class="p">;</span>
</span><span id="__span-16-6"><a id="__codelineno-16-6" name="__codelineno-16-6" href="#__codelineno-16-6"></a>
</span><span id="__span-16-7"><a id="__codelineno-16-7" name="__codelineno-16-7" href="#__codelineno-16-7"></a><span class="w">  </span><span class="c1">// Call setRegisteredSender on the MessageReceiver contract</span>
</span><span id="__span-16-8"><a id="__codelineno-16-8" name="__codelineno-16-8" href="#__codelineno-16-8"></a><span class="w">  </span><span class="kd">const</span><span class="w"> </span><span class="nx">tx</span><span class="w"> </span><span class="o">=</span><span class="w"> </span><span class="k">await</span><span class="w"> </span><span class="nx">receiverContract</span><span class="p">.</span><span class="nx">setRegisteredSender</span><span class="p">(</span>
</span><span id="__span-16-9"><a id="__codelineno-16-9" name="__codelineno-16-9" href="#__codelineno-16-9"></a><span class="w">    </span><span class="nx">sourceChainId</span><span class="p">,</span>
</span><span id="__span-16-10"><a id="__codelineno-16-10" name="__codelineno-16-10" href="#__codelineno-16-10"></a><span class="w">    </span><span class="nx">ethers</span><span class="p">.</span><span class="nx">zeroPadValue</span><span class="p">(</span><span class="nx">avalancheSenderAddress</span><span class="p">,</span><span class="w"> </span><span class="mf">32</span><span class="p">)</span>
</span><span id="__span-16-11"><a id="__codelineno-16-11" name="__codelineno-16-11" href="#__codelineno-16-11"></a><span class="w">  </span><span class="p">);</span>
</span><span id="__span-16-12"><a id="__codelineno-16-12" name="__codelineno-16-12" href="#__codelineno-16-12"></a><span class="w">  </span><span class="k">await</span><span class="w"> </span><span class="nx">tx</span><span class="p">.</span><span class="nx">wait</span><span class="p">();</span>
</span></code></pre></div>
</li>
</ol>
<p>You can find the full code for the <code>deploySender.js</code> and <code>deployReceiver.js</code> below.</p>
<details class="code">
<summary>deploySender.js</summary>
<div class="language-javascript highlight"><pre><span></span><code><span id="__span-17-1"><a id="__codelineno-17-1" name="__codelineno-17-1" href="#__codelineno-17-1"></a><span class="kd">const</span><span class="w"> </span><span class="p">{</span><span class="w"> </span><span class="nx">ethers</span><span class="w"> </span><span class="p">}</span><span class="w"> </span><span class="o">=</span><span class="w"> </span><span class="nx">require</span><span class="p">(</span><span class="s1">&#39;ethers&#39;</span><span class="p">);</span>
</span><span id="__span-17-2"><a id="__codelineno-17-2" name="__codelineno-17-2" href="#__codelineno-17-2"></a><span class="kd">const</span><span class="w"> </span><span class="nx">fs</span><span class="w"> </span><span class="o">=</span><span class="w"> </span><span class="nx">require</span><span class="p">(</span><span class="s1">&#39;fs&#39;</span><span class="p">);</span>
</span><span id="__span-17-3"><a id="__codelineno-17-3" name="__codelineno-17-3" href="#__codelineno-17-3"></a><span class="kd">const</span><span class="w"> </span><span class="nx">path</span><span class="w"> </span><span class="o">=</span><span class="w"> </span><span class="nx">require</span><span class="p">(</span><span class="s1">&#39;path&#39;</span><span class="p">);</span>
</span><span id="__span-17-4"><a id="__codelineno-17-4" name="__codelineno-17-4" href="#__codelineno-17-4"></a><span class="nx">require</span><span class="p">(</span><span class="s1">&#39;dotenv&#39;</span><span class="p">).</span><span class="nx">config</span><span class="p">();</span>
</span><span id="__span-17-5"><a id="__codelineno-17-5" name="__codelineno-17-5" href="#__codelineno-17-5"></a>
</span><span id="__span-17-6"><a id="__codelineno-17-6" name="__codelineno-17-6" href="#__codelineno-17-6"></a><span class="k">async</span><span class="w"> </span><span class="kd">function</span><span class="w"> </span><span class="nx">main</span><span class="p">()</span><span class="w"> </span><span class="p">{</span>
</span><span id="__span-17-7"><a id="__codelineno-17-7" name="__codelineno-17-7" href="#__codelineno-17-7"></a><span class="w">  </span><span class="c1">// Load the chain configuration from JSON</span>
</span><span id="__span-17-8"><a id="__codelineno-17-8" name="__codelineno-17-8" href="#__codelineno-17-8"></a><span class="w">  </span><span class="kd">const</span><span class="w"> </span><span class="nx">chains</span><span class="w"> </span><span class="o">=</span><span class="w"> </span><span class="nb">JSON</span><span class="p">.</span><span class="nx">parse</span><span class="p">(</span>
</span><span id="__span-17-9"><a id="__codelineno-17-9" name="__codelineno-17-9" href="#__codelineno-17-9"></a><span class="w">    </span><span class="nx">fs</span><span class="p">.</span><span class="nx">readFileSync</span><span class="p">(</span><span class="nx">path</span><span class="p">.</span><span class="nx">resolve</span><span class="p">(</span><span class="nx">__dirname</span><span class="p">,</span><span class="w"> </span><span class="s1">&#39;../deploy-config/chains.json&#39;</span><span class="p">))</span>
</span><span id="__span-17-10"><a id="__codelineno-17-10" name="__codelineno-17-10" href="#__codelineno-17-10"></a><span class="w">  </span><span class="p">);</span>
</span><span id="__span-17-11"><a id="__codelineno-17-11" name="__codelineno-17-11" href="#__codelineno-17-11"></a>
</span><span id="__span-17-12"><a id="__codelineno-17-12" name="__codelineno-17-12" href="#__codelineno-17-12"></a><span class="w">  </span><span class="c1">// Get the Avalanche Fuji configuration</span>
</span><span id="__span-17-13"><a id="__codelineno-17-13" name="__codelineno-17-13" href="#__codelineno-17-13"></a><span class="w">  </span><span class="kd">const</span><span class="w"> </span><span class="nx">avalancheChain</span><span class="w"> </span><span class="o">=</span><span class="w"> </span><span class="nx">chains</span><span class="p">.</span><span class="nx">chains</span><span class="p">.</span><span class="nx">find</span><span class="p">((</span><span class="nx">chain</span><span class="p">)</span><span class="w"> </span><span class="p">=&gt;</span>
</span><span id="__span-17-14"><a id="__codelineno-17-14" name="__codelineno-17-14" href="#__codelineno-17-14"></a><span class="w">    </span><span class="nx">chain</span><span class="p">.</span><span class="nx">description</span><span class="p">.</span><span class="nx">includes</span><span class="p">(</span><span class="s1">&#39;Avalanche testnet&#39;</span><span class="p">)</span>
</span><span id="__span-17-15"><a id="__codelineno-17-15" name="__codelineno-17-15" href="#__codelineno-17-15"></a><span class="w">  </span><span class="p">);</span>
</span><span id="__span-17-16"><a id="__codelineno-17-16" name="__codelineno-17-16" href="#__codelineno-17-16"></a>
</span><span id="__span-17-17"><a id="__codelineno-17-17" name="__codelineno-17-17" href="#__codelineno-17-17"></a><span class="w">  </span><span class="c1">// Set up the provider and wallet</span>
</span><span id="__span-17-18"><a id="__codelineno-17-18" name="__codelineno-17-18" href="#__codelineno-17-18"></a><span class="w">  </span><span class="kd">const</span><span class="w"> </span><span class="nx">provider</span><span class="w"> </span><span class="o">=</span><span class="w"> </span><span class="ow">new</span><span class="w"> </span><span class="nx">ethers</span><span class="p">.</span><span class="nx">JsonRpcProvider</span><span class="p">(</span><span class="nx">avalancheChain</span><span class="p">.</span><span class="nx">rpc</span><span class="p">);</span>
</span><span id="__span-17-19"><a id="__codelineno-17-19" name="__codelineno-17-19" href="#__codelineno-17-19"></a><span class="w">  </span><span class="kd">const</span><span class="w"> </span><span class="nx">wallet</span><span class="w"> </span><span class="o">=</span><span class="w"> </span><span class="ow">new</span><span class="w"> </span><span class="nx">ethers</span><span class="p">.</span><span class="nx">Wallet</span><span class="p">(</span><span class="nx">process</span><span class="p">.</span><span class="nx">env</span><span class="p">.</span><span class="nx">PRIVATE_KEY</span><span class="p">,</span><span class="w"> </span><span class="nx">provider</span><span class="p">);</span>
</span><span id="__span-17-20"><a id="__codelineno-17-20" name="__codelineno-17-20" href="#__codelineno-17-20"></a>
</span><span id="__span-17-21"><a id="__codelineno-17-21" name="__codelineno-17-21" href="#__codelineno-17-21"></a><span class="w">  </span><span class="c1">// Load the ABI and bytecode of the MessageSender contract</span>
</span><span id="__span-17-22"><a id="__codelineno-17-22" name="__codelineno-17-22" href="#__codelineno-17-22"></a><span class="w">  </span><span class="kd">const</span><span class="w"> </span><span class="nx">messageSenderJson</span><span class="w"> </span><span class="o">=</span><span class="w"> </span><span class="nb">JSON</span><span class="p">.</span><span class="nx">parse</span><span class="p">(</span>
</span><span id="__span-17-23"><a id="__codelineno-17-23" name="__codelineno-17-23" href="#__codelineno-17-23"></a><span class="w">    </span><span class="nx">fs</span><span class="p">.</span><span class="nx">readFileSync</span><span class="p">(</span>
</span><span id="__span-17-24"><a id="__codelineno-17-24" name="__codelineno-17-24" href="#__codelineno-17-24"></a><span class="w">      </span><span class="nx">path</span><span class="p">.</span><span class="nx">resolve</span><span class="p">(</span><span class="nx">__dirname</span><span class="p">,</span><span class="w"> </span><span class="s1">&#39;../out/MessageSender.sol/MessageSender.json&#39;</span><span class="p">),</span>
</span><span id="__span-17-25"><a id="__codelineno-17-25" name="__codelineno-17-25" href="#__codelineno-17-25"></a><span class="w">      </span><span class="s1">&#39;utf8&#39;</span>
</span><span id="__span-17-26"><a id="__codelineno-17-26" name="__codelineno-17-26" href="#__codelineno-17-26"></a><span class="w">    </span><span class="p">)</span>
</span><span id="__span-17-27"><a id="__codelineno-17-27" name="__codelineno-17-27" href="#__codelineno-17-27"></a><span class="w">  </span><span class="p">);</span>
</span><span id="__span-17-28"><a id="__codelineno-17-28" name="__codelineno-17-28" href="#__codelineno-17-28"></a>
</span><span id="__span-17-29"><a id="__codelineno-17-29" name="__codelineno-17-29" href="#__codelineno-17-29"></a><span class="w">  </span><span class="kd">const</span><span class="w"> </span><span class="nx">abi</span><span class="w"> </span><span class="o">=</span><span class="w"> </span><span class="nx">messageSenderJson</span><span class="p">.</span><span class="nx">abi</span><span class="p">;</span>
</span><span id="__span-17-30"><a id="__codelineno-17-30" name="__codelineno-17-30" href="#__codelineno-17-30"></a><span class="w">  </span><span class="kd">const</span><span class="w"> </span><span class="nx">bytecode</span><span class="w"> </span><span class="o">=</span><span class="w"> </span><span class="nx">messageSenderJson</span><span class="p">.</span><span class="nx">bytecode</span><span class="p">;</span>
</span><span id="__span-17-31"><a id="__codelineno-17-31" name="__codelineno-17-31" href="#__codelineno-17-31"></a>
</span><span id="__span-17-32"><a id="__codelineno-17-32" name="__codelineno-17-32" href="#__codelineno-17-32"></a><span class="w">  </span><span class="c1">// Create a ContractFactory for MessageSender</span>
</span><span id="__span-17-33"><a id="__codelineno-17-33" name="__codelineno-17-33" href="#__codelineno-17-33"></a><span class="w">  </span><span class="kd">const</span><span class="w"> </span><span class="nx">MessageSender</span><span class="w"> </span><span class="o">=</span><span class="w"> </span><span class="ow">new</span><span class="w"> </span><span class="nx">ethers</span><span class="p">.</span><span class="nx">ContractFactory</span><span class="p">(</span><span class="nx">abi</span><span class="p">,</span><span class="w"> </span><span class="nx">bytecode</span><span class="p">,</span><span class="w"> </span><span class="nx">wallet</span><span class="p">);</span>
</span><span id="__span-17-34"><a id="__codelineno-17-34" name="__codelineno-17-34" href="#__codelineno-17-34"></a>
</span><span id="__span-17-35"><a id="__codelineno-17-35" name="__codelineno-17-35" href="#__codelineno-17-35"></a><span class="w">  </span><span class="c1">// Deploy the contract using the Wormhole Relayer address for Avalanche Fuji</span>
</span><span id="__span-17-36"><a id="__codelineno-17-36" name="__codelineno-17-36" href="#__codelineno-17-36"></a><span class="w">  </span><span class="kd">const</span><span class="w"> </span><span class="nx">senderContract</span><span class="w"> </span><span class="o">=</span><span class="w"> </span><span class="k">await</span><span class="w"> </span><span class="nx">MessageSender</span><span class="p">.</span><span class="nx">deploy</span><span class="p">(</span>
</span><span id="__span-17-37"><a id="__codelineno-17-37" name="__codelineno-17-37" href="#__codelineno-17-37"></a><span class="w">    </span><span class="nx">avalancheChain</span><span class="p">.</span><span class="nx">wormholeRelayer</span>
</span><span id="__span-17-38"><a id="__codelineno-17-38" name="__codelineno-17-38" href="#__codelineno-17-38"></a><span class="w">  </span><span class="p">);</span>
</span><span id="__span-17-39"><a id="__codelineno-17-39" name="__codelineno-17-39" href="#__codelineno-17-39"></a><span class="w">  </span><span class="k">await</span><span class="w"> </span><span class="nx">senderContract</span><span class="p">.</span><span class="nx">waitForDeployment</span><span class="p">();</span>
</span><span id="__span-17-40"><a id="__codelineno-17-40" name="__codelineno-17-40" href="#__codelineno-17-40"></a>
</span><span id="__span-17-41"><a id="__codelineno-17-41" name="__codelineno-17-41" href="#__codelineno-17-41"></a><span class="w">  </span><span class="nx">console</span><span class="p">.</span><span class="nx">log</span><span class="p">(</span><span class="s1">&#39;MessageSender deployed to:&#39;</span><span class="p">,</span><span class="w"> </span><span class="nx">senderContract</span><span class="p">.</span><span class="nx">target</span><span class="p">);</span>
</span><span id="__span-17-42"><a id="__codelineno-17-42" name="__codelineno-17-42" href="#__codelineno-17-42"></a>
</span><span id="__span-17-43"><a id="__codelineno-17-43" name="__codelineno-17-43" href="#__codelineno-17-43"></a><span class="w">  </span><span class="c1">// Update the deployedContracts.json file</span>
</span><span id="__span-17-44"><a id="__codelineno-17-44" name="__codelineno-17-44" href="#__codelineno-17-44"></a><span class="w">  </span><span class="kd">const</span><span class="w"> </span><span class="nx">deployedContractsPath</span><span class="w"> </span><span class="o">=</span><span class="w"> </span><span class="nx">path</span><span class="p">.</span><span class="nx">resolve</span><span class="p">(</span>
</span><span id="__span-17-45"><a id="__codelineno-17-45" name="__codelineno-17-45" href="#__codelineno-17-45"></a><span class="w">    </span><span class="nx">__dirname</span><span class="p">,</span>
</span><span id="__span-17-46"><a id="__codelineno-17-46" name="__codelineno-17-46" href="#__codelineno-17-46"></a><span class="w">    </span><span class="s1">&#39;../deploy-config/deployedContracts.json&#39;</span>
</span><span id="__span-17-47"><a id="__codelineno-17-47" name="__codelineno-17-47" href="#__codelineno-17-47"></a><span class="w">  </span><span class="p">);</span>
</span><span id="__span-17-48"><a id="__codelineno-17-48" name="__codelineno-17-48" href="#__codelineno-17-48"></a><span class="w">  </span><span class="kd">const</span><span class="w"> </span><span class="nx">deployedContracts</span><span class="w"> </span><span class="o">=</span><span class="w"> </span><span class="nb">JSON</span><span class="p">.</span><span class="nx">parse</span><span class="p">(</span>
</span><span id="__span-17-49"><a id="__codelineno-17-49" name="__codelineno-17-49" href="#__codelineno-17-49"></a><span class="w">    </span><span class="nx">fs</span><span class="p">.</span><span class="nx">readFileSync</span><span class="p">(</span><span class="nx">deployedContractsPath</span><span class="p">,</span><span class="w"> </span><span class="s1">&#39;utf8&#39;</span><span class="p">)</span>
</span><span id="__span-17-50"><a id="__codelineno-17-50" name="__codelineno-17-50" href="#__codelineno-17-50"></a><span class="w">  </span><span class="p">);</span>
</span><span id="__span-17-51"><a id="__codelineno-17-51" name="__codelineno-17-51" href="#__codelineno-17-51"></a>
</span><span id="__span-17-52"><a id="__codelineno-17-52" name="__codelineno-17-52" href="#__codelineno-17-52"></a><span class="w">  </span><span class="nx">deployedContracts</span><span class="p">.</span><span class="nx">avalanche</span><span class="w"> </span><span class="o">=</span><span class="w"> </span><span class="p">{</span>
</span><span id="__span-17-53"><a id="__codelineno-17-53" name="__codelineno-17-53" href="#__codelineno-17-53"></a><span class="w">    </span><span class="nx">MessageSender</span><span class="o">:</span><span class="w"> </span><span class="nx">senderContract</span><span class="p">.</span><span class="nx">target</span><span class="p">,</span>
</span><span id="__span-17-54"><a id="__codelineno-17-54" name="__codelineno-17-54" href="#__codelineno-17-54"></a><span class="w">    </span><span class="nx">deployedAt</span><span class="o">:</span><span class="w"> </span><span class="ow">new</span><span class="w"> </span><span class="nb">Date</span><span class="p">().</span><span class="nx">toISOString</span><span class="p">(),</span>
</span><span id="__span-17-55"><a id="__codelineno-17-55" name="__codelineno-17-55" href="#__codelineno-17-55"></a><span class="w">  </span><span class="p">};</span>
</span><span id="__span-17-56"><a id="__codelineno-17-56" name="__codelineno-17-56" href="#__codelineno-17-56"></a>
</span><span id="__span-17-57"><a id="__codelineno-17-57" name="__codelineno-17-57" href="#__codelineno-17-57"></a><span class="w">  </span><span class="nx">fs</span><span class="p">.</span><span class="nx">writeFileSync</span><span class="p">(</span>
</span><span id="__span-17-58"><a id="__codelineno-17-58" name="__codelineno-17-58" href="#__codelineno-17-58"></a><span class="w">    </span><span class="nx">deployedContractsPath</span><span class="p">,</span>
</span><span id="__span-17-59"><a id="__codelineno-17-59" name="__codelineno-17-59" href="#__codelineno-17-59"></a><span class="w">    </span><span class="nb">JSON</span><span class="p">.</span><span class="nx">stringify</span><span class="p">(</span><span class="nx">deployedContracts</span><span class="p">,</span><span class="w"> </span><span class="kc">null</span><span class="p">,</span><span class="w"> </span><span class="mf">2</span><span class="p">)</span>
</span><span id="__span-17-60"><a id="__codelineno-17-60" name="__codelineno-17-60" href="#__codelineno-17-60"></a><span class="w">  </span><span class="p">);</span>
</span><span id="__span-17-61"><a id="__codelineno-17-61" name="__codelineno-17-61" href="#__codelineno-17-61"></a><span class="p">}</span>
</span><span id="__span-17-62"><a id="__codelineno-17-62" name="__codelineno-17-62" href="#__codelineno-17-62"></a>
</span><span id="__span-17-63"><a id="__codelineno-17-63" name="__codelineno-17-63" href="#__codelineno-17-63"></a><span class="nx">main</span><span class="p">().</span><span class="k">catch</span><span class="p">((</span><span class="nx">error</span><span class="p">)</span><span class="w"> </span><span class="p">=&gt;</span><span class="w"> </span><span class="p">{</span>
</span><span id="__span-17-64"><a id="__codelineno-17-64" name="__codelineno-17-64" href="#__codelineno-17-64"></a><span class="w">  </span><span class="nx">console</span><span class="p">.</span><span class="nx">error</span><span class="p">(</span><span class="nx">error</span><span class="p">);</span>
</span><span id="__span-17-65"><a id="__codelineno-17-65" name="__codelineno-17-65" href="#__codelineno-17-65"></a><span class="w">  </span><span class="nx">process</span><span class="p">.</span><span class="nx">exit</span><span class="p">(</span><span class="mf">1</span><span class="p">);</span>
</span><span id="__span-17-66"><a id="__codelineno-17-66" name="__codelineno-17-66" href="#__codelineno-17-66"></a><span class="p">});</span>
</span></code></pre></div>
</details>
<details class="code">
<summary>deployReceiver.js</summary>
<div class="language-javascript highlight"><pre><span></span><code><span id="__span-18-1"><a id="__codelineno-18-1" name="__codelineno-18-1" href="#__codelineno-18-1"></a><span class="kd">const</span><span class="w"> </span><span class="p">{</span><span class="w"> </span><span class="nx">ethers</span><span class="w"> </span><span class="p">}</span><span class="w"> </span><span class="o">=</span><span class="w"> </span><span class="nx">require</span><span class="p">(</span><span class="s1">&#39;ethers&#39;</span><span class="p">);</span>
</span><span id="__span-18-2"><a id="__codelineno-18-2" name="__codelineno-18-2" href="#__codelineno-18-2"></a><span class="kd">const</span><span class="w"> </span><span class="nx">fs</span><span class="w"> </span><span class="o">=</span><span class="w"> </span><span class="nx">require</span><span class="p">(</span><span class="s1">&#39;fs&#39;</span><span class="p">);</span>
</span><span id="__span-18-3"><a id="__codelineno-18-3" name="__codelineno-18-3" href="#__codelineno-18-3"></a><span class="kd">const</span><span class="w"> </span><span class="nx">path</span><span class="w"> </span><span class="o">=</span><span class="w"> </span><span class="nx">require</span><span class="p">(</span><span class="s1">&#39;path&#39;</span><span class="p">);</span>
</span><span id="__span-18-4"><a id="__codelineno-18-4" name="__codelineno-18-4" href="#__codelineno-18-4"></a><span class="nx">require</span><span class="p">(</span><span class="s1">&#39;dotenv&#39;</span><span class="p">).</span><span class="nx">config</span><span class="p">();</span>
</span><span id="__span-18-5"><a id="__codelineno-18-5" name="__codelineno-18-5" href="#__codelineno-18-5"></a>
</span><span id="__span-18-6"><a id="__codelineno-18-6" name="__codelineno-18-6" href="#__codelineno-18-6"></a><span class="k">async</span><span class="w"> </span><span class="kd">function</span><span class="w"> </span><span class="nx">main</span><span class="p">()</span><span class="w"> </span><span class="p">{</span>
</span><span id="__span-18-7"><a id="__codelineno-18-7" name="__codelineno-18-7" href="#__codelineno-18-7"></a><span class="w">  </span><span class="c1">// Load the chain configuration from the JSON file</span>
</span><span id="__span-18-8"><a id="__codelineno-18-8" name="__codelineno-18-8" href="#__codelineno-18-8"></a><span class="w">  </span><span class="kd">const</span><span class="w"> </span><span class="nx">chains</span><span class="w"> </span><span class="o">=</span><span class="w"> </span><span class="nb">JSON</span><span class="p">.</span><span class="nx">parse</span><span class="p">(</span>
</span><span id="__span-18-9"><a id="__codelineno-18-9" name="__codelineno-18-9" href="#__codelineno-18-9"></a><span class="w">    </span><span class="nx">fs</span><span class="p">.</span><span class="nx">readFileSync</span><span class="p">(</span><span class="nx">path</span><span class="p">.</span><span class="nx">resolve</span><span class="p">(</span><span class="nx">__dirname</span><span class="p">,</span><span class="w"> </span><span class="s1">&#39;../deploy-config/chains.json&#39;</span><span class="p">))</span>
</span><span id="__span-18-10"><a id="__codelineno-18-10" name="__codelineno-18-10" href="#__codelineno-18-10"></a><span class="w">  </span><span class="p">);</span>
</span><span id="__span-18-11"><a id="__codelineno-18-11" name="__codelineno-18-11" href="#__codelineno-18-11"></a>
</span><span id="__span-18-12"><a id="__codelineno-18-12" name="__codelineno-18-12" href="#__codelineno-18-12"></a><span class="w">  </span><span class="c1">// Get the Celo Testnet configuration</span>
</span><span id="__span-18-13"><a id="__codelineno-18-13" name="__codelineno-18-13" href="#__codelineno-18-13"></a><span class="w">  </span><span class="kd">const</span><span class="w"> </span><span class="nx">celoChain</span><span class="w"> </span><span class="o">=</span><span class="w"> </span><span class="nx">chains</span><span class="p">.</span><span class="nx">chains</span><span class="p">.</span><span class="nx">find</span><span class="p">((</span><span class="nx">chain</span><span class="p">)</span><span class="w"> </span><span class="p">=&gt;</span>
</span><span id="__span-18-14"><a id="__codelineno-18-14" name="__codelineno-18-14" href="#__codelineno-18-14"></a><span class="w">    </span><span class="nx">chain</span><span class="p">.</span><span class="nx">description</span><span class="p">.</span><span class="nx">includes</span><span class="p">(</span><span class="s1">&#39;Celo Testnet&#39;</span><span class="p">)</span>
</span><span id="__span-18-15"><a id="__codelineno-18-15" name="__codelineno-18-15" href="#__codelineno-18-15"></a><span class="w">  </span><span class="p">);</span>
</span><span id="__span-18-16"><a id="__codelineno-18-16" name="__codelineno-18-16" href="#__codelineno-18-16"></a>
</span><span id="__span-18-17"><a id="__codelineno-18-17" name="__codelineno-18-17" href="#__codelineno-18-17"></a><span class="w">  </span><span class="c1">// Set up the provider and wallet</span>
</span><span id="__span-18-18"><a id="__codelineno-18-18" name="__codelineno-18-18" href="#__codelineno-18-18"></a><span class="w">  </span><span class="kd">const</span><span class="w"> </span><span class="nx">provider</span><span class="w"> </span><span class="o">=</span><span class="w"> </span><span class="ow">new</span><span class="w"> </span><span class="nx">ethers</span><span class="p">.</span><span class="nx">JsonRpcProvider</span><span class="p">(</span><span class="nx">celoChain</span><span class="p">.</span><span class="nx">rpc</span><span class="p">);</span>
</span><span id="__span-18-19"><a id="__codelineno-18-19" name="__codelineno-18-19" href="#__codelineno-18-19"></a><span class="w">  </span><span class="kd">const</span><span class="w"> </span><span class="nx">wallet</span><span class="w"> </span><span class="o">=</span><span class="w"> </span><span class="ow">new</span><span class="w"> </span><span class="nx">ethers</span><span class="p">.</span><span class="nx">Wallet</span><span class="p">(</span><span class="nx">process</span><span class="p">.</span><span class="nx">env</span><span class="p">.</span><span class="nx">PRIVATE_KEY</span><span class="p">,</span><span class="w"> </span><span class="nx">provider</span><span class="p">);</span>
</span><span id="__span-18-20"><a id="__codelineno-18-20" name="__codelineno-18-20" href="#__codelineno-18-20"></a>
</span><span id="__span-18-21"><a id="__codelineno-18-21" name="__codelineno-18-21" href="#__codelineno-18-21"></a><span class="w">  </span><span class="c1">// Load the ABI and bytecode of the MessageReceiver contract</span>
</span><span id="__span-18-22"><a id="__codelineno-18-22" name="__codelineno-18-22" href="#__codelineno-18-22"></a><span class="w">  </span><span class="kd">const</span><span class="w"> </span><span class="nx">messageReceiverJson</span><span class="w"> </span><span class="o">=</span><span class="w"> </span><span class="nb">JSON</span><span class="p">.</span><span class="nx">parse</span><span class="p">(</span>
</span><span id="__span-18-23"><a id="__codelineno-18-23" name="__codelineno-18-23" href="#__codelineno-18-23"></a><span class="w">    </span><span class="nx">fs</span><span class="p">.</span><span class="nx">readFileSync</span><span class="p">(</span>
</span><span id="__span-18-24"><a id="__codelineno-18-24" name="__codelineno-18-24" href="#__codelineno-18-24"></a><span class="w">      </span><span class="nx">path</span><span class="p">.</span><span class="nx">resolve</span><span class="p">(</span>
</span><span id="__span-18-25"><a id="__codelineno-18-25" name="__codelineno-18-25" href="#__codelineno-18-25"></a><span class="w">        </span><span class="nx">__dirname</span><span class="p">,</span>
</span><span id="__span-18-26"><a id="__codelineno-18-26" name="__codelineno-18-26" href="#__codelineno-18-26"></a><span class="w">        </span><span class="s1">&#39;../out/MessageReceiver.sol/MessageReceiver.json&#39;</span>
</span><span id="__span-18-27"><a id="__codelineno-18-27" name="__codelineno-18-27" href="#__codelineno-18-27"></a><span class="w">      </span><span class="p">),</span>
</span><span id="__span-18-28"><a id="__codelineno-18-28" name="__codelineno-18-28" href="#__codelineno-18-28"></a><span class="w">      </span><span class="s1">&#39;utf8&#39;</span>
</span><span id="__span-18-29"><a id="__codelineno-18-29" name="__codelineno-18-29" href="#__codelineno-18-29"></a><span class="w">    </span><span class="p">)</span>
</span><span id="__span-18-30"><a id="__codelineno-18-30" name="__codelineno-18-30" href="#__codelineno-18-30"></a><span class="w">  </span><span class="p">);</span>
</span><span id="__span-18-31"><a id="__codelineno-18-31" name="__codelineno-18-31" href="#__codelineno-18-31"></a>
</span><span id="__span-18-32"><a id="__codelineno-18-32" name="__codelineno-18-32" href="#__codelineno-18-32"></a><span class="w">  </span><span class="kd">const</span><span class="w"> </span><span class="nx">abi</span><span class="w"> </span><span class="o">=</span><span class="w"> </span><span class="nx">messageReceiverJson</span><span class="p">.</span><span class="nx">abi</span><span class="p">;</span>
</span><span id="__span-18-33"><a id="__codelineno-18-33" name="__codelineno-18-33" href="#__codelineno-18-33"></a><span class="w">  </span><span class="kd">const</span><span class="w"> </span><span class="nx">bytecode</span><span class="w"> </span><span class="o">=</span><span class="w"> </span><span class="nx">messageReceiverJson</span><span class="p">.</span><span class="nx">bytecode</span><span class="p">;</span>
</span><span id="__span-18-34"><a id="__codelineno-18-34" name="__codelineno-18-34" href="#__codelineno-18-34"></a>
</span><span id="__span-18-35"><a id="__codelineno-18-35" name="__codelineno-18-35" href="#__codelineno-18-35"></a><span class="w">  </span><span class="c1">// Create a ContractFactory for MessageReceiver</span>
</span><span id="__span-18-36"><a id="__codelineno-18-36" name="__codelineno-18-36" href="#__codelineno-18-36"></a><span class="w">  </span><span class="kd">const</span><span class="w"> </span><span class="nx">MessageReceiver</span><span class="w"> </span><span class="o">=</span><span class="w"> </span><span class="ow">new</span><span class="w"> </span><span class="nx">ethers</span><span class="p">.</span><span class="nx">ContractFactory</span><span class="p">(</span><span class="nx">abi</span><span class="p">,</span><span class="w"> </span><span class="nx">bytecode</span><span class="p">,</span><span class="w"> </span><span class="nx">wallet</span><span class="p">);</span>
</span><span id="__span-18-37"><a id="__codelineno-18-37" name="__codelineno-18-37" href="#__codelineno-18-37"></a>
</span><span id="__span-18-38"><a id="__codelineno-18-38" name="__codelineno-18-38" href="#__codelineno-18-38"></a><span class="w">  </span><span class="c1">// Deploy the contract using the Wormhole Relayer address for Celo Testnet</span>
</span><span id="__span-18-39"><a id="__codelineno-18-39" name="__codelineno-18-39" href="#__codelineno-18-39"></a><span class="w">  </span><span class="kd">const</span><span class="w"> </span><span class="nx">receiverContract</span><span class="w"> </span><span class="o">=</span><span class="w"> </span><span class="k">await</span><span class="w"> </span><span class="nx">MessageReceiver</span><span class="p">.</span><span class="nx">deploy</span><span class="p">(</span>
</span><span id="__span-18-40"><a id="__codelineno-18-40" name="__codelineno-18-40" href="#__codelineno-18-40"></a><span class="w">    </span><span class="nx">celoChain</span><span class="p">.</span><span class="nx">wormholeRelayer</span>
</span><span id="__span-18-41"><a id="__codelineno-18-41" name="__codelineno-18-41" href="#__codelineno-18-41"></a><span class="w">  </span><span class="p">);</span>
</span><span id="__span-18-42"><a id="__codelineno-18-42" name="__codelineno-18-42" href="#__codelineno-18-42"></a><span class="w">  </span><span class="k">await</span><span class="w"> </span><span class="nx">receiverContract</span><span class="p">.</span><span class="nx">waitForDeployment</span><span class="p">();</span>
</span><span id="__span-18-43"><a id="__codelineno-18-43" name="__codelineno-18-43" href="#__codelineno-18-43"></a>
</span><span id="__span-18-44"><a id="__codelineno-18-44" name="__codelineno-18-44" href="#__codelineno-18-44"></a><span class="w">  </span><span class="nx">console</span><span class="p">.</span><span class="nx">log</span><span class="p">(</span><span class="s1">&#39;MessageReceiver deployed to:&#39;</span><span class="p">,</span><span class="w"> </span><span class="nx">receiverContract</span><span class="p">.</span><span class="nx">target</span><span class="p">);</span><span class="w"> </span><span class="c1">// `target` is the contract address in ethers.js v6</span>
</span><span id="__span-18-45"><a id="__codelineno-18-45" name="__codelineno-18-45" href="#__codelineno-18-45"></a>
</span><span id="__span-18-46"><a id="__codelineno-18-46" name="__codelineno-18-46" href="#__codelineno-18-46"></a><span class="w">  </span><span class="c1">// Update the deployedContracts.json file</span>
</span><span id="__span-18-47"><a id="__codelineno-18-47" name="__codelineno-18-47" href="#__codelineno-18-47"></a><span class="w">  </span><span class="kd">const</span><span class="w"> </span><span class="nx">deployedContractsPath</span><span class="w"> </span><span class="o">=</span><span class="w"> </span><span class="nx">path</span><span class="p">.</span><span class="nx">resolve</span><span class="p">(</span>
</span><span id="__span-18-48"><a id="__codelineno-18-48" name="__codelineno-18-48" href="#__codelineno-18-48"></a><span class="w">    </span><span class="nx">__dirname</span><span class="p">,</span>
</span><span id="__span-18-49"><a id="__codelineno-18-49" name="__codelineno-18-49" href="#__codelineno-18-49"></a><span class="w">    </span><span class="s1">&#39;../deploy-config/deployedContracts.json&#39;</span>
</span><span id="__span-18-50"><a id="__codelineno-18-50" name="__codelineno-18-50" href="#__codelineno-18-50"></a><span class="w">  </span><span class="p">);</span>
</span><span id="__span-18-51"><a id="__codelineno-18-51" name="__codelineno-18-51" href="#__codelineno-18-51"></a><span class="w">  </span><span class="kd">const</span><span class="w"> </span><span class="nx">deployedContracts</span><span class="w"> </span><span class="o">=</span><span class="w"> </span><span class="nb">JSON</span><span class="p">.</span><span class="nx">parse</span><span class="p">(</span>
</span><span id="__span-18-52"><a id="__codelineno-18-52" name="__codelineno-18-52" href="#__codelineno-18-52"></a><span class="w">    </span><span class="nx">fs</span><span class="p">.</span><span class="nx">readFileSync</span><span class="p">(</span><span class="nx">deployedContractsPath</span><span class="p">,</span><span class="w"> </span><span class="s1">&#39;utf8&#39;</span><span class="p">)</span>
</span><span id="__span-18-53"><a id="__codelineno-18-53" name="__codelineno-18-53" href="#__codelineno-18-53"></a><span class="w">  </span><span class="p">);</span>
</span><span id="__span-18-54"><a id="__codelineno-18-54" name="__codelineno-18-54" href="#__codelineno-18-54"></a>
</span><span id="__span-18-55"><a id="__codelineno-18-55" name="__codelineno-18-55" href="#__codelineno-18-55"></a><span class="w">  </span><span class="c1">// Retrieve the address of the MessageSender from the deployedContracts.json file</span>
</span><span id="__span-18-56"><a id="__codelineno-18-56" name="__codelineno-18-56" href="#__codelineno-18-56"></a><span class="w">  </span><span class="kd">const</span><span class="w"> </span><span class="nx">avalancheSenderAddress</span><span class="w"> </span><span class="o">=</span><span class="w"> </span><span class="nx">deployedContracts</span><span class="p">.</span><span class="nx">avalanche</span><span class="p">.</span><span class="nx">MessageSender</span><span class="p">;</span>
</span><span id="__span-18-57"><a id="__codelineno-18-57" name="__codelineno-18-57" href="#__codelineno-18-57"></a>
</span><span id="__span-18-58"><a id="__codelineno-18-58" name="__codelineno-18-58" href="#__codelineno-18-58"></a><span class="w">  </span><span class="c1">// Define the source chain ID for Avalanche Fuji</span>
</span><span id="__span-18-59"><a id="__codelineno-18-59" name="__codelineno-18-59" href="#__codelineno-18-59"></a><span class="w">  </span><span class="kd">const</span><span class="w"> </span><span class="nx">sourceChainId</span><span class="w"> </span><span class="o">=</span><span class="w"> </span><span class="mf">6</span><span class="p">;</span>
</span><span id="__span-18-60"><a id="__codelineno-18-60" name="__codelineno-18-60" href="#__codelineno-18-60"></a>
</span><span id="__span-18-61"><a id="__codelineno-18-61" name="__codelineno-18-61" href="#__codelineno-18-61"></a><span class="w">  </span><span class="c1">// Call setRegisteredSender on the MessageReceiver contract</span>
</span><span id="__span-18-62"><a id="__codelineno-18-62" name="__codelineno-18-62" href="#__codelineno-18-62"></a><span class="w">  </span><span class="kd">const</span><span class="w"> </span><span class="nx">tx</span><span class="w"> </span><span class="o">=</span><span class="w"> </span><span class="k">await</span><span class="w"> </span><span class="nx">receiverContract</span><span class="p">.</span><span class="nx">setRegisteredSender</span><span class="p">(</span>
</span><span id="__span-18-63"><a id="__codelineno-18-63" name="__codelineno-18-63" href="#__codelineno-18-63"></a><span class="w">    </span><span class="nx">sourceChainId</span><span class="p">,</span>
</span><span id="__span-18-64"><a id="__codelineno-18-64" name="__codelineno-18-64" href="#__codelineno-18-64"></a><span class="w">    </span><span class="nx">ethers</span><span class="p">.</span><span class="nx">zeroPadValue</span><span class="p">(</span><span class="nx">avalancheSenderAddress</span><span class="p">,</span><span class="w"> </span><span class="mf">32</span><span class="p">)</span>
</span><span id="__span-18-65"><a id="__codelineno-18-65" name="__codelineno-18-65" href="#__codelineno-18-65"></a><span class="w">  </span><span class="p">);</span>
</span><span id="__span-18-66"><a id="__codelineno-18-66" name="__codelineno-18-66" href="#__codelineno-18-66"></a><span class="w">  </span><span class="k">await</span><span class="w"> </span><span class="nx">tx</span><span class="p">.</span><span class="nx">wait</span><span class="p">();</span>
</span><span id="__span-18-67"><a id="__codelineno-18-67" name="__codelineno-18-67" href="#__codelineno-18-67"></a>
</span><span id="__span-18-68"><a id="__codelineno-18-68" name="__codelineno-18-68" href="#__codelineno-18-68"></a><span class="w">  </span><span class="nx">console</span><span class="p">.</span><span class="nx">log</span><span class="p">(</span>
</span><span id="__span-18-69"><a id="__codelineno-18-69" name="__codelineno-18-69" href="#__codelineno-18-69"></a><span class="w">    </span><span class="sb">`Registered MessageSender (</span><span class="si">${</span><span class="nx">avalancheSenderAddress</span><span class="si">}</span><span class="sb">) for Avalanche chain (</span><span class="si">${</span><span class="nx">sourceChainId</span><span class="si">}</span><span class="sb">)`</span>
</span><span id="__span-18-70"><a id="__codelineno-18-70" name="__codelineno-18-70" href="#__codelineno-18-70"></a><span class="w">  </span><span class="p">);</span>
</span><span id="__span-18-71"><a id="__codelineno-18-71" name="__codelineno-18-71" href="#__codelineno-18-71"></a>
</span><span id="__span-18-72"><a id="__codelineno-18-72" name="__codelineno-18-72" href="#__codelineno-18-72"></a><span class="w">  </span><span class="nx">deployedContracts</span><span class="p">.</span><span class="nx">celo</span><span class="w"> </span><span class="o">=</span><span class="w"> </span><span class="p">{</span>
</span><span id="__span-18-73"><a id="__codelineno-18-73" name="__codelineno-18-73" href="#__codelineno-18-73"></a><span class="w">    </span><span class="nx">MessageReceiver</span><span class="o">:</span><span class="w"> </span><span class="nx">receiverContract</span><span class="p">.</span><span class="nx">target</span><span class="p">,</span>
</span><span id="__span-18-74"><a id="__codelineno-18-74" name="__codelineno-18-74" href="#__codelineno-18-74"></a><span class="w">    </span><span class="nx">deployedAt</span><span class="o">:</span><span class="w"> </span><span class="ow">new</span><span class="w"> </span><span class="nb">Date</span><span class="p">().</span><span class="nx">toISOString</span><span class="p">(),</span>
</span><span id="__span-18-75"><a id="__codelineno-18-75" name="__codelineno-18-75" href="#__codelineno-18-75"></a><span class="w">  </span><span class="p">};</span>
</span><span id="__span-18-76"><a id="__codelineno-18-76" name="__codelineno-18-76" href="#__codelineno-18-76"></a>
</span><span id="__span-18-77"><a id="__codelineno-18-77" name="__codelineno-18-77" href="#__codelineno-18-77"></a><span class="w">  </span><span class="nx">fs</span><span class="p">.</span><span class="nx">writeFileSync</span><span class="p">(</span>
</span><span id="__span-18-78"><a id="__codelineno-18-78" name="__codelineno-18-78" href="#__codelineno-18-78"></a><span class="w">    </span><span class="nx">deployedContractsPath</span><span class="p">,</span>
</span><span id="__span-18-79"><a id="__codelineno-18-79" name="__codelineno-18-79" href="#__codelineno-18-79"></a><span class="w">    </span><span class="nb">JSON</span><span class="p">.</span><span class="nx">stringify</span><span class="p">(</span><span class="nx">deployedContracts</span><span class="p">,</span><span class="w"> </span><span class="kc">null</span><span class="p">,</span><span class="w"> </span><span class="mf">2</span><span class="p">)</span>
</span><span id="__span-18-80"><a id="__codelineno-18-80" name="__codelineno-18-80" href="#__codelineno-18-80"></a><span class="w">  </span><span class="p">);</span>
</span><span id="__span-18-81"><a id="__codelineno-18-81" name="__codelineno-18-81" href="#__codelineno-18-81"></a><span class="p">}</span>
</span><span id="__span-18-82"><a id="__codelineno-18-82" name="__codelineno-18-82" href="#__codelineno-18-82"></a>
</span><span id="__span-18-83"><a id="__codelineno-18-83" name="__codelineno-18-83" href="#__codelineno-18-83"></a><span class="nx">main</span><span class="p">().</span><span class="k">catch</span><span class="p">((</span><span class="nx">error</span><span class="p">)</span><span class="w"> </span><span class="p">=&gt;</span><span class="w"> </span><span class="p">{</span>
</span><span id="__span-18-84"><a id="__codelineno-18-84" name="__codelineno-18-84" href="#__codelineno-18-84"></a><span class="w">  </span><span class="nx">console</span><span class="p">.</span><span class="nx">error</span><span class="p">(</span><span class="nx">error</span><span class="p">);</span>
</span><span id="__span-18-85"><a id="__codelineno-18-85" name="__codelineno-18-85" href="#__codelineno-18-85"></a><span class="w">  </span><span class="nx">process</span><span class="p">.</span><span class="nx">exit</span><span class="p">(</span><span class="mf">1</span><span class="p">);</span>
</span><span id="__span-18-86"><a id="__codelineno-18-86" name="__codelineno-18-86" href="#__codelineno-18-86"></a><span class="p">});</span>
</span></code></pre></div>
</details>
<h3 id="deploy-the-sender-contract">Deploy the Sender Contract</h3>
<p>The sender contract will handle quoting and sending messages cross-chain.</p>
<ol>
<li>
<p>Run the following command to deploy the sender contract:</p>
<div class="language-bash highlight"><pre><span></span><code><span id="__span-19-1"><a id="__codelineno-19-1" name="__codelineno-19-1" href="#__codelineno-19-1"></a>npm<span class="w"> </span>run<span class="w"> </span>deploy:sender
</span></code></pre></div>
</li>
<li>
<p>Once deployed, the contract address will be displayed. You may check the contract on the <a href="https://testnet.snowtrace.io/" target="_blank">Avalanche Fuji Explorer</a></p>
</li>
</ol>
<div id="termynal" data-termynal>
    <span data-ty="input"
        ><span class="file-path"></span>npm run deploy:sender</span
    >
    <span data-ty> > wormhole-cross-chain@1.0.0 deploy:sender</span>
    <span data-ty> > node script/deploySender.js</span>
    <span data-ty>
        MessageSender deployed to: 0xf5c474f335fFf617fA6FD04DCBb17E20ee0cEfb1</span
    >
    <span data-ty="input"><span class="file-path"></span></span>
</div>

<h3 id="deploy-the-receiver-contract">Deploy the Receiver Contract</h3>
<p>The receiver contract listens for cross-chain messages and logs them when received.</p>
<ol>
<li>
<p>Deploy the receiver contract with this command:</p>
<div class="language-bash highlight"><pre><span></span><code><span id="__span-20-1"><a id="__codelineno-20-1" name="__codelineno-20-1" href="#__codelineno-20-1"></a>npm<span class="w"> </span>run<span class="w"> </span>deploy:receiver
</span></code></pre></div>
</li>
<li>
<p>After deployment, note down the contract address. You may check the contract on the <a href="https://alfajores.celoscan.io/" target="_blank">Celo Alfajores Explorer</a>.</p>
</li>
</ol>
<h2 id="send-a-cross-chain-message">Send a Cross-Chain Message</h2>
<p>Now that both the sender and receiver contracts are deployed, let's move on to the next exciting step: sending a cross-chain message from Avalanche Fuji to Celo Alfajores.</p>
<p>In this example, we will use the <code>sendMessage.js</code> script to transmit a message from the sender contract on Avalanche to the receiver contract on Celo. The script uses <a href="https://docs.ethers.org/v6/" target="_blank">Ethers.js</a> to interact with the deployed contracts, calculate the cross-chain cost dynamically, and handle the transaction.</p>
<p>Let's break down the script step by step.</p>
<ol>
<li>
<p><strong>Load configuration files</strong></p>
<ol>
<li><strong><code>chains.json</code></strong> - contains details about the supported TestNet chains, such as RPC URLs and relayer addresses</li>
<li><strong><code>deployedContracts.json</code></strong> - stores the addresses of the deployed sender and receiver contracts. This file is dynamically updated when contracts are deployed, but users can also manually add their own deployed contract addresses if needed</li>
</ol>
<div class="language-javascript highlight"><pre><span></span><code><span id="__span-21-1"><a id="__codelineno-21-1" name="__codelineno-21-1" href="#__codelineno-21-1"></a><span class="w">  </span><span class="kd">const</span><span class="w"> </span><span class="nx">chains</span><span class="w"> </span><span class="o">=</span><span class="w"> </span><span class="nb">JSON</span><span class="p">.</span><span class="nx">parse</span><span class="p">(</span>
</span><span id="__span-21-2"><a id="__codelineno-21-2" name="__codelineno-21-2" href="#__codelineno-21-2"></a><span class="w">    </span><span class="nx">fs</span><span class="p">.</span><span class="nx">readFileSync</span><span class="p">(</span><span class="nx">path</span><span class="p">.</span><span class="nx">resolve</span><span class="p">(</span><span class="nx">__dirname</span><span class="p">,</span><span class="w"> </span><span class="s1">&#39;../deploy-config/chains.json&#39;</span><span class="p">))</span>
</span><span id="__span-21-3"><a id="__codelineno-21-3" name="__codelineno-21-3" href="#__codelineno-21-3"></a><span class="w">  </span><span class="p">);</span>
</span><span id="__span-21-4"><a id="__codelineno-21-4" name="__codelineno-21-4" href="#__codelineno-21-4"></a>
</span><span id="__span-21-5"><a id="__codelineno-21-5" name="__codelineno-21-5" href="#__codelineno-21-5"></a><span class="w">  </span><span class="kd">const</span><span class="w"> </span><span class="nx">deployedContracts</span><span class="w"> </span><span class="o">=</span><span class="w"> </span><span class="nb">JSON</span><span class="p">.</span><span class="nx">parse</span><span class="p">(</span>
</span><span id="__span-21-6"><a id="__codelineno-21-6" name="__codelineno-21-6" href="#__codelineno-21-6"></a><span class="w">    </span><span class="nx">fs</span><span class="p">.</span><span class="nx">readFileSync</span><span class="p">(</span>
</span><span id="__span-21-7"><a id="__codelineno-21-7" name="__codelineno-21-7" href="#__codelineno-21-7"></a><span class="w">      </span><span class="nx">path</span><span class="p">.</span><span class="nx">resolve</span><span class="p">(</span><span class="nx">__dirname</span><span class="p">,</span><span class="w"> </span><span class="s1">&#39;../deploy-config/deployedContracts.json&#39;</span><span class="p">)</span>
</span><span id="__span-21-8"><a id="__codelineno-21-8" name="__codelineno-21-8" href="#__codelineno-21-8"></a><span class="w">    </span><span class="p">)</span>
</span><span id="__span-21-9"><a id="__codelineno-21-9" name="__codelineno-21-9" href="#__codelineno-21-9"></a><span class="w">  </span><span class="p">);</span>
</span></code></pre></div>
</li>
<li>
<p><strong>Configure the provider and signer</strong> - the script first reads the chain configurations and extracts the contract addresses. One essential step in interacting with a blockchain is setting up a <em>provider</em>. A provider is your connection to the blockchain network. It allows your script to interact with the blockchain, retrieve data, and send transactions. In this case, we're using a JSON-RPC provider</p>
<p>Next, we configure the wallet, which will be used to sign transactions. The wallet is created using the private key and the provider. This ensures that all transactions sent from this wallet are broadcast to the Avalanche Fuji network:</p>
<div class="language-javascript highlight"><pre><span></span><code><span id="__span-22-1"><a id="__codelineno-22-1" name="__codelineno-22-1" href="#__codelineno-22-1"></a><span class="w">  </span><span class="kd">const</span><span class="w"> </span><span class="nx">provider</span><span class="w"> </span><span class="o">=</span><span class="w"> </span><span class="ow">new</span><span class="w"> </span><span class="nx">ethers</span><span class="p">.</span><span class="nx">JsonRpcProvider</span><span class="p">(</span><span class="nx">avalancheChain</span><span class="p">.</span><span class="nx">rpc</span><span class="p">);</span>
</span><span id="__span-22-2"><a id="__codelineno-22-2" name="__codelineno-22-2" href="#__codelineno-22-2"></a><span class="w">  </span><span class="kd">const</span><span class="w"> </span><span class="nx">wallet</span><span class="w"> </span><span class="o">=</span><span class="w"> </span><span class="ow">new</span><span class="w"> </span><span class="nx">ethers</span><span class="p">.</span><span class="nx">Wallet</span><span class="p">(</span><span class="nx">process</span><span class="p">.</span><span class="nx">env</span><span class="p">.</span><span class="nx">PRIVATE_KEY</span><span class="p">,</span><span class="w"> </span><span class="nx">provider</span><span class="p">);</span>
</span></code></pre></div>
<p>After setting up the wallet, the script loads the ABI for the <code>MessageSender.sol</code> contract and creates an instance of it:</p>
<div class="language-javascript highlight"><pre><span></span><code><span id="__span-23-1"><a id="__codelineno-23-1" name="__codelineno-23-1" href="#__codelineno-23-1"></a><span class="w">  </span><span class="kd">const</span><span class="w"> </span><span class="nx">messageSenderJson</span><span class="w"> </span><span class="o">=</span><span class="w"> </span><span class="nb">JSON</span><span class="p">.</span><span class="nx">parse</span><span class="p">(</span>
</span><span id="__span-23-2"><a id="__codelineno-23-2" name="__codelineno-23-2" href="#__codelineno-23-2"></a><span class="w">    </span><span class="nx">fs</span><span class="p">.</span><span class="nx">readFileSync</span><span class="p">(</span>
</span><span id="__span-23-3"><a id="__codelineno-23-3" name="__codelineno-23-3" href="#__codelineno-23-3"></a><span class="w">      </span><span class="nx">path</span><span class="p">.</span><span class="nx">resolve</span><span class="p">(</span><span class="nx">__dirname</span><span class="p">,</span><span class="w"> </span><span class="s1">&#39;../out/MessageSender.sol/MessageSender.json&#39;</span><span class="p">),</span>
</span><span id="__span-23-4"><a id="__codelineno-23-4" name="__codelineno-23-4" href="#__codelineno-23-4"></a><span class="w">      </span><span class="s1">&#39;utf8&#39;</span>
</span><span id="__span-23-5"><a id="__codelineno-23-5" name="__codelineno-23-5" href="#__codelineno-23-5"></a><span class="w">    </span><span class="p">)</span>
</span><span id="__span-23-6"><a id="__codelineno-23-6" name="__codelineno-23-6" href="#__codelineno-23-6"></a><span class="w">  </span><span class="p">);</span>
</span></code></pre></div>
</li>
<li>
<p><strong>Set up the message details</strong> - the next part of the script defines the target chain (Celo) and the target address (the receiver contract on Celo):</p>
<div class="language-javascript highlight"><pre><span></span><code><span id="__span-24-1"><a id="__codelineno-24-1" name="__codelineno-24-1" href="#__codelineno-24-1"></a><span class="w">  </span><span class="kd">const</span><span class="w"> </span><span class="nx">targetChain</span><span class="w"> </span><span class="o">=</span><span class="w"> </span><span class="mf">14</span><span class="p">;</span><span class="w"> </span><span class="c1">// Wormhole chain ID for Celo Alfajores</span>
</span><span id="__span-24-2"><a id="__codelineno-24-2" name="__codelineno-24-2" href="#__codelineno-24-2"></a><span class="w">  </span><span class="kd">const</span><span class="w"> </span><span class="nx">targetAddress</span><span class="w"> </span><span class="o">=</span><span class="w"> </span><span class="nx">deployedContracts</span><span class="p">.</span><span class="nx">celo</span><span class="p">.</span><span class="nx">MessageReceiver</span><span class="p">;</span>
</span></code></pre></div>
<p>You can customize the message that will be sent across chains:</p>
<div class="language-javascript highlight"><pre><span></span><code><span id="__span-25-1"><a id="__codelineno-25-1" name="__codelineno-25-1" href="#__codelineno-25-1"></a><span class="w">  </span><span class="kd">const</span><span class="w"> </span><span class="nx">message</span><span class="w"> </span><span class="o">=</span><span class="w"> </span><span class="s1">&#39;Hello from Avalanche to Celo!&#39;</span><span class="p">;</span>
</span></code></pre></div>
</li>
<li>
<p><strong>Estimate cross-chain cost</strong> - before sending the message, we dynamically calculate the cross-chain cost using the <code>quoteCrossChainCost</code> function:</p>
<div class="language-javascript highlight"><pre><span></span><code><span id="__span-26-1"><a id="__codelineno-26-1" name="__codelineno-26-1" href="#__codelineno-26-1"></a><span class="w">  </span><span class="kd">const</span><span class="w"> </span><span class="nx">txCost</span><span class="w"> </span><span class="o">=</span><span class="w"> </span><span class="k">await</span><span class="w"> </span><span class="nx">MessageSender</span><span class="p">.</span><span class="nx">quoteCrossChainCost</span><span class="p">(</span><span class="nx">targetChain</span><span class="p">);</span>
</span></code></pre></div>
<p>This ensures that the transaction includes enough funds to cover the gas fees for the cross-chain message.</p>
</li>
<li>
<p><strong>Send a message</strong> - with everything set up, the message is sent using the <code>sendMessage</code> function:</p>
<div class="language-javascript highlight"><pre><span></span><code><span id="__span-27-1"><a id="__codelineno-27-1" name="__codelineno-27-1" href="#__codelineno-27-1"></a><span class="w">  </span><span class="kd">const</span><span class="w"> </span><span class="nx">tx</span><span class="w"> </span><span class="o">=</span><span class="w"> </span><span class="k">await</span><span class="w"> </span><span class="nx">MessageSender</span><span class="p">.</span><span class="nx">sendMessage</span><span class="p">(</span>
</span><span id="__span-27-2"><a id="__codelineno-27-2" name="__codelineno-27-2" href="#__codelineno-27-2"></a><span class="w">    </span><span class="nx">targetChain</span><span class="p">,</span>
</span><span id="__span-27-3"><a id="__codelineno-27-3" name="__codelineno-27-3" href="#__codelineno-27-3"></a><span class="w">    </span><span class="nx">targetAddress</span><span class="p">,</span>
</span><span id="__span-27-4"><a id="__codelineno-27-4" name="__codelineno-27-4" href="#__codelineno-27-4"></a><span class="w">    </span><span class="nx">message</span><span class="p">,</span>
</span><span id="__span-27-5"><a id="__codelineno-27-5" name="__codelineno-27-5" href="#__codelineno-27-5"></a><span class="w">    </span><span class="p">{</span>
</span><span id="__span-27-6"><a id="__codelineno-27-6" name="__codelineno-27-6" href="#__codelineno-27-6"></a><span class="w">      </span><span class="nx">value</span><span class="o">:</span><span class="w"> </span><span class="nx">txCost</span><span class="p">,</span>
</span><span id="__span-27-7"><a id="__codelineno-27-7" name="__codelineno-27-7" href="#__codelineno-27-7"></a><span class="w">    </span><span class="p">}</span>
</span><span id="__span-27-8"><a id="__codelineno-27-8" name="__codelineno-27-8" href="#__codelineno-27-8"></a><span class="w">  </span><span class="p">);</span>
</span></code></pre></div>
<p>After sending, the script waits for the transaction to be confirmed:</p>
<div class="language-javascript highlight"><pre><span></span><code><span id="__span-28-1"><a id="__codelineno-28-1" name="__codelineno-28-1" href="#__codelineno-28-1"></a><span class="w">  </span><span class="k">await</span><span class="w"> </span><span class="nx">tx</span><span class="p">.</span><span class="nx">wait</span><span class="p">();</span>
</span></code></pre></div>
</li>
<li>
<p><strong>Run the script</strong> - to send the message, run the following command:</p>
<div class="language-bash highlight"><pre><span></span><code><span id="__span-29-1"><a id="__codelineno-29-1" name="__codelineno-29-1" href="#__codelineno-29-1"></a>npm<span class="w"> </span>run<span class="w"> </span>send:message
</span></code></pre></div>
</li>
</ol>
<p>If everything is set up correctly, the message will be sent from the Avalanche Fuji TestNet to the Celo Alfajores TestNet. You can monitor the transaction and verify that the message was received on Celo using the <a href="https://wormholescan.io/#/?network=TESTNET" target="_blank">Wormhole Explorer</a>.</p>
<p>The console should output something similar to this:</p>
<div id="termynal" data-termynal>
    <span data-ty="input"
        ><span class="file-path"></span>npm run send:message</span
    >
    <span data-ty> > wormhole-cross-chain@1.0.0 send:message</span>
    <span data-ty> > node script/sendMessage.js</span>
    <span data-ty
        >Sender Contract Address: 0xD720BFF42a0960cfF1118454A907a44dB358f2b1</span
    >
    <span data-ty
        >Receiver Contract Address: 0x692550997C252cC5044742D1A2BD91E4f4b46D39</span
    >
    <span data-ty>...</span>
    <span data-ty>Transaction sent, waiting for confirmation...</span>
    <span data-ty>...</span>
    <span data-ty
        >Message sent! Transaction hash:
        0x9d359a66ba42baced80062229c0b02b4f523fe304aff3473dcf53117aee13fb6</span
    >
    <span data-ty
        >You may see the transaction status on the Wormhole Explorer:
        https://wormholescan.io/#/tx/0x9d359a66ba42baced80062229c0b02b4f523fe304aff3473dcf53117aee13fb6?network=TESTNET</span
    >
    <span data-ty="input"><span class="file-path"></span></span>
</div>

<p>You can find the full code for the <code>sendMessage.js</code> below.</p>
<details class="code">
<summary>sendMessage.js</summary>
<div class="language-solidity highlight"><pre><span></span><code><span id="__span-30-1"><a id="__codelineno-30-1" name="__codelineno-30-1" href="#__codelineno-30-1"></a>const<span class="w"> </span><span class="p">{</span><span class="w"> </span>ethers<span class="w"> </span><span class="p">}</span><span class="w"> </span><span class="o">=</span><span class="w"> </span><span class="kt">require</span><span class="p">(</span><span class="s1">&#39;ethers&#39;</span><span class="p">);</span>
</span><span id="__span-30-2"><a id="__codelineno-30-2" name="__codelineno-30-2" href="#__codelineno-30-2"></a>const<span class="w"> </span>fs<span class="w"> </span><span class="o">=</span><span class="w"> </span><span class="kt">require</span><span class="p">(</span><span class="s1">&#39;fs&#39;</span><span class="p">);</span>
</span><span id="__span-30-3"><a id="__codelineno-30-3" name="__codelineno-30-3" href="#__codelineno-30-3"></a>const<span class="w"> </span>path<span class="w"> </span><span class="o">=</span><span class="w"> </span><span class="kt">require</span><span class="p">(</span><span class="s1">&#39;path&#39;</span><span class="p">);</span>
</span><span id="__span-30-4"><a id="__codelineno-30-4" name="__codelineno-30-4" href="#__codelineno-30-4"></a><span class="kt">require</span><span class="p">(</span><span class="s1">&#39;dotenv&#39;</span><span class="p">).</span>config<span class="p">();</span>
</span><span id="__span-30-5"><a id="__codelineno-30-5" name="__codelineno-30-5" href="#__codelineno-30-5"></a>
</span><span id="__span-30-6"><a id="__codelineno-30-6" name="__codelineno-30-6" href="#__codelineno-30-6"></a>async<span class="w"> </span><span class="kt">function</span><span class="w"> </span><span class="nv">main</span><span class="p">()</span><span class="w"> </span><span class="p">{</span>
</span><span id="__span-30-7"><a id="__codelineno-30-7" name="__codelineno-30-7" href="#__codelineno-30-7"></a><span class="w">  </span><span class="c1">// Load the chain configuration and deployed contract addresses</span>
</span><span id="__span-30-8"><a id="__codelineno-30-8" name="__codelineno-30-8" href="#__codelineno-30-8"></a><span class="w">  </span>const<span class="w"> </span>chains<span class="w"> </span><span class="o">=</span><span class="w"> </span>JSON<span class="p">.</span>parse<span class="p">(</span>
</span><span id="__span-30-9"><a id="__codelineno-30-9" name="__codelineno-30-9" href="#__codelineno-30-9"></a><span class="w">    </span>fs<span class="p">.</span>readFileSync<span class="p">(</span>path<span class="p">.</span>resolve<span class="p">(</span>__dirname<span class="p">,</span><span class="w"> </span><span class="s1">&#39;../deploy-config/chains.json&#39;</span><span class="p">))</span>
</span><span id="__span-30-10"><a id="__codelineno-30-10" name="__codelineno-30-10" href="#__codelineno-30-10"></a><span class="w">  </span><span class="p">);</span>
</span><span id="__span-30-11"><a id="__codelineno-30-11" name="__codelineno-30-11" href="#__codelineno-30-11"></a>
</span><span id="__span-30-12"><a id="__codelineno-30-12" name="__codelineno-30-12" href="#__codelineno-30-12"></a><span class="w">  </span>const<span class="w"> </span>deployedContracts<span class="w"> </span><span class="o">=</span><span class="w"> </span>JSON<span class="p">.</span>parse<span class="p">(</span>
</span><span id="__span-30-13"><a id="__codelineno-30-13" name="__codelineno-30-13" href="#__codelineno-30-13"></a><span class="w">    </span>fs<span class="p">.</span>readFileSync<span class="p">(</span>
</span><span id="__span-30-14"><a id="__codelineno-30-14" name="__codelineno-30-14" href="#__codelineno-30-14"></a><span class="w">      </span>path<span class="p">.</span>resolve<span class="p">(</span>__dirname<span class="p">,</span><span class="w"> </span><span class="s1">&#39;../deploy-config/deployedContracts.json&#39;</span><span class="p">)</span>
</span><span id="__span-30-15"><a id="__codelineno-30-15" name="__codelineno-30-15" href="#__codelineno-30-15"></a><span class="w">    </span><span class="p">)</span>
</span><span id="__span-30-16"><a id="__codelineno-30-16" name="__codelineno-30-16" href="#__codelineno-30-16"></a><span class="w">  </span><span class="p">);</span>
</span><span id="__span-30-17"><a id="__codelineno-30-17" name="__codelineno-30-17" href="#__codelineno-30-17"></a>
</span><span id="__span-30-18"><a id="__codelineno-30-18" name="__codelineno-30-18" href="#__codelineno-30-18"></a><span class="w">  </span>console<span class="p">.</span>log<span class="p">(</span>
</span><span id="__span-30-19"><a id="__codelineno-30-19" name="__codelineno-30-19" href="#__codelineno-30-19"></a><span class="w">    </span><span class="s1">&#39;Sender Contract Address: &#39;</span><span class="p">,</span>
</span><span id="__span-30-20"><a id="__codelineno-30-20" name="__codelineno-30-20" href="#__codelineno-30-20"></a><span class="w">    </span>deployedContracts<span class="p">.</span>avalanche<span class="p">.</span>MessageSender
</span><span id="__span-30-21"><a id="__codelineno-30-21" name="__codelineno-30-21" href="#__codelineno-30-21"></a><span class="w">  </span><span class="p">);</span>
</span><span id="__span-30-22"><a id="__codelineno-30-22" name="__codelineno-30-22" href="#__codelineno-30-22"></a><span class="w">  </span>console<span class="p">.</span>log<span class="p">(</span>
</span><span id="__span-30-23"><a id="__codelineno-30-23" name="__codelineno-30-23" href="#__codelineno-30-23"></a><span class="w">    </span><span class="s1">&#39;Receiver Contract Address: &#39;</span><span class="p">,</span>
</span><span id="__span-30-24"><a id="__codelineno-30-24" name="__codelineno-30-24" href="#__codelineno-30-24"></a><span class="w">    </span>deployedContracts<span class="p">.</span>celo<span class="p">.</span>MessageReceiver
</span><span id="__span-30-25"><a id="__codelineno-30-25" name="__codelineno-30-25" href="#__codelineno-30-25"></a><span class="w">  </span><span class="p">);</span>
</span><span id="__span-30-26"><a id="__codelineno-30-26" name="__codelineno-30-26" href="#__codelineno-30-26"></a><span class="w">  </span>console<span class="p">.</span>log<span class="p">(</span><span class="s1">&#39;...&#39;</span><span class="p">);</span>
</span><span id="__span-30-27"><a id="__codelineno-30-27" name="__codelineno-30-27" href="#__codelineno-30-27"></a>
</span><span id="__span-30-28"><a id="__codelineno-30-28" name="__codelineno-30-28" href="#__codelineno-30-28"></a><span class="w">  </span><span class="c1">// Get the Avalanche Fuji configuration</span>
</span><span id="__span-30-29"><a id="__codelineno-30-29" name="__codelineno-30-29" href="#__codelineno-30-29"></a><span class="w">  </span>const<span class="w"> </span>avalancheChain<span class="w"> </span><span class="o">=</span><span class="w"> </span>chains<span class="p">.</span>chains<span class="p">.</span>find<span class="p">((</span>chain<span class="p">)</span><span class="w"> </span><span class="o">=&gt;</span>
</span><span id="__span-30-30"><a id="__codelineno-30-30" name="__codelineno-30-30" href="#__codelineno-30-30"></a><span class="w">    </span>chain<span class="p">.</span>description<span class="p">.</span>includes<span class="p">(</span><span class="s1">&#39;Avalanche testnet&#39;</span><span class="p">)</span>
</span><span id="__span-30-31"><a id="__codelineno-30-31" name="__codelineno-30-31" href="#__codelineno-30-31"></a><span class="w">  </span><span class="p">);</span>
</span><span id="__span-30-32"><a id="__codelineno-30-32" name="__codelineno-30-32" href="#__codelineno-30-32"></a>
</span><span id="__span-30-33"><a id="__codelineno-30-33" name="__codelineno-30-33" href="#__codelineno-30-33"></a><span class="w">  </span><span class="c1">// Set up the provider and wallet</span>
</span><span id="__span-30-34"><a id="__codelineno-30-34" name="__codelineno-30-34" href="#__codelineno-30-34"></a><span class="w">  </span>const<span class="w"> </span>provider<span class="w"> </span><span class="o">=</span><span class="w"> </span><span class="kt">new</span><span class="w"> </span>ethers<span class="p">.</span>JsonRpcProvider<span class="p">(</span>avalancheChain<span class="p">.</span>rpc<span class="p">);</span>
</span><span id="__span-30-35"><a id="__codelineno-30-35" name="__codelineno-30-35" href="#__codelineno-30-35"></a><span class="w">  </span>const<span class="w"> </span>wallet<span class="w"> </span><span class="o">=</span><span class="w"> </span><span class="kt">new</span><span class="w"> </span>ethers<span class="p">.</span>Wallet<span class="p">(</span>process<span class="p">.</span>env<span class="p">.</span>PRIVATE_KEY<span class="p">,</span><span class="w"> </span>provider<span class="p">);</span>
</span><span id="__span-30-36"><a id="__codelineno-30-36" name="__codelineno-30-36" href="#__codelineno-30-36"></a>
</span><span id="__span-30-37"><a id="__codelineno-30-37" name="__codelineno-30-37" href="#__codelineno-30-37"></a><span class="w">  </span><span class="c1">// Load the ABI of the MessageSender contract</span>
</span><span id="__span-30-38"><a id="__codelineno-30-38" name="__codelineno-30-38" href="#__codelineno-30-38"></a><span class="w">  </span>const<span class="w"> </span>messageSenderJson<span class="w"> </span><span class="o">=</span><span class="w"> </span>JSON<span class="p">.</span>parse<span class="p">(</span>
</span><span id="__span-30-39"><a id="__codelineno-30-39" name="__codelineno-30-39" href="#__codelineno-30-39"></a><span class="w">    </span>fs<span class="p">.</span>readFileSync<span class="p">(</span>
</span><span id="__span-30-40"><a id="__codelineno-30-40" name="__codelineno-30-40" href="#__codelineno-30-40"></a><span class="w">      </span>path<span class="p">.</span>resolve<span class="p">(</span>__dirname<span class="p">,</span><span class="w"> </span><span class="s1">&#39;../out/MessageSender.sol/MessageSender.json&#39;</span><span class="p">),</span>
</span><span id="__span-30-41"><a id="__codelineno-30-41" name="__codelineno-30-41" href="#__codelineno-30-41"></a><span class="w">      </span><span class="s1">&#39;utf8&#39;</span>
</span><span id="__span-30-42"><a id="__codelineno-30-42" name="__codelineno-30-42" href="#__codelineno-30-42"></a><span class="w">    </span><span class="p">)</span>
</span><span id="__span-30-43"><a id="__codelineno-30-43" name="__codelineno-30-43" href="#__codelineno-30-43"></a><span class="w">  </span><span class="p">);</span>
</span><span id="__span-30-44"><a id="__codelineno-30-44" name="__codelineno-30-44" href="#__codelineno-30-44"></a>
</span><span id="__span-30-45"><a id="__codelineno-30-45" name="__codelineno-30-45" href="#__codelineno-30-45"></a><span class="w">  </span>const<span class="w"> </span>abi<span class="w"> </span><span class="o">=</span><span class="w"> </span>messageSenderJson<span class="p">.</span>abi<span class="p">;</span>
</span><span id="__span-30-46"><a id="__codelineno-30-46" name="__codelineno-30-46" href="#__codelineno-30-46"></a>
</span><span id="__span-30-47"><a id="__codelineno-30-47" name="__codelineno-30-47" href="#__codelineno-30-47"></a><span class="w">  </span><span class="c1">// Create a contract instance for MessageSender</span>
</span><span id="__span-30-48"><a id="__codelineno-30-48" name="__codelineno-30-48" href="#__codelineno-30-48"></a><span class="w">  </span>const<span class="w"> </span>MessageSender<span class="w"> </span><span class="o">=</span><span class="w"> </span><span class="kt">new</span><span class="w"> </span>ethers<span class="p">.</span>Contract<span class="p">(</span>
</span><span id="__span-30-49"><a id="__codelineno-30-49" name="__codelineno-30-49" href="#__codelineno-30-49"></a><span class="w">    </span>deployedContracts<span class="p">.</span>avalanche<span class="p">.</span>MessageSender<span class="p">,</span>
</span><span id="__span-30-50"><a id="__codelineno-30-50" name="__codelineno-30-50" href="#__codelineno-30-50"></a><span class="w">    </span>abi<span class="p">,</span>
</span><span id="__span-30-51"><a id="__codelineno-30-51" name="__codelineno-30-51" href="#__codelineno-30-51"></a><span class="w">    </span>wallet
</span><span id="__span-30-52"><a id="__codelineno-30-52" name="__codelineno-30-52" href="#__codelineno-30-52"></a><span class="w">  </span><span class="p">);</span>
</span><span id="__span-30-53"><a id="__codelineno-30-53" name="__codelineno-30-53" href="#__codelineno-30-53"></a>
</span><span id="__span-30-54"><a id="__codelineno-30-54" name="__codelineno-30-54" href="#__codelineno-30-54"></a><span class="w">  </span><span class="c1">// Define the target chain and target address (the Celo receiver contract)</span>
</span><span id="__span-30-55"><a id="__codelineno-30-55" name="__codelineno-30-55" href="#__codelineno-30-55"></a><span class="w">  </span>const<span class="w"> </span>targetChain<span class="w"> </span><span class="o">=</span><span class="w"> </span><span class="m m-Decimal">14</span><span class="p">;</span><span class="w"> </span><span class="c1">// Wormhole chain ID for Celo Alfajores</span>
</span><span id="__span-30-56"><a id="__codelineno-30-56" name="__codelineno-30-56" href="#__codelineno-30-56"></a><span class="w">  </span>const<span class="w"> </span>targetAddress<span class="w"> </span><span class="o">=</span><span class="w"> </span>deployedContracts<span class="p">.</span>celo<span class="p">.</span>MessageReceiver<span class="p">;</span>
</span><span id="__span-30-57"><a id="__codelineno-30-57" name="__codelineno-30-57" href="#__codelineno-30-57"></a>
</span><span id="__span-30-58"><a id="__codelineno-30-58" name="__codelineno-30-58" href="#__codelineno-30-58"></a><span class="w">  </span><span class="c1">// The message you want to send</span>
</span><span id="__span-30-59"><a id="__codelineno-30-59" name="__codelineno-30-59" href="#__codelineno-30-59"></a><span class="w">  </span>const<span class="w"> </span>message<span class="w"> </span><span class="o">=</span><span class="w"> </span><span class="s1">&#39;Hello from Avalanche to Celo!&#39;</span><span class="p">;</span>
</span><span id="__span-30-60"><a id="__codelineno-30-60" name="__codelineno-30-60" href="#__codelineno-30-60"></a>
</span><span id="__span-30-61"><a id="__codelineno-30-61" name="__codelineno-30-61" href="#__codelineno-30-61"></a><span class="w">  </span><span class="c1">// Dynamically quote the cross-chain cost</span>
</span><span id="__span-30-62"><a id="__codelineno-30-62" name="__codelineno-30-62" href="#__codelineno-30-62"></a><span class="w">  </span>const<span class="w"> </span>txCost<span class="w"> </span><span class="o">=</span><span class="w"> </span>await<span class="w"> </span>MessageSender<span class="p">.</span>quoteCrossChainCost<span class="p">(</span>targetChain<span class="p">);</span>
</span><span id="__span-30-63"><a id="__codelineno-30-63" name="__codelineno-30-63" href="#__codelineno-30-63"></a>
</span><span id="__span-30-64"><a id="__codelineno-30-64" name="__codelineno-30-64" href="#__codelineno-30-64"></a><span class="w">  </span><span class="c1">// Send the message (make sure to send enough gas in the transaction)</span>
</span><span id="__span-30-65"><a id="__codelineno-30-65" name="__codelineno-30-65" href="#__codelineno-30-65"></a><span class="w">  </span>const<span class="w"> </span><span class="kt">tx</span><span class="w"> </span><span class="o">=</span><span class="w"> </span>await<span class="w"> </span>MessageSender<span class="p">.</span>sendMessage<span class="p">(</span>
</span><span id="__span-30-66"><a id="__codelineno-30-66" name="__codelineno-30-66" href="#__codelineno-30-66"></a><span class="w">    </span>targetChain<span class="p">,</span>
</span><span id="__span-30-67"><a id="__codelineno-30-67" name="__codelineno-30-67" href="#__codelineno-30-67"></a><span class="w">    </span>targetAddress<span class="p">,</span>
</span><span id="__span-30-68"><a id="__codelineno-30-68" name="__codelineno-30-68" href="#__codelineno-30-68"></a><span class="w">    </span>message<span class="p">,</span>
</span><span id="__span-30-69"><a id="__codelineno-30-69" name="__codelineno-30-69" href="#__codelineno-30-69"></a><span class="w">    </span><span class="p">{</span>
</span><span id="__span-30-70"><a id="__codelineno-30-70" name="__codelineno-30-70" href="#__codelineno-30-70"></a><span class="w">      </span>value<span class="o">:</span><span class="w"> </span>txCost<span class="p">,</span>
</span><span id="__span-30-71"><a id="__codelineno-30-71" name="__codelineno-30-71" href="#__codelineno-30-71"></a><span class="w">    </span><span class="p">}</span>
</span><span id="__span-30-72"><a id="__codelineno-30-72" name="__codelineno-30-72" href="#__codelineno-30-72"></a><span class="w">  </span><span class="p">);</span>
</span><span id="__span-30-73"><a id="__codelineno-30-73" name="__codelineno-30-73" href="#__codelineno-30-73"></a>
</span><span id="__span-30-74"><a id="__codelineno-30-74" name="__codelineno-30-74" href="#__codelineno-30-74"></a><span class="w">  </span>console<span class="p">.</span>log<span class="p">(</span><span class="s1">&#39;Transaction sent, waiting for confirmation...&#39;</span><span class="p">);</span>
</span><span id="__span-30-75"><a id="__codelineno-30-75" name="__codelineno-30-75" href="#__codelineno-30-75"></a><span class="w">  </span>await<span class="w"> </span><span class="k">tx.wait</span><span class="p">();</span>
</span><span id="__span-30-76"><a id="__codelineno-30-76" name="__codelineno-30-76" href="#__codelineno-30-76"></a><span class="w">  </span>console<span class="p">.</span>log<span class="p">(</span><span class="s1">&#39;...&#39;</span><span class="p">);</span>
</span><span id="__span-30-77"><a id="__codelineno-30-77" name="__codelineno-30-77" href="#__codelineno-30-77"></a>
</span><span id="__span-30-78"><a id="__codelineno-30-78" name="__codelineno-30-78" href="#__codelineno-30-78"></a><span class="w">  </span>console<span class="p">.</span>log<span class="p">(</span><span class="s1">&#39;Message sent! Transaction hash:&#39;</span><span class="p">,</span><span class="w"> </span><span class="k">tx.hash</span><span class="p">);</span>
</span><span id="__span-30-79"><a id="__codelineno-30-79" name="__codelineno-30-79" href="#__codelineno-30-79"></a><span class="w">  </span>console<span class="p">.</span>log<span class="p">(</span>
</span><span id="__span-30-80"><a id="__codelineno-30-80" name="__codelineno-30-80" href="#__codelineno-30-80"></a><span class="w">    </span><span class="err">`</span>You<span class="w"> </span>may<span class="w"> </span>see<span class="w"> </span>the<span class="w"> </span>transaction<span class="w"> </span>status<span class="w"> </span>on<span class="w"> </span>the<span class="w"> </span>Wormhole<span class="w"> </span>Explorer<span class="o">:</span><span class="w"> </span>https<span class="o">:</span><span class="c1">//wormholescan.io/#/tx/${tx.hash}?network=TESTNET`</span>
</span><span id="__span-30-81"><a id="__codelineno-30-81" name="__codelineno-30-81" href="#__codelineno-30-81"></a><span class="w">  </span><span class="p">);</span>
</span><span id="__span-30-82"><a id="__codelineno-30-82" name="__codelineno-30-82" href="#__codelineno-30-82"></a><span class="p">}</span>
</span><span id="__span-30-83"><a id="__codelineno-30-83" name="__codelineno-30-83" href="#__codelineno-30-83"></a>
</span><span id="__span-30-84"><a id="__codelineno-30-84" name="__codelineno-30-84" href="#__codelineno-30-84"></a>main<span class="p">().</span>catch<span class="p">((</span>error<span class="p">)</span><span class="w"> </span><span class="o">=&gt;</span><span class="w"> </span><span class="p">{</span>
</span><span id="__span-30-85"><a id="__codelineno-30-85" name="__codelineno-30-85" href="#__codelineno-30-85"></a><span class="w">  </span>console<span class="p">.</span>error<span class="p">(</span>error<span class="p">);</span>
</span><span id="__span-30-86"><a id="__codelineno-30-86" name="__codelineno-30-86" href="#__codelineno-30-86"></a><span class="w">  </span>process<span class="p">.</span>exit<span class="p">(</span><span class="m m-Decimal">1</span><span class="p">);</span>
</span><span id="__span-30-87"><a id="__codelineno-30-87" name="__codelineno-30-87" href="#__codelineno-30-87"></a><span class="p">});</span>
</span></code></pre></div>
</details>
<h2 id="conclusion">Conclusion</h2>
<p>You're now fully equipped to build cross-chain contracts using the Wormhole protocol! With this tutorial, you've learned how to:</p>
<ul>
<li>Deploy sender and receiver contracts on different TestNets</li>
<li>Send a cross-chain message from one blockchain to another</li>
<li>Monitor the status of your cross-chain transactions using the Wormhole Explorer and Wormhole-Solidity-SDK</li>
</ul>
<div class="md-source-file">
  <small>
    
  </small>
</div>

  



  <form class="md-feedback" name="feedback" hidden>
    <fieldset>
      <legend class="md-feedback__title">
        Was this page helpful?
      </legend>
      <div class="md-feedback__inner">
        <div class="md-feedback__list">
          
            <button class="md-feedback__icon md-icon" type="submit" title="This page was helpful" data-md-value="1">
              <svg xmlns="http://www.w3.org/2000/svg" viewBox="0 0 24 24"><path d="M20 12a8 8 0 0 0-8-8 8 8 0 0 0-8 8 8 8 0 0 0 8 8 8 8 0 0 0 8-8m2 0a10 10 0 0 1-10 10A10 10 0 0 1 2 12 10 10 0 0 1 12 2a10 10 0 0 1 10 10M10 9.5c0 .8-.7 1.5-1.5 1.5S7 10.3 7 9.5 7.7 8 8.5 8s1.5.7 1.5 1.5m7 0c0 .8-.7 1.5-1.5 1.5S14 10.3 14 9.5 14.7 8 15.5 8s1.5.7 1.5 1.5m-5 7.73c-1.75 0-3.29-.73-4.19-1.81L9.23 14c.45.72 1.52 1.23 2.77 1.23s2.32-.51 2.77-1.23l1.42 1.42c-.9 1.08-2.44 1.81-4.19 1.81Z"/></svg>
            </button>
          
            <button class="md-feedback__icon md-icon" type="submit" title="This page could be improved" data-md-value="0">
              <svg xmlns="http://www.w3.org/2000/svg" viewBox="0 0 24 24"><path d="M20 12a8 8 0 0 0-8-8 8 8 0 0 0-8 8 8 8 0 0 0 8 8 8 8 0 0 0 8-8m2 0a10 10 0 0 1-10 10A10 10 0 0 1 2 12 10 10 0 0 1 12 2a10 10 0 0 1 10 10m-6.5-4c.8 0 1.5.7 1.5 1.5s-.7 1.5-1.5 1.5-1.5-.7-1.5-1.5.7-1.5 1.5-1.5M10 9.5c0 .8-.7 1.5-1.5 1.5S7 10.3 7 9.5 7.7 8 8.5 8s1.5.7 1.5 1.5m2 4.5c1.75 0 3.29.72 4.19 1.81l-1.42 1.42C14.32 16.5 13.25 16 12 16s-2.32.5-2.77 1.23l-1.42-1.42C8.71 14.72 10.25 14 12 14Z"/></svg>
            </button>
          
        </div>
        <div class="md-feedback__note">
          
            <div data-md-value="1" hidden>
              
              
                
              
              Thanks for your feedback!
            </div>
          
            <div data-md-value="0" hidden>
              
              
                
              
              Thanks for your feedback! Help us improve this page by submitting <a href="https://github.com/wormhole-foundation/wormhole-docs/issues/new/?title=[Feedback]+Create%20Cross-Chain%20Contracts+-+/tutorials/messaging/cross-chain-contracts/" target="_blank" rel="noopener">additional feedback</a>.
            </div>
          
        </div>
      </div>
    </fieldset>
  </form>


      
    </article>
  </div>
          
<script>var target=document.getElementById(location.hash.slice(1));target&&target.name&&(target.checked=target.name.startsWith("__tabbed_"))</script>
        </div>
        
      </main>
      
        
  <footer class="md-footer">
    
    <nav class="md-footer__inner md-grid" aria-label="footer.title">
      
      <a href="../" class="md-footer__link md-footer__link--prev" rel="prev">
        <div class="md-footer__button md-icon">
          <svg xmlns="http://www.w3.org/2000/svg" viewBox="0 0 24 24"><path d="M22 12a10 10 0 0 1-10 10A10 10 0 0 1 2 12 10 10 0 0 1 12 2a10 10 0 0 1 10 10m-6.6 4.6L10.8 12l4.6-4.6L14 6l-6 6 6 6 1.4-1.4Z"/></svg>
        </div>
        <div class="md-footer__title">
          <span class="md-footer__direction">
            Previous
          </span>
          <span class="md-footer__page-name">
          Tutorials - Messaging
          </span>
        </div>
      </a>
      
      
      <a href="../cross-chain-token-contracts/" class="md-footer__link md-footer__link--next" rel="next">
        <div class="md-footer__title">
          <span class="md-footer__direction">
            Next
          </span>
          <span class="md-footer__page-name">
          Create Cross-Chain Token Transfers
          </span>
        </div>
        <div class="md-footer__button md-icon">
          <svg xmlns="http://www.w3.org/2000/svg" viewBox="0 0 24 24"><path d="M22 12a10 10 0 0 1-10 10A10 10 0 0 1 2 12 10 10 0 0 1 12 2a10 10 0 0 1 10 10m-12 6 6-6-6-6-1.4 1.4 4.6 4.6-4.6 4.6L10 18Z"/></svg>
        </div>
      </a>
      
    </nav>
    
    <div class="md-footer-meta md-typeset">
      <div class="md-footer-meta__inner md-grid">
        <div class="column newsletter">
          <label for="email" class="newsletter-label">Subscribe for updates</label>
          <form action="https://formspree.io/f/{form_id}" method="post" class="md-footer-newsletter">
            <input name="Email" id="email" type="email" placeholder="Your email">
            <button type="submit">Subscribe</button>
          </form>
        </div>
        <div class="md-social">
  
    
    
    
    
    <a href="https://twitter.com/wormhole" target="_blank" rel="noopener" title="Twitter" class="md-social__link">
      <svg xmlns="http://www.w3.org/2000/svg" viewBox="0 0 512 512"><!--! Font Awesome Free 6.5.2 by @fontawesome - https://fontawesome.com License - https://fontawesome.com/license/free (Icons: CC BY 4.0, Fonts: SIL OFL 1.1, Code: MIT License) Copyright 2024 Fonticons, Inc.--><path d="M389.2 48h70.6L305.6 224.2 487 464H345L233.7 318.6 106.5 464H35.8l164.9-188.5L26.8 48h145.6l100.5 132.9L389.2 48zm-24.8 373.8h39.1L151.1 88h-42l255.3 333.8z"/></svg>
    </a>
  
    
    
    
    
    <a href="https://discord.gg/wormholecrypto" target="_blank" rel="noopener" title="Discord" class="md-social__link">
      <svg xmlns="http://www.w3.org/2000/svg" viewBox="0 0 640 512"><!--! Font Awesome Free 6.5.2 by @fontawesome - https://fontawesome.com License - https://fontawesome.com/license/free (Icons: CC BY 4.0, Fonts: SIL OFL 1.1, Code: MIT License) Copyright 2024 Fonticons, Inc.--><path d="M524.531 69.836a1.5 1.5 0 0 0-.764-.7A485.065 485.065 0 0 0 404.081 32.03a1.816 1.816 0 0 0-1.923.91 337.461 337.461 0 0 0-14.9 30.6 447.848 447.848 0 0 0-134.426 0 309.541 309.541 0 0 0-15.135-30.6 1.89 1.89 0 0 0-1.924-.91 483.689 483.689 0 0 0-119.688 37.107 1.712 1.712 0 0 0-.788.676C39.068 183.651 18.186 294.69 28.43 404.354a2.016 2.016 0 0 0 .765 1.375 487.666 487.666 0 0 0 146.825 74.189 1.9 1.9 0 0 0 2.063-.676A348.2 348.2 0 0 0 208.12 430.4a1.86 1.86 0 0 0-1.019-2.588 321.173 321.173 0 0 1-45.868-21.853 1.885 1.885 0 0 1-.185-3.126 251.047 251.047 0 0 0 9.109-7.137 1.819 1.819 0 0 1 1.9-.256c96.229 43.917 200.41 43.917 295.5 0a1.812 1.812 0 0 1 1.924.233 234.533 234.533 0 0 0 9.132 7.16 1.884 1.884 0 0 1-.162 3.126 301.407 301.407 0 0 1-45.89 21.83 1.875 1.875 0 0 0-1 2.611 391.055 391.055 0 0 0 30.014 48.815 1.864 1.864 0 0 0 2.063.7A486.048 486.048 0 0 0 610.7 405.729a1.882 1.882 0 0 0 .765-1.352c12.264-126.783-20.532-236.912-86.934-334.541ZM222.491 337.58c-28.972 0-52.844-26.587-52.844-59.239s23.409-59.241 52.844-59.241c29.665 0 53.306 26.82 52.843 59.239 0 32.654-23.41 59.241-52.843 59.241Zm195.38 0c-28.971 0-52.843-26.587-52.843-59.239s23.409-59.241 52.843-59.241c29.667 0 53.307 26.82 52.844 59.239 0 32.654-23.177 59.241-52.844 59.241Z"/></svg>
    </a>
  
    
    
    
    
    <a href="https://t.me/wormholecrypto" target="_blank" rel="noopener" title="Telegram" class="md-social__link">
      <?xml version="1.0" encoding="UTF-8" standalone="no"?>
<svg
   width="22"
   height="22"
   fill="none"
   version="1.1"
   id="svg499"
   sodipodi:docname="telegram.svg"
   inkscape:version="1.2.1 (9c6d41e4, 2022-07-14)"
   xmlns:inkscape="http://www.inkscape.org/namespaces/inkscape"
   xmlns:sodipodi="http://sodipodi.sourceforge.net/DTD/sodipodi-0.dtd"
   xmlns="http://www.w3.org/2000/svg"
   xmlns:svg="http://www.w3.org/2000/svg">
  <defs
     id="defs503" />
  <sodipodi:namedview
     id="namedview501"
     pagecolor="#ffffff"
     bordercolor="#666666"
     borderopacity="1.0"
     inkscape:showpageshadow="2"
     inkscape:pageopacity="0.0"
     inkscape:pagecheckerboard="0"
     inkscape:deskcolor="#d1d1d1"
     showgrid="false"
     inkscape:zoom="10.727273"
     inkscape:cx="0.13983051"
     inkscape:cy="11"
     inkscape:window-width="1309"
     inkscape:window-height="430"
     inkscape:window-x="0"
     inkscape:window-y="25"
     inkscape:window-maximized="0"
     inkscape:current-layer="svg499" />
  <path
     fill="#fff"
     d="M18.984 3.35s1.78-.694 1.632.993c-.05.694-.494 3.124-.84 5.753l-1.188 7.787s-.099 1.14-.99 1.34c-.89.198-2.225-.695-2.472-.894-.198-.149-3.71-2.38-4.947-3.472-.346-.297-.742-.892.05-1.587l5.193-4.96c.594-.595 1.188-1.983-1.286-.297l-6.925 4.712s-.791.496-2.275.05l-3.216-.993s-1.187-.744.841-1.488c4.947-2.33 11.031-4.711 16.423-6.943Z"
     id="path497" />
</svg>
    </a>
  
    
    
    
    
    <a href="https://github.com/wormhole-foundation/wormhole" target="_blank" rel="noopener" title="GitHub" class="md-social__link">
      <svg xmlns="http://www.w3.org/2000/svg" viewBox="0 0 496 512"><!--! Font Awesome Free 6.5.2 by @fontawesome - https://fontawesome.com License - https://fontawesome.com/license/free (Icons: CC BY 4.0, Fonts: SIL OFL 1.1, Code: MIT License) Copyright 2024 Fonticons, Inc.--><path d="M165.9 397.4c0 2-2.3 3.6-5.2 3.6-3.3.3-5.6-1.3-5.6-3.6 0-2 2.3-3.6 5.2-3.6 3-.3 5.6 1.3 5.6 3.6zm-31.1-4.5c-.7 2 1.3 4.3 4.3 4.9 2.6 1 5.6 0 6.2-2s-1.3-4.3-4.3-5.2c-2.6-.7-5.5.3-6.2 2.3zm44.2-1.7c-2.9.7-4.9 2.6-4.6 4.9.3 2 2.9 3.3 5.9 2.6 2.9-.7 4.9-2.6 4.6-4.6-.3-1.9-3-3.2-5.9-2.9zM244.8 8C106.1 8 0 113.3 0 252c0 110.9 69.8 205.8 169.5 239.2 12.8 2.3 17.3-5.6 17.3-12.1 0-6.2-.3-40.4-.3-61.4 0 0-70 15-84.7-29.8 0 0-11.4-29.1-27.8-36.6 0 0-22.9-15.7 1.6-15.4 0 0 24.9 2 38.6 25.8 21.9 38.6 58.6 27.5 72.9 20.9 2.3-16 8.8-27.1 16-33.7-55.9-6.2-112.3-14.3-112.3-110.5 0-27.5 7.6-41.3 23.6-58.9-2.6-6.5-11.1-33.3 2.6-67.9 20.9-6.5 69 27 69 27 20-5.6 41.5-8.5 62.8-8.5s42.8 2.9 62.8 8.5c0 0 48.1-33.6 69-27 13.7 34.7 5.2 61.4 2.6 67.9 16 17.7 25.8 31.5 25.8 58.9 0 96.5-58.9 104.2-114.8 110.5 9.2 7.9 17 22.9 17 46.4 0 33.7-.3 75.4-.3 83.6 0 6.5 4.6 14.4 17.3 12.1C428.2 457.8 496 362.9 496 252 496 113.3 383.5 8 244.8 8zM97.2 352.9c-1.3 1-1 3.3.7 5.2 1.6 1.6 3.9 2.3 5.2 1 1.3-1 1-3.3-.7-5.2-1.6-1.6-3.9-2.3-5.2-1zm-10.8-8.1c-.7 1.3.3 2.9 2.3 3.9 1.6 1 3.6.7 4.3-.7.7-1.3-.3-2.9-2.3-3.9-2-.6-3.6-.3-4.3.7zm32.4 35.6c-1.6 1.3-1 4.3 1.3 6.2 2.3 2.3 5.2 2.6 6.5 1 1.3-1.3.7-4.3-1.3-6.2-2.2-2.3-5.2-2.6-6.5-1zm-11.4-14.7c-1.6 1-1.6 3.6 0 5.9 1.6 2.3 4.3 3.3 5.6 2.3 1.6-1.3 1.6-3.9 0-6.2-1.4-2.3-4-3.3-5.6-2z"/></svg>
    </a>
  
    
    
    
    
    <a href="https://docs.wormhole.com/" target="_blank" rel="noopener" title="Docs" class="md-social__link">
      <?xml version="1.0" encoding="UTF-8" standalone="no"?>
<svg
   width="22"
   height="22"
   fill="none"
   version="1.1"
   id="svg191"
   sodipodi:docname="docs.svg"
   inkscape:version="1.2.1 (9c6d41e4, 2022-07-14)"
   xmlns:inkscape="http://www.inkscape.org/namespaces/inkscape"
   xmlns:sodipodi="http://sodipodi.sourceforge.net/DTD/sodipodi-0.dtd"
   xmlns="http://www.w3.org/2000/svg"
   xmlns:svg="http://www.w3.org/2000/svg">
  <sodipodi:namedview
     id="namedview193"
     pagecolor="#ffffff"
     bordercolor="#666666"
     borderopacity="1.0"
     inkscape:showpageshadow="2"
     inkscape:pageopacity="0.0"
     inkscape:pagecheckerboard="0"
     inkscape:deskcolor="#d1d1d1"
     showgrid="false"
     inkscape:zoom="6.8787622"
     inkscape:cx="-11.848062"
     inkscape:cy="9.4493745"
     inkscape:window-width="1309"
     inkscape:window-height="430"
     inkscape:window-x="0"
     inkscape:window-y="25"
     inkscape:window-maximized="0"
     inkscape:current-layer="svg191" />
  <g
     clipPath="url(#a)"
     id="g184">
    <path
       fill="#fff"
       d="M9.901 16.289a.644.644 0 1 1-.001 1.287.644.644 0 0 1 .001-1.287Zm10.106-3.985a.644.644 0 1 1 .001-1.289.644.644 0 0 1-.001 1.289Zm0-2.636a1.994 1.994 0 0 0-1.888 2.626l-6.582 3.504A1.984 1.984 0 0 0 9.9 14.94c-.76 0-1.452.436-1.787 1.115l-5.913-3.118c-.626-.329-1.093-1.357-1.044-2.294.026-.489.195-.868.452-1.015.163-.091.36-.084.569.025l.038.021c1.568.825 6.695 3.527 6.912 3.627.333.154.518.217 1.086-.053l10.6-5.513c.156-.058.338-.208.338-.434 0-.314-.325-.437-.326-.437-.603-.29-1.53-.723-2.433-1.146-1.933-.905-4.123-1.93-5.084-2.434-.83-.434-1.499-.068-1.618.006l-.231.114C7.13 5.543 1.338 8.413 1.008 8.613c-.59.36-.955 1.076-1.003 1.964-.073 1.409.645 2.878 1.672 3.416l6.254 3.225a1.994 1.994 0 0 0 1.97 1.707 1.996 1.996 0 0 0 1.992-1.962l6.888-3.733A1.99 1.99 0 0 0 22 11.66a1.995 1.995 0 0 0-1.993-1.993"
       id="path182" />
  </g>
  <defs
     id="defs189">
    <clipPath
       id="a">
      <path
         fill="#fff"
         d="M0 0h22v22H0z"
         id="path186" />
    </clipPath>
  </defs>
</svg>
    </a>
  
    
    
    
    
    <a href="https://www.youtube.com/@wormholecrypto" target="_blank" rel="noopener" title="YouTube" class="md-social__link">
      <svg xmlns="http://www.w3.org/2000/svg" viewBox="0 0 576 512"><!--! Font Awesome Free 6.5.2 by @fontawesome - https://fontawesome.com License - https://fontawesome.com/license/free (Icons: CC BY 4.0, Fonts: SIL OFL 1.1, Code: MIT License) Copyright 2024 Fonticons, Inc.--><path d="M549.655 124.083c-6.281-23.65-24.787-42.276-48.284-48.597C458.781 64 288 64 288 64S117.22 64 74.629 75.486c-23.497 6.322-42.003 24.947-48.284 48.597-11.412 42.867-11.412 132.305-11.412 132.305s0 89.438 11.412 132.305c6.281 23.65 24.787 41.5 48.284 47.821C117.22 448 288 448 288 448s170.78 0 213.371-11.486c23.497-6.321 42.003-24.171 48.284-47.821 11.412-42.867 11.412-132.305 11.412-132.305s0-89.438-11.412-132.305zm-317.51 213.508V175.185l142.739 81.205-142.739 81.201z"/></svg>
    </a>
  
</div>
      </div>
      <div class="md-footer-copyright md-grid">
        
        <div class="md-footer-copyright__highlight">
          2024 © Wormhole Foundation. All Rights Reserved.
        </div>
        
        <div class="papermoon">
          <span>Made with 🩵 by <a href="https://papermoon.io/" target="_blank">PaperMoon</a></span>
        </div>
        <div class="policy-links">
          <a href="https://wormhole.com/pages/terms-of-use" target="_blank">Terms of use</a>
          <a href="https://wormhole.com/pages/data-protection-and-privacy-policy" target="_blank">Privacy policy</a>
        </div>
      </div>
    </div>
  </footer>
  
      
    </div>
    <div class="md-dialog" data-md-component="dialog">
      <div class="md-dialog__inner md-typeset"></div>
    </div>
    
    
      <div class="md-consent" data-md-component="consent" id="__consent" hidden>
        <div class="md-consent__overlay"></div>
        <aside class="md-consent__inner">
          <form class="md-consent__form md-grid md-typeset" name="consent">
            

  
    
  





  

<h4>Cookie consent</h4>
<p>This site uses cookies to deliver its service and to analyze traffic. By browsing this site, you accept the <a href="https://wormhole.com/pages/data-protection-and-privacy-policy" target="_blank" rel="noopener">privacy policy</a>.</p>
<input class="md-toggle" type="checkbox" id="__settings" checked>
<div class="md-consent__settings">
  <ul class="task-list">
    
      
      
        
        
      
      <li class="task-list-item">
        <label class="task-list-control">
          <input type="checkbox" name="analytics" checked>
          <span class="task-list-indicator"></span>
          Google Analytics
        </label>
      </li>
    
  </ul>
</div>
<div class="md-consent__controls">
  
    
      <button class="md-button md-button--primary">Accept</button>
    
    
    
  
    
    
      <button type="reset" class="md-button md-button--primary">Reject</button>
    
    
  
</div>
          </form>
        </aside>
      </div>
      <script>var consent=__md_get("__consent");if(consent)for(var input of document.forms.consent.elements)input.name&&(input.checked=consent[input.name]||!1);else"file:"!==location.protocol&&setTimeout(function(){document.querySelector("[data-md-component=consent]").hidden=!1},250);var action,form=document.forms.consent;for(action of["submit","reset"])form.addEventListener(action,function(e){if(e.preventDefault(),"reset"===e.type)for(var n of document.forms.consent.elements)n.name&&(n.checked=!1);__md_set("__consent",Object.fromEntries(Array.from(new FormData(form).keys()).map(function(e){return[e,!0]}))),location.hash="",location.reload()})</script>
    
    <script id="__config" type="application/json">{"base": "../../..", "features": ["content.code.annotate", "content.code.copy", "content.tooltips", "navigation.footer", "navigation.tabs", "navigation.tabs.sticky", "navigation.sections", "navigation.indexes"], "search": "../../../assets/javascripts/workers/search.b8dbb3d2.min.js", "translations": {"clipboard.copied": "Copied to clipboard", "clipboard.copy": "Copy to clipboard", "search.result.more.one": "1 more on this page", "search.result.more.other": "# more on this page", "search.result.none": "No matching documents", "search.result.one": "1 matching document", "search.result.other": "# matching documents", "search.result.placeholder": "Type to start searching", "search.result.term.missing": "Missing", "select.version": "Select version"}}</script>
    
    
      <script src="../../../assets/javascripts/bundle.081f42fc.min.js"></script>
      
    
  <script id="init-glightbox">const lightbox = GLightbox({"touchNavigation": true, "loop": false, "zoomable": true, "draggable": true, "openEffect": "zoom", "closeEffect": "zoom", "slideEffect": "slide"});
document$.subscribe(() => { lightbox.reload() });
</script></body>
</html>